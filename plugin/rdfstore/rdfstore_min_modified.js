/*
 BSD 3-Clause License
 Copyright (c) 2011-2015 Digital Bazaar, Inc.
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 Redistributions in binary form must reproduce the above copyright
 notice, this list of conditions and the following disclaimer in the
 documentation and/or other materials provided with the distribution.

 Neither the name of the Digital Bazaar, Inc. nor the names of its
 contributors may be used to endorse or promote products derived from
 this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
!function(Gc){if("object"==typeof exports)module.exports=Gc();else if("function"==typeof define&&define.amd)define(Gc);else{var x;"undefined"!=typeof window?x=window:"undefined"!=typeof global?x=global:"undefined"!=typeof self&&(x=self);x.rdfstore=Gc()}}(function(){return function x(C,B,t){function k(a,b){if(!B[a]){if(!C[a]){var e="function"==typeof require&&require;if(!b&&e)return e(a,!0);if(c)return c(a,!0);throw Error("Cannot find module '"+a+"'");}e=B[a]={exports:{}};C[a][0].call(e.exports,function(b){var d=
C[a][1][b];return k(d?d:b)},e,e.exports,x,C,B,t)}return B[a].exports}for(var c="function"==typeof require&&require,b=0;b<t.length;b++)k(t[b]);return k}({1:[function(x,C,B){},{}],2:[function(x,C,B){function t(d,a,b){if(!(this instanceof t))return new t(d,a,b);var e=typeof d;if("base64"===a&&"string"===e)for(d=d.trim?d.trim():d.replace(/^\s+|\s+$/g,"");0!==d.length%4;)d+="=";var c;if("number"===e)c=u(d);else if("string"===e)c=t.byteLength(d,a);else if("object"===e)c=u(d.length);else throw Error("First argument needs to be a number, array or string.");
var l;t._useTypedArrays?l=t._augment(new Uint8Array(c)):(l=this,l.length=c,l._isBuffer=!0);if(t._useTypedArrays&&"number"===typeof d.byteLength)l._set(d);else{var h=d;if(A(h)||t.isBuffer(h)||h&&"object"===typeof h&&"number"===typeof h.length)for(a=0;a<c;a++)t.isBuffer(d)?l[a]=d.readUInt8(a):l[a]=d[a];else if("string"===e)l.write(d,0,a);else if("number"===e&&!t._useTypedArrays&&!b)for(a=0;a<c;a++)l[a]=0}return l}function k(d,a,b){var e="";for(b=Math.min(d.length,b);a<b;a++)e+=String.fromCharCode(d[a]);
return e}function c(d,a,b,e){e||(E("boolean"===typeof b,"missing or invalid endian"),E(void 0!==a&&null!==a,"missing offset"),E(a+1<d.length,"Trying to read beyond buffer length"));e=d.length;if(!(a>=e))return b?(b=d[a],a+1<e&&(b|=d[a+1]<<8)):(b=d[a]<<8,a+1<e&&(b|=d[a+1])),b}function b(d,a,b,e){e||(E("boolean"===typeof b,"missing or invalid endian"),E(void 0!==a&&null!==a,"missing offset"),E(a+3<d.length,"Trying to read beyond buffer length"));e=d.length;if(!(a>=e)){var c;b?(a+2<e&&(c=d[a+2]<<16),
a+1<e&&(c|=d[a+1]<<8),c|=d[a],a+3<e&&(c+=d[a+3]<<24>>>0)):(a+1<e&&(c=d[a+1]<<16),a+2<e&&(c|=d[a+2]<<8),a+3<e&&(c|=d[a+3]),c+=d[a]<<24>>>0);return c}}function a(d,a,b,e){e||(E("boolean"===typeof b,"missing or invalid endian"),E(void 0!==a&&null!==a,"missing offset"),E(a+1<d.length,"Trying to read beyond buffer length"));if(!(a>=d.length))return d=c(d,a,b,!0),d&32768?-1*(65535-d+1):d}function e(d,a,e,c){c||(E("boolean"===typeof e,"missing or invalid endian"),E(void 0!==a&&null!==a,"missing offset"),
E(a+3<d.length,"Trying to read beyond buffer length"));if(!(a>=d.length))return d=b(d,a,e,!0),d&2147483648?-1*(4294967295-d+1):d}function h(d,a,b,e){e||(E("boolean"===typeof b,"missing or invalid endian"),E(a+3<d.length,"Trying to read beyond buffer length"));return Ba.read(d,a,b,23,4)}function l(d,a,b,e){e||(E("boolean"===typeof b,"missing or invalid endian"),E(a+7<d.length,"Trying to read beyond buffer length"));return Ba.read(d,a,b,52,8)}function d(d,a,b,e,c){c||(E(void 0!==a&&null!==a,"missing value"),
E("boolean"===typeof e,"missing or invalid endian"),E(void 0!==b&&null!==b,"missing offset"),E(b+1<d.length,"trying to write beyond buffer length"),R(a,65535));var l=d.length;if(!(b>=l))for(c=0,l=Math.min(l-b,2);c<l;c++)d[b+c]=(a&255<<8*(e?c:1-c))>>>8*(e?c:1-c)}function m(d,a,b,e,c){c||(E(void 0!==a&&null!==a,"missing value"),E("boolean"===typeof e,"missing or invalid endian"),E(void 0!==b&&null!==b,"missing offset"),E(b+3<d.length,"trying to write beyond buffer length"),R(a,4294967295));var l=d.length;
if(!(b>=l))for(c=0,l=Math.min(l-b,4);c<l;c++)d[b+c]=a>>>8*(e?c:3-c)&255}function v(a,b,e,c,l){l||(E(void 0!==b&&null!==b,"missing value"),E("boolean"===typeof c,"missing or invalid endian"),E(void 0!==e&&null!==e,"missing offset"),E(e+1<a.length,"Trying to write beyond buffer length"),ha(b,32767,-32768));e>=a.length||(0<=b?d(a,b,e,c,l):d(a,65535+b+1,e,c,l))}function w(d,a,b,e,c){c||(E(void 0!==a&&null!==a,"missing value"),E("boolean"===typeof e,"missing or invalid endian"),E(void 0!==b&&null!==b,
"missing offset"),E(b+3<d.length,"Trying to write beyond buffer length"),ha(a,2147483647,-2147483648));b>=d.length||(0<=a?m(d,a,b,e,c):m(d,4294967295+a+1,b,e,c))}function n(d,a,b,e,c){c||(E(void 0!==a&&null!==a,"missing value"),E("boolean"===typeof e,"missing or invalid endian"),E(void 0!==b&&null!==b,"missing offset"),E(b+3<d.length,"Trying to write beyond buffer length"),N(a,3.4028234663852886E38,-3.4028234663852886E38));b>=d.length||Ba.write(d,a,b,e,23,4)}function y(d,a,b,e,c){c||(E(void 0!==a&&
null!==a,"missing value"),E("boolean"===typeof e,"missing or invalid endian"),E(void 0!==b&&null!==b,"missing offset"),E(b+7<d.length,"Trying to write beyond buffer length"),N(a,1.7976931348623157E308,-1.7976931348623157E308));b>=d.length||Ba.write(d,a,b,e,52,8)}function D(d,a,b){if("number"!==typeof d)return b;d=~~d;if(d>=a)return a;if(0<=d)return d;d+=a;return 0<=d?d:0}function u(d){d=~~Math.ceil(+d);return 0>d?0:d}function A(d){return(Array.isArray||function(d){return"[object Array]"===Object.prototype.toString.call(d)})(d)}
function G(d){return 16>d?"0"+d.toString(16):d.toString(16)}function I(d){for(var a=[],b=0;b<d.length;b++){var e=d.charCodeAt(b);if(127>=e)a.push(d.charCodeAt(b));else{var c=b;55296<=e&&57343>=e&&b++;e=encodeURIComponent(d.slice(c,b+1)).substr(1).split("%");for(c=0;c<e.length;c++)a.push(parseInt(e[c],16))}}return a}function O(d){for(var a=[],b=0;b<d.length;b++)a.push(d.charCodeAt(b)&255);return a}function L(d,a,b,e){for(var c=0;c<e&&!(c+b>=a.length||c>=d.length);c++)a[c+b]=d[c];return c}function ia(d){try{return decodeURIComponent(d)}catch(S){return String.fromCharCode(65533)}}
function R(d,a){E("number"===typeof d,"cannot write a non-number as a number");E(0<=d,"specified a negative value for writing an unsigned value");E(d<=a,"value is larger than maximum value for type");E(Math.floor(d)===d,"value has a fractional component")}function ha(d,a,b){E("number"===typeof d,"cannot write a non-number as a number");E(d<=a,"value larger than maximum allowed value");E(d>=b,"value smaller than minimum allowed value");E(Math.floor(d)===d,"value has a fractional component")}function N(d,
a,b){E("number"===typeof d,"cannot write a non-number as a number");E(d<=a,"value larger than maximum allowed value");E(d>=b,"value smaller than minimum allowed value")}function E(d,a){if(!d)throw Error(a||"Failed assertion");}var ea=x("base64-js"),Ba=x("ieee754");B.Buffer=t;B.SlowBuffer=t;B.INSPECT_MAX_BYTES=50;t.poolSize=8192;t._useTypedArrays=function(){try{var d=new ArrayBuffer(0),a=new Uint8Array(d);a.foo=function(){return 42};return 42===a.foo()&&"function"===typeof a.subarray}catch(wa){return!1}}();
t.isEncoding=function(d){switch(String(d).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};t.isBuffer=function(d){return!(null===d||void 0===d||!d._isBuffer)};t.byteLength=function(d,a){var b;d+="";switch(a||"utf8"){case "hex":b=d.length/2;break;case "utf8":case "utf-8":b=I(d).length;break;case "ascii":case "binary":case "raw":b=d.length;break;case "base64":b=ea.toByteArray(d).length;
break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=2*d.length;break;default:throw Error("Unknown encoding");}return b};t.concat=function(d,a){E(A(d),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array.");if(0===d.length)return new t(0);if(1===d.length)return d[0];var b;if("number"!==typeof a)for(b=a=0;b<d.length;b++)a+=d[b].length;var e=new t(a),c=0;for(b=0;b<d.length;b++){var l=d[b];l.copy(e,c);c+=l.length}return e};t.prototype.write=function(d,a,b,e){if(isFinite(a))isFinite(b)||
(e=b,b=void 0);else{var c=e;e=a;a=b;b=c}a=Number(a)||0;c=this.length-a;b?(b=Number(b),b>c&&(b=c)):b=c;e=String(e||"utf8").toLowerCase();switch(e){case "hex":a=Number(a)||0;e=this.length-a;b?(b=Number(b),b>e&&(b=e)):b=e;e=d.length;E(0===e%2,"Invalid hex string");b>e/2&&(b=e/2);for(e=0;e<b;e++)c=parseInt(d.substr(2*e,2),16),E(!isNaN(c),"Invalid hex string"),this[a+e]=c;t._charsWritten=2*e;d=e;break;case "utf8":case "utf-8":d=t._charsWritten=L(I(d),this,a,b);break;case "ascii":d=t._charsWritten=L(O(d),
this,a,b);break;case "binary":d=t._charsWritten=L(O(d),this,a,b);break;case "base64":d=t._charsWritten=L(ea.toByteArray(d),this,a,b);break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":for(var l,c=[],h=0;h<d.length;h++)l=d.charCodeAt(h),e=l>>8,l%=256,c.push(l),c.push(e);d=t._charsWritten=L(c,this,a,b);break;default:throw Error("Unknown encoding");}return d};t.prototype.toString=function(d,a,b){d=String(d||"utf8").toLowerCase();a=Number(a)||0;b=void 0!==b?Number(b):b=this.length;if(b===a)return"";
switch(d){case "hex":d=this.length;if(!a||0>a)a=0;if(!b||0>b||b>d)b=d;for(d="";a<b;a++)d+=G(this[a]);b=d;break;case "utf8":case "utf-8":var e=d="";for(b=Math.min(this.length,b);a<b;a++)127>=this[a]?(d+=ia(e)+String.fromCharCode(this[a]),e=""):e+="%"+this[a].toString(16);b=d+ia(e);break;case "ascii":b=k(this,a,b);break;case "binary":b=k(this,a,b);break;case "base64":b=0===a&&b===this.length?ea.fromByteArray(this):ea.fromByteArray(this.slice(a,b));break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=
this.slice(a,b);a="";for(d=0;d<b.length;d+=2)a+=String.fromCharCode(b[d]+256*b[d+1]);b=a;break;default:throw Error("Unknown encoding");}return b};t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};t.prototype.copy=function(d,a,b,e){b||(b=0);e||0===e||(e=this.length);a||(a=0);if(e!==b&&0!==d.length&&0!==this.length)if(E(e>=b,"sourceEnd < sourceStart"),E(0<=a&&a<d.length,"targetStart out of bounds"),E(0<=b&&b<this.length,"sourceStart out of bounds"),
E(0<=e&&e<=this.length,"sourceEnd out of bounds"),e>this.length&&(e=this.length),d.length-a<e-b&&(e=d.length-a+b),e-=b,100>e||!t._useTypedArrays)for(var c=0;c<e;c++)d[c+a]=this[c+b];else d._set(this.subarray(b,b+e),a)};t.prototype.slice=function(d,a){var b=this.length;d=D(d,b,0);a=D(a,b,b);if(t._useTypedArrays)return t._augment(this.subarray(d,a));for(var b=a-d,e=new t(b,void 0,!0),c=0;c<b;c++)e[c]=this[c+d];return e};t.prototype.get=function(d){console.log(".get() is deprecated. Access using array indexes instead.");
return this.readUInt8(d)};t.prototype.set=function(d,a){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(d,a)};t.prototype.readUInt8=function(d,a){a||(E(void 0!==d&&null!==d,"missing offset"),E(d<this.length,"Trying to read beyond buffer length"));if(!(d>=this.length))return this[d]};t.prototype.readUInt16LE=function(d,a){return c(this,d,!0,a)};t.prototype.readUInt16BE=function(d,a){return c(this,d,!1,a)};t.prototype.readUInt32LE=function(d,a){return b(this,
d,!0,a)};t.prototype.readUInt32BE=function(d,a){return b(this,d,!1,a)};t.prototype.readInt8=function(d,a){a||(E(void 0!==d&&null!==d,"missing offset"),E(d<this.length,"Trying to read beyond buffer length"));if(!(d>=this.length))return this[d]&128?-1*(255-this[d]+1):this[d]};t.prototype.readInt16LE=function(d,b){return a(this,d,!0,b)};t.prototype.readInt16BE=function(d,b){return a(this,d,!1,b)};t.prototype.readInt32LE=function(d,a){return e(this,d,!0,a)};t.prototype.readInt32BE=function(d,a){return e(this,
d,!1,a)};t.prototype.readFloatLE=function(d,a){return h(this,d,!0,a)};t.prototype.readFloatBE=function(d,a){return h(this,d,!1,a)};t.prototype.readDoubleLE=function(d,a){return l(this,d,!0,a)};t.prototype.readDoubleBE=function(d,a){return l(this,d,!1,a)};t.prototype.writeUInt8=function(d,a,b){b||(E(void 0!==d&&null!==d,"missing value"),E(void 0!==a&&null!==a,"missing offset"),E(a<this.length,"trying to write beyond buffer length"),R(d,255));a>=this.length||(this[a]=d)};t.prototype.writeUInt16LE=function(a,
b,e){d(this,a,b,!0,e)};t.prototype.writeUInt16BE=function(a,b,e){d(this,a,b,!1,e)};t.prototype.writeUInt32LE=function(d,a,b){m(this,d,a,!0,b)};t.prototype.writeUInt32BE=function(d,a,b){m(this,d,a,!1,b)};t.prototype.writeInt8=function(d,a,b){b||(E(void 0!==d&&null!==d,"missing value"),E(void 0!==a&&null!==a,"missing offset"),E(a<this.length,"Trying to write beyond buffer length"),ha(d,127,-128));a>=this.length||(0<=d?this.writeUInt8(d,a,b):this.writeUInt8(255+d+1,a,b))};t.prototype.writeInt16LE=function(d,
a,b){v(this,d,a,!0,b)};t.prototype.writeInt16BE=function(d,a,b){v(this,d,a,!1,b)};t.prototype.writeInt32LE=function(d,a,b){w(this,d,a,!0,b)};t.prototype.writeInt32BE=function(d,a,b){w(this,d,a,!1,b)};t.prototype.writeFloatLE=function(d,a,b){n(this,d,a,!0,b)};t.prototype.writeFloatBE=function(d,a,b){n(this,d,a,!1,b)};t.prototype.writeDoubleLE=function(d,a,b){y(this,d,a,!0,b)};t.prototype.writeDoubleBE=function(d,a,b){y(this,d,a,!1,b)};t.prototype.fill=function(d,a,b){d||(d=0);a||(a=0);b||(b=this.length);
"string"===typeof d&&(d=d.charCodeAt(0));E("number"===typeof d&&!isNaN(d),"value is not a number");E(b>=a,"end < start");if(b!==a&&0!==this.length)for(E(0<=a&&a<this.length,"start out of bounds"),E(0<=b&&b<=this.length,"end out of bounds");a<b;a++)this[a]=d};t.prototype.inspect=function(){for(var d=[],a=this.length,b=0;b<a;b++)if(d[b]=G(this[b]),b===B.INSPECT_MAX_BYTES){d[b+1]="...";break}return"<Buffer "+d.join(" ")+">"};t.prototype.toArrayBuffer=function(){if("undefined"!==typeof Uint8Array){if(t._useTypedArrays)return(new t(this)).buffer;
for(var d=new Uint8Array(this.length),a=0,b=d.length;a<b;a+=1)d[a]=this[a];return d.buffer}throw Error("Buffer.toArrayBuffer not supported in this browser");};var H=t.prototype;t._augment=function(d){d._isBuffer=!0;d._get=d.get;d._set=d.set;d.get=H.get;d.set=H.set;d.write=H.write;d.toString=H.toString;d.toLocaleString=H.toString;d.toJSON=H.toJSON;d.copy=H.copy;d.slice=H.slice;d.readUInt8=H.readUInt8;d.readUInt16LE=H.readUInt16LE;d.readUInt16BE=H.readUInt16BE;d.readUInt32LE=H.readUInt32LE;d.readUInt32BE=
H.readUInt32BE;d.readInt8=H.readInt8;d.readInt16LE=H.readInt16LE;d.readInt16BE=H.readInt16BE;d.readInt32LE=H.readInt32LE;d.readInt32BE=H.readInt32BE;d.readFloatLE=H.readFloatLE;d.readFloatBE=H.readFloatBE;d.readDoubleLE=H.readDoubleLE;d.readDoubleBE=H.readDoubleBE;d.writeUInt8=H.writeUInt8;d.writeUInt16LE=H.writeUInt16LE;d.writeUInt16BE=H.writeUInt16BE;d.writeUInt32LE=H.writeUInt32LE;d.writeUInt32BE=H.writeUInt32BE;d.writeInt8=H.writeInt8;d.writeInt16LE=H.writeInt16LE;d.writeInt16BE=H.writeInt16BE;
d.writeInt32LE=H.writeInt32LE;d.writeInt32BE=H.writeInt32BE;d.writeFloatLE=H.writeFloatLE;d.writeFloatBE=H.writeFloatBE;d.writeDoubleLE=H.writeDoubleLE;d.writeDoubleBE=H.writeDoubleBE;d.fill=H.fill;d.inspect=H.inspect;d.toArrayBuffer=H.toArrayBuffer;return d}},{"base64-js":3,ieee754:4}],3:[function(x,C,B){(function(t){function k(b){b=b.charCodeAt(0);if(43===b||45===b)return 62;if(47===b||95===b)return 63;if(48>b)return-1;if(58>b)return b-48+52;if(91>b)return b-65;if(123>b)return b-97+26}var c="undefined"!==
typeof Uint8Array?Uint8Array:Array;t.toByteArray=function(b){function a(d){m[v++]=d}var e,h,l,d,m;if(0<b.length%4)throw Error("Invalid string. Length must be a multiple of 4");e=b.length;d="="===b.charAt(e-2)?2:"="===b.charAt(e-1)?1:0;m=new c(3*b.length/4-d);h=0<d?b.length-4:b.length;var v=0;for(e=0;e<h;e+=4)l=k(b.charAt(e))<<18|k(b.charAt(e+1))<<12|k(b.charAt(e+2))<<6|k(b.charAt(e+3)),a((l&16711680)>>16),a((l&65280)>>8),a(l&255);2===d?(l=k(b.charAt(e))<<2|k(b.charAt(e+1))>>4,a(l&255)):1===d&&(l=
k(b.charAt(e))<<10|k(b.charAt(e+1))<<4|k(b.charAt(e+2))>>2,a(l>>8&255),a(l&255));return m};t.fromByteArray=function(b){var a,e=b.length%3,c="",l,d;a=0;for(d=b.length-e;a<d;a+=3)l=(b[a]<<16)+(b[a+1]<<8)+b[a+2],l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l&
63),c+=l;switch(e){case 1:l=b[b.length-1];c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l>>2);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l<<4&63);c+="==";break;case 2:l=(b[b.length-2]<<8)+b[b.length-1],c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l>>10),c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l>>4&63),c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l<<
2&63),c+="="}return c}})("undefined"===typeof B?this.base64js={}:B)},{}],4:[function(x,C,B){B.read=function(t,k,c,b,a){var e;e=8*a-b-1;var h=(1<<e)-1,l=h>>1,d=-7;a=c?a-1:0;var m=c?-1:1,v=t[k+a];a+=m;c=v&(1<<-d)-1;v>>=-d;for(d+=e;0<d;c=256*c+t[k+a],a+=m,d-=8);e=c&(1<<-d)-1;c>>=-d;for(d+=b;0<d;e=256*e+t[k+a],a+=m,d-=8);if(0===c)c=1-l;else{if(c===h)return e?NaN:Infinity*(v?-1:1);e+=Math.pow(2,b);c-=l}return(v?-1:1)*e*Math.pow(2,c-b)};B.write=function(t,k,c,b,a,e){var h,l=8*e-a-1,d=(1<<l)-1,m=d>>1,v=
23===a?Math.pow(2,-24)-Math.pow(2,-77):0;e=b?0:e-1;var w=b?1:-1,n=0>k||0===k&&0>1/k?1:0;k=Math.abs(k);isNaN(k)||Infinity===k?(k=isNaN(k)?1:0,b=d):(b=Math.floor(Math.log(k)/Math.LN2),1>k*(h=Math.pow(2,-b))&&(b--,h*=2),k=1<=b+m?k+v/h:k+v*Math.pow(2,1-m),2<=k*h&&(b++,h/=2),b+m>=d?(k=0,b=d):1<=b+m?(k=(k*h-1)*Math.pow(2,a),b+=m):(k=k*Math.pow(2,m-1)*Math.pow(2,a),b=0));for(;8<=a;t[c+e]=k&255,e+=w,k/=256,a-=8);b=b<<a|k;for(l+=a;0<l;t[c+e]=b&255,e+=w,b/=256,l-=8);t[c+e-w]|=128*n}},{}],5:[function(x,C,B){function t(){this._events=
this._events||{};this._maxListeners=this._maxListeners||void 0}function k(b){return"function"===typeof b}function c(b){return"object"===typeof b&&null!==b}C.exports=t;t.EventEmitter=t;t.prototype._events=void 0;t.prototype._maxListeners=void 0;t.defaultMaxListeners=10;t.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw TypeError("n must be a positive number");this._maxListeners=b;return this};t.prototype.emit=function(b){var a,e,h,l;this._events||(this._events={});
if("error"===b&&(!this._events.error||c(this._events.error)&&!this._events.error.length)){a=arguments[1];if(a instanceof Error)throw a;throw TypeError('Uncaught, unspecified "error" event.');}e=this._events[b];if(void 0===e)return!1;if(k(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:a=arguments.length;h=Array(a-1);for(l=1;l<a;l++)h[l-1]=arguments[l];e.apply(this,h)}else if(c(e)){a=arguments.length;
h=Array(a-1);for(l=1;l<a;l++)h[l-1]=arguments[l];e=e.slice();a=e.length;for(l=0;l<a;l++)e[l].apply(this,h)}return!0};t.prototype.addListener=function(b,a){var e;if(!k(a))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",b,k(a.listener)?a.listener:a);this._events[b]?c(this._events[b])?this._events[b].push(a):this._events[b]=[this._events[b],a]:this._events[b]=a;c(this._events[b])&&!this._events[b].warned&&(e=void 0!==this._maxListeners?
this._maxListeners:t.defaultMaxListeners)&&0<e&&this._events[b].length>e&&(this._events[b].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[b].length),"function"===typeof console.trace&&console.trace());return this};t.prototype.on=t.prototype.addListener;t.prototype.once=function(b,a){function e(){this.removeListener(b,e);c||(c=!0,a.apply(this,arguments))}if(!k(a))throw TypeError("listener must be a function");
var c=!1;e.listener=a;this.on(b,e);return this};t.prototype.removeListener=function(b,a){var e,h,l;if(!k(a))throw TypeError("listener must be a function");if(!this._events||!this._events[b])return this;e=this._events[b];l=e.length;h=-1;if(e===a||k(e.listener)&&e.listener===a)delete this._events[b],this._events.removeListener&&this.emit("removeListener",b,a);else if(c(e)){for(;0<l--;)if(e[l]===a||e[l].listener&&e[l].listener===a){h=l;break}if(0>h)return this;1===e.length?(e.length=0,delete this._events[b]):
e.splice(h,1);this._events.removeListener&&this.emit("removeListener",b,a)}return this};t.prototype.removeAllListeners=function(b){var a;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[b]&&delete this._events[b],this;if(0===arguments.length){for(a in this._events)"removeListener"!==a&&this.removeAllListeners(a);this.removeAllListeners("removeListener");this._events={};return this}a=this._events[b];if(k(a))this.removeListener(b,
a);else for(;a.length;)this.removeListener(b,a[a.length-1]);delete this._events[b];return this};t.prototype.listeners=function(b){return this._events&&this._events[b]?k(this._events[b])?[this._events[b]]:this._events[b].slice():[]};t.listenerCount=function(b,a){return b._events&&b._events[a]?k(b._events[a])?1:b._events[a].length:0}},{}],6:[function(x,C,B){var t=C.exports;x("events");var k=x("./lib/request"),c=x("url");t.request=function(a,e){"string"===typeof a&&(a=c.parse(a));a||(a={});a.host||a.port||
(a.port=parseInt(window.location.port,10));!a.host&&a.hostname&&(a.host=a.hostname);a.scheme||(a.scheme=window.location.protocol.split(":")[0]);a.host||(a.host=window.location.hostname||window.location.host);/:/.test(a.host)&&(a.port||(a.port=a.host.split(":")[1]),a.host=a.host.split(":")[0]);a.port||(a.port="https"==a.scheme?443:80);var h=new k(new b,a);if(e)h.on("response",e);return h};t.get=function(a,b){a.method="GET";var e=t.request(a,b);e.end();return e};t.Agent=function(){};t.Agent.defaultMaxSockets=
4;var b=function(){if("undefined"===typeof window)throw Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject)for(var a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],b=0;b<a.length;b++)try{var c=new window.ActiveXObject(a[b]);return function(){if(c){var e=c;c=null;return e}return new window.ActiveXObject(a[b])}}catch(l){}throw Error("ajax not supported in this browser");}();t.STATUS_CODES={100:"Continue",101:"Switching Protocols",
102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",
409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",
503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":7,events:5,url:25}],7:[function(x,C,B){B=x("stream");var t=x("./response"),k=x("Base64");x=x("inherits");var c=C.exports=function(a,c){var e=this;e.writable=!0;e.xhr=a;e.body=[];e.uri=(c.scheme||"http")+"://"+c.host+(c.port?":"+c.port:"")+(c.path||"/");"undefined"===
typeof c.withCredentials&&(c.withCredentials=!0);try{a.withCredentials=c.withCredentials}catch(n){}a.open(c.method||"GET",e.uri,!0);e._headers={};if(c.headers)for(var d=b(c.headers),h=0;h<d.length;h++){var v=d[h];e.isSafeRequestHeader(v)&&e.setHeader(v,c.headers[v])}c.auth&&this.setHeader("Authorization","Basic "+k.btoa(c.auth));var w=new t;w.on("close",function(){e.emit("close")});w.on("ready",function(){e.emit("response",w)});a.onreadystatechange=function(){a.__aborted||w.handle(a)}};x(c,B);c.prototype.setHeader=
function(a,b){this._headers[a.toLowerCase()]=b};c.prototype.getHeader=function(a){return this._headers[a.toLowerCase()]};c.prototype.removeHeader=function(a){delete this._headers[a.toLowerCase()]};c.prototype.write=function(a){this.body.push(a)};c.prototype.destroy=function(a){this.xhr.__aborted=!0;this.xhr.abort();this.emit("close")};c.prototype.end=function(c){void 0!==c&&this.body.push(c);var e=b(this._headers);for(c=0;c<e.length;c++){var l=e[c],d=this._headers[l];if(a(d))for(var k=0;k<d.length;k++)this.xhr.setRequestHeader(l,
d[k]);else this.xhr.setRequestHeader(l,d)}if(0===this.body.length)this.xhr.send("");else if("string"===typeof this.body[0])this.xhr.send(this.body.join(""));else{if(a(this.body[0]))for(e=[],c=0;c<this.body.length;c++)e.push.apply(e,this.body[c]);else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(c=k=0;c<this.body.length;c++)k+=this.body[c].length;e=new this.body[0].constructor(k);for(c=l=0;c<this.body.length;c++)for(d=this.body[c],k=0;k<d.length;k++)e[l++]=d[k]}else for(e="",
c=0;c<this.body.length;c++)e+=this.body[c].toString();this.xhr.send(e)}};c.unsafeHeaders="accept-charset accept-encoding access-control-request-headers access-control-request-method connection content-length cookie cookie2 content-transfer-encoding date expect host keep-alive origin referer te trailer transfer-encoding upgrade user-agent via".split(" ");c.prototype.isSafeRequestHeader=function(a){if(!a)return!1;var b;a:if(b=c.unsafeHeaders,a=a.toLowerCase(),b.indexOf)b=b.indexOf(a);else{for(var e=
0;e<b.length;e++)if(b[e]===a){b=e;break a}b=-1}return-1===b};var b=Object.keys||function(a){var b=[],c;for(c in a)b.push(c);return b},a=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{"./response":8,Base64:9,inherits:11,stream:18}],8:[function(x,C,B){function t(a){a=a.getAllResponseHeaders().split(/\r?\n/);for(var c={},h=0;h<a.length;h++){var l=a[h];if(""!==l){var d=l.match(/^([^:]+):\s*(.*)/);d?(l=d[1].toLowerCase(),d=d[2],void 0!==c[l]?b(c[l])?c[l].push(d):
c[l]=[c[l],d]:c[l]=d):c[l]=!0}}return c}B=x("stream");x=x("util");C=C.exports=function(a){this.offset=0;this.readable=!0};x.inherits(C,B);var k=!0,c=!0;C.prototype.getResponse=function(a){var b=String(a.responseType).toLowerCase();return"blob"===b?a.responseBlob||a.response:"arraybuffer"===b?a.response:a.responseText};C.prototype.getHeader=function(a){return this.headers[a.toLowerCase()]};C.prototype.handle=function(a){if(2===a.readyState&&c){try{this.statusCode=a.status,this.headers=t(a)}catch(e){c=
!1}c&&this.emit("ready")}else if(k&&3===a.readyState){try{this.statusCode||(this.statusCode=a.status,this.headers=t(a),this.emit("ready"))}catch(e){}try{this._emitData(a)}catch(e){k=!1}}else 4===a.readyState&&(this.statusCode||(this.statusCode=a.status,this.emit("ready")),this._emitData(a),a.error?this.emit("error",this.getResponse(a)):this.emit("end"),this.emit("close"))};C.prototype._emitData=function(a){a=this.getResponse(a);a.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(a,
this.offset)),this.offset=a.byteLength):a.length>this.offset&&(this.emit("data",a.slice(this.offset)),this.offset=a.length)};var b=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{stream:18,util:28}],9:[function(x,C,B){(function(){function t(c){this.message=c}var k="undefined"!=typeof B?B:this;t.prototype=Error();t.prototype.name="InvalidCharacterError";k.btoa||(k.btoa=function(c){for(var b,a,e=0,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
l="";c.charAt(e|0)||(h="=",e%1);l+=h.charAt(63&b>>8-e%1*8)){a=c.charCodeAt(e+=.75);if(255<a)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");b=b<<8|a}return l});k.atob||(k.atob=function(c){c=c.replace(/=+$/,"");if(1==c.length%4)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var b=0,a,e,h=0,l="";e=c.charAt(h++);~e&&(a=b%4?64*a+e:e,b++%4)?l+=String.fromCharCode(255&a>>(-2*b&6)):0)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e);
return l})})()},{}],10:[function(x,C,B){var t=x("http");x=C.exports;for(var k in t)t.hasOwnProperty(k)&&(x[k]=t[k]);x.request=function(c,b){c||(c={});c.scheme="https";c.protocol="https:";return t.request.call(this,c,b)}},{http:6}],11:[function(x,C,B){C.exports="function"===typeof Object.create?function(t,k){t.super_=k;t.prototype=Object.create(k.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,k){t.super_=k;var c=function(){};c.prototype=k.prototype;t.prototype=
new c;t.prototype.constructor=t}},{}],12:[function(x,C,B){function t(){}x=C.exports={};x.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(c){return window.setImmediate(c)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var k=[];window.addEventListener("message",function(c){var b=c.source;b!==window&&null!==b||"process-tick"!==c.data||(c.stopPropagation(),0<k.length&&k.shift()())},!0);return function(c){k.push(c);window.postMessage("process-tick",
"*")}}return function(c){setTimeout(c,0)}}();x.title="browser";x.browser=!0;x.env={};x.argv=[];x.on=t;x.addListener=t;x.once=t;x.off=t;x.removeListener=t;x.removeAllListeners=t;x.emit=t;x.binding=function(k){throw Error("process.binding is not supported");};x.cwd=function(){return"/"};x.chdir=function(k){throw Error("process.chdir is not supported");}},{}],13:[function(x,C,B){(function(t){(function(k){function c(d){throw RangeError(G[d]);}function b(d,a){for(var b=d.length;b--;)d[b]=a(d[b]);return d}
function a(d,a){return b(d.split(A),a).join(".")}function e(d){for(var a=[],b=0,c=d.length,e,l;b<c;)e=d.charCodeAt(b++),55296<=e&&56319>=e&&b<c?(l=d.charCodeAt(b++),56320==(l&64512)?a.push(((e&1023)<<10)+(l&1023)+65536):(a.push(e),b--)):a.push(e);return a}function h(d){return b(d,function(d){var a="";65535<d&&(d-=65536,a+=O(d>>>10&1023|55296),d=56320|d&1023);return a+=O(d)}).join("")}function l(d,a){return d+22+75*(26>d)-((0!=a)<<5)}function d(d,a,b){var c=0;d=b?I(d/700):d>>1;for(d+=I(d/a);455<d;c+=
36)d=I(d/35);return I(c+36*d/(d+38))}function m(a){var b=[],e=a.length,l,k=0,m=128,n=72,v,u,O,G,w;v=a.lastIndexOf("-");0>v&&(v=0);for(u=0;u<v;++u)128<=a.charCodeAt(u)&&c("not-basic"),b.push(a.charCodeAt(u));for(v=0<v?v+1:0;v<e;){u=k;l=1;for(O=36;;O+=36){v>=e&&c("invalid-input");G=a.charCodeAt(v++);G=10>G-48?G-22:26>G-65?G-65:26>G-97?G-97:36;(36<=G||G>I((2147483647-k)/l))&&c("overflow");k+=G*l;w=O<=n?1:O>=n+26?26:O-n;if(G<w)break;G=36-w;l>I(2147483647/G)&&c("overflow");l*=G}l=b.length+1;n=d(k-u,l,
0==u);I(k/l)>2147483647-m&&c("overflow");m+=I(k/l);k%=l;b.splice(k++,0,m)}return h(b)}function v(a){var b,h,k,m,n,v,u,G,w,y=[],L,A,D;a=e(a);L=a.length;b=128;h=0;n=72;for(v=0;v<L;++v)w=a[v],128>w&&y.push(O(w));for((k=m=y.length)&&y.push("-");k<L;){u=2147483647;for(v=0;v<L;++v)w=a[v],w>=b&&w<u&&(u=w);A=k+1;u-b>I((2147483647-h)/A)&&c("overflow");h+=(u-b)*A;b=u;for(v=0;v<L;++v)if(w=a[v],w<b&&2147483647<++h&&c("overflow"),w==b){G=h;for(u=36;;u+=36){w=u<=n?1:u>=n+26?26:u-n;if(G<w)break;D=G-w;G=36-w;y.push(O(l(w+
D%G,0)));G=I(D/G)}y.push(O(l(G,0)));n=d(h,A,k==m);h=0;++k}++h;++b}return y.join("")}var w="object"==typeof B&&B,n="object"==typeof C&&C&&C.exports==w&&C,y="object"==typeof t&&t;if(y.global===y||y.window===y)k=y;var D=/^xn--/,u=/[^ -~]/,A=/\x2E|\u3002|\uFF0E|\uFF61/g,G={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=Math.floor,O=String.fromCharCode,L,y={version:"1.2.4",ucs2:{decode:e,encode:h},
decode:m,encode:v,toASCII:function(d){return a(d,function(d){return u.test(d)?"xn--"+v(d):d})},toUnicode:function(d){return a(d,function(d){return D.test(d)?m(d.slice(4).toLowerCase()):d})}};if(w&&!w.nodeType)if(n)n.exports=y;else for(L in y)y.hasOwnProperty(L)&&(w[L]=y[L]);else k.punycode=y})(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],14:[function(x,C,B){C.exports=function(k,c,b,a){b=b||"=";var e={};if("string"!==typeof k||0===k.length)return e;var h=
/\+/g;k=k.split(c||"&");c=1E3;a&&"number"===typeof a.maxKeys&&(c=a.maxKeys);a=k.length;0<c&&a>c&&(a=c);for(c=0;c<a;++c){var l=k[c].replace(h,"%20"),d=l.indexOf(b),m;0<=d?(m=l.substr(0,d),l=l.substr(d+1)):(m=l,l="");m=decodeURIComponent(m);l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(e,m)?t(e[m])?e[m].push(l):e[m]=[e[m],l]:e[m]=l}return e};var t=Array.isArray||function(k){return"[object Array]"===Object.prototype.toString.call(k)}},{}],15:[function(x,C,B){function t(a,b){if(a.map)return a.map(b);
for(var c=[],e=0;e<a.length;e++)c.push(b(a[e],e));return c}var k=function(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?a:"";default:return""}};C.exports=function(a,e,h,l){e=e||"&";h=h||"=";null===a&&(a=void 0);return"object"===typeof a?t(b(a),function(d){var b=encodeURIComponent(k(d))+h;return c(a[d])?a[d].map(function(d){return b+encodeURIComponent(k(d))}).join(e):b+encodeURIComponent(k(a[d]))}).join(e):l?encodeURIComponent(k(l))+
h+encodeURIComponent(k(a)):""};var c=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},b=Object.keys||function(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],16:[function(x,C,B){B.decode=B.parse=x("./decode");B.encode=B.stringify=x("./encode")},{"./decode":14,"./encode":15}],17:[function(x,C,B){function t(c){if(!(this instanceof t))return new t(c);b.call(this,c);a.call(this,c);c&&!1===c.readable&&(this.readable=!1);
c&&!1===c.writable&&(this.writable=!1);this.allowHalfOpen=!0;c&&!1===c.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",k)}function k(){if(!this.allowHalfOpen&&!this._writableState.ended){var a=this;c(function(){a.end()})}}C.exports=t;C=x("inherits");var c=x("process/browser.js").nextTick,b=x("./readable.js"),a=x("./writable.js");C(t,b);t.prototype.write=a.prototype.write;t.prototype.end=a.prototype.end;t.prototype._write=a.prototype._write},{"./readable.js":21,"./writable.js":23,inherits:11,
"process/browser.js":19}],18:[function(x,C,B){function t(){k.call(this)}C.exports=t;var k=x("events").EventEmitter;x("inherits")(t,k);t.Readable=x("./readable.js");t.Writable=x("./writable.js");t.Duplex=x("./duplex.js");t.Transform=x("./transform.js");t.PassThrough=x("./passthrough.js");t.Stream=t;t.prototype.pipe=function(c,b){function a(d){c.writable&&!1===c.write(d)&&v.pause&&v.pause()}function e(){v.readable&&v.resume&&v.resume()}function h(){w||(w=!0,c.end())}function l(){w||(w=!0,"function"===
typeof c.destroy&&c.destroy())}function d(d){m();if(0===k.listenerCount(this,"error"))throw d;}function m(){v.removeListener("data",a);c.removeListener("drain",e);v.removeListener("end",h);v.removeListener("close",l);v.removeListener("error",d);c.removeListener("error",d);v.removeListener("end",m);v.removeListener("close",m);c.removeListener("close",m)}var v=this;v.on("data",a);c.on("drain",e);c._isStdio||b&&!1===b.end||(v.on("end",h),v.on("close",l));var w=!1;v.on("error",d);c.on("error",d);v.on("end",
m);v.on("close",m);c.on("close",m);c.emit("pipe",v);return c}},{"./duplex.js":17,"./passthrough.js":20,"./readable.js":21,"./transform.js":22,"./writable.js":23,events:5,inherits:11}],19:[function(x,C,B){x=C.exports={};x.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(k){return window.setImmediate(k)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var t=[];window.addEventListener("message",function(k){var c=k.source;c!==window&&
null!==c||"process-tick"!==k.data||(k.stopPropagation(),0<t.length&&t.shift()())},!0);return function(k){t.push(k);window.postMessage("process-tick","*")}}return function(k){setTimeout(k,0)}}();x.title="browser";x.browser=!0;x.env={};x.argv=[];x.binding=function(t){throw Error("process.binding is not supported");};x.cwd=function(){return"/"};x.chdir=function(t){throw Error("process.chdir is not supported");}},{}],20:[function(x,C,B){function t(c){if(!(this instanceof t))return new t(c);k.call(this,
c)}C.exports=t;var k=x("./transform.js");x("inherits")(t,k);t.prototype._transform=function(c,b,a){a(null,c)}},{"./transform.js":22,inherits:11}],21:[function(x,C,B){(function(t){function k(d,a){d=d||{};var b=d.highWaterMark;this.highWaterMark=b||0===b?b:16384;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.calledRead=this.reading=this.endEmitted=this.ended=this.flowing=!1;this.sync=!0;this.readableListening=this.emittedReadable=this.needReadable=
!1;this.objectMode=!!d.objectMode;this.defaultEncoding=d.defaultEncoding||"utf8";this.ranOut=!1;this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;d.encoding&&(I||(I=x("string_decoder").StringDecoder),this.decoder=new I(d.encoding),this.encoding=d.encoding)}function c(d){if(!(this instanceof c))return new c(d);this._readableState=new k(d,this);this.readable=!0;u.call(this)}function b(d,a,b,c,l){var k;k=b;var m=null;A.isBuffer(k)||"string"===typeof k||null===k||void 0===k||a.objectMode||
m||(m=new TypeError("Invalid non-string/buffer chunk"));(k=m)?d.emit("error",k):null===b||void 0===b?(a.reading=!1,a.ended||(a.decoder&&!a.ended&&(b=a.decoder.end())&&b.length&&(a.buffer.push(b),a.length+=a.objectMode?1:b.length),a.ended=!0,0<a.length?e(d):n(d))):a.objectMode||b&&0<b.length?a.ended&&!l?(b=Error("stream.push() after EOF"),d.emit("error",b)):a.endEmitted&&l?(b=Error("stream.unshift() after end event"),d.emit("error",b)):(!a.decoder||l||c||(b=a.decoder.write(b)),a.length+=a.objectMode?
1:b.length,l?a.buffer.unshift(b):(a.reading=!1,a.buffer.push(b)),a.needReadable&&e(d),h(d,a)):l||(a.reading=!1);return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function a(d,a){if(0===a.length&&a.ended)return 0;if(a.objectMode)return 0===d?0:1;if(isNaN(d)||null===d)return a.flowing&&a.buffer.length?a.buffer[0].length:a.length;if(0>=d)return 0;if(d>a.highWaterMark){var b=d;if(8388608<=b)b=8388608;else{b--;for(var c=1;32>c;c<<=1)b|=b>>c;b++}a.highWaterMark=b}if(d>a.length){if(a.ended)return a.length;
a.needReadable=!0;return 0}return d}function e(d){var a=d._readableState;a.needReadable=!1;a.emittedReadable||(a.emittedReadable=!0,a.sync?G(function(){d.emit("readable")}):d.emit("readable"))}function h(d,a){a.readingMore||(a.readingMore=!0,G(function(){for(var b=a.length;!a.reading&&!a.flowing&&!a.ended&&a.length<a.highWaterMark&&(d.read(0),b!==a.length);)b=a.length;a.readingMore=!1}))}function l(a){return function(){var b=a._readableState;b.awaitDrain--;0===b.awaitDrain&&d(a)}}function d(d){function a(d,
a,e){!1===d.write(c)&&b.awaitDrain++}var b=d._readableState,c;for(b.awaitDrain=0;b.pipesCount&&null!==(c=d.read());)if(1===b.pipesCount?a(b.pipes,0,null):y(b.pipes,a),d.emit("data",c),0<b.awaitDrain)return;0===b.pipesCount?(b.flowing=!1,0<D.listenerCount(d,"data")&&v(d)):b.ranOut=!0}function m(){this._readableState.ranOut&&(this._readableState.ranOut=!1,d(this))}function v(d,a){if(d._readableState.flowing)throw Error("Cannot switch to old mode now.");var b=a||!1,c=!1;d.readable=!0;d.pipe=u.prototype.pipe;
d.on=d.addListener=u.prototype.on;d.on("readable",function(){c=!0;for(var a;!b&&null!==(a=d.read());)d.emit("data",a);null===a&&(c=!1,d._readableState.needReadable=!0)});d.pause=function(){b=!0;this.emit("pause")};d.resume=function(){b=!1;c?G(function(){d.emit("readable")}):this.read(0);this.emit("resume")};d.emit("readable")}function w(d,a){var b=a.buffer,c=a.length,e=!!a.decoder,l=!!a.objectMode;if(0===b.length)return null;if(0===c)c=null;else if(l)c=b.shift();else if(!d||d>=c)c=e?b.join(""):A.concat(b,
c),b.length=0;else if(d<b[0].length)l=b[0],c=l.slice(0,d),b[0]=l.slice(d);else if(d===b[0].length)c=b.shift();else for(var c=e?"":new A(d),h=0,k=0,m=b.length;k<m&&h<d;k++){var l=b[0],n=Math.min(d-h,l.length);e?c+=l.slice(0,n):l.copy(c,h,0,n);n<l.length?b[0]=l.slice(n):b.shift();h+=n}return c}function n(d){var a=d._readableState;if(0<a.length)throw Error("endReadable called on non-empty stream");!a.endEmitted&&a.calledRead&&(a.ended=!0,G(function(){a.endEmitted||0!==a.length||(a.endEmitted=!0,d.readable=
!1,d.emit("end"))}))}function y(d,a){for(var b=0,c=d.length;b<c;b++)a(d[b],b)}C.exports=c;c.ReadableState=k;var D=x("events").EventEmitter,u=x("./index.js"),A=x("buffer").Buffer,G=x("process/browser.js").nextTick,I;x("inherits")(c,u);c.prototype.push=function(d,a){var c=this._readableState;"string"!==typeof d||c.objectMode||(a=a||c.defaultEncoding,a!==c.encoding&&(d=new A(d,a),a=""));return b(this,c,d,a,!1)};c.prototype.unshift=function(d){return b(this,this._readableState,d,"",!0)};c.prototype.setEncoding=
function(d){I||(I=x("string_decoder").StringDecoder);this._readableState.decoder=new I(d);this._readableState.encoding=d};c.prototype.read=function(d){var b=this._readableState;b.calledRead=!0;var c=d;if("number"!==typeof d||0<d)b.emittedReadable=!1;if(0===d&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return e(this),null;d=a(d,b);if(0===d&&b.ended)return 0===b.length&&n(this),null;var l=b.needReadable;b.length-d<=b.highWaterMark&&(l=!0);if(b.ended||b.reading)l=!1;l&&(b.reading=!0,b.sync=
!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1);l&&!b.reading&&(d=a(c,b));c=0<d?w(d,b):null;null===c&&(b.needReadable=!0,d=0);b.length-=d;0!==b.length||b.ended||(b.needReadable=!0);b.ended&&!b.endEmitted&&0===b.length&&n(this);return c};c.prototype._read=function(d){this.emit("error",Error("not implemented"))};c.prototype.pipe=function(a,b){function c(d){d===u&&h()}function e(){a.end()}function h(){a.removeListener("close",n);a.removeListener("finish",v);a.removeListener("drain",
A);a.removeListener("error",k);a.removeListener("unpipe",c);u.removeListener("end",e);u.removeListener("end",h);a._writableState&&!a._writableState.needDrain||A()}function k(d){u.unpipe(a);0===I&&0===D.listenerCount(a,"error")&&a.emit("error",d)}function n(){a.removeListener("finish",v);u.unpipe(a)}function v(){a.removeListener("close",n);u.unpipe(a)}var u=this,w=this._readableState;switch(w.pipesCount){case 0:w.pipes=a;break;case 1:w.pipes=[w.pipes,a];break;default:w.pipes.push(a)}w.pipesCount+=
1;var y=b&&!1===b.end||a===t.stdout||a===t.stderr?h:e;if(w.endEmitted)G(y);else u.once("end",y);a.on("unpipe",c);var A=l(u);a.on("drain",A);var I=D.listenerCount(a,"error");a.once("error",k);a.once("close",n);a.once("finish",v);a.emit("pipe",u);w.flowing||(this.on("readable",m),w.flowing=!0,G(function(){d(u)}));return a};c.prototype.unpipe=function(d){var a=this._readableState;if(0===a.pipesCount)return this;if(1===a.pipesCount){if(d&&d!==a.pipes)return this;d||(d=a.pipes);a.pipes=null;a.pipesCount=
0;this.removeListener("readable",m);a.flowing=!1;d&&d.emit("unpipe",this);return this}if(!d){d=a.pipes;var b=a.pipesCount;a.pipes=null;a.pipesCount=0;this.removeListener("readable",m);a.flowing=!1;for(var c=0;c<b;c++)d[c].emit("unpipe",this);return this}a:{for(var c=a.pipes,b=0,e=c.length;b<e;b++)if(c[b]===d){c=b;break a}c=-1}if(-1===c)return this;a.pipes.splice(c,1);--a.pipesCount;1===a.pipesCount&&(a.pipes=a.pipes[0]);d.emit("unpipe",this);return this};c.prototype.on=function(d,a){var b=u.prototype.on.call(this,
d,a);"data"!==d||this._readableState.flowing||v(this);if("readable"===d&&this.readable){var c=this._readableState;c.readableListening||(c.readableListening=!0,c.emittedReadable=!1,c.needReadable=!0,c.reading?c.length&&e(this,c):this.read(0))}return b};c.prototype.addListener=c.prototype.on;c.prototype.resume=function(){v(this);this.read(0);this.emit("resume")};c.prototype.pause=function(){v(this,!0);this.emit("pause")};c.prototype.wrap=function(d){var a=this._readableState,b=!1,c=this;d.on("end",
function(){if(a.decoder&&!a.ended){var d=a.decoder.end();d&&d.length&&c.push(d)}c.push(null)});d.on("data",function(e){a.decoder&&(e=a.decoder.write(e));e&&(a.objectMode||e.length)&&!c.push(e)&&(b=!0,d.pause())});for(var e in d)"function"===typeof d[e]&&"undefined"===typeof this[e]&&(this[e]=function(a){return function(){return d[a].apply(d,arguments)}}(e));y(["error","close","destroy","pause","resume"],function(a){d.on(a,function(d){return c.emit.apply(c,a,d)})});c._read=function(a){b&&(b=!1,d.resume())};
return c};c._fromList=w}).call(this,x("VCmEsw"))},{"./index.js":18,VCmEsw:12,buffer:2,events:5,inherits:11,"process/browser.js":19,string_decoder:24}],22:[function(x,C,B){function t(a,b){this.afterTransform=function(a,c){var d;d=b._transformState;d.transforming=!1;var e=d.writecb;e?(d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&b.push(c),e&&e(a),d=b._readableState,d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&b._read(d.highWaterMark),d=void 0):d=b.emit("error",Error("no writecb in Transform class"));
return d};this.transforming=this.needTransform=!1;this.writechunk=this.writecb=null}function k(a){if(!(this instanceof k))return new k(a);b.call(this,a);this._transformState=new t(a,this);var e=this;this._readableState.needReadable=!0;this._readableState.sync=!1;this.once("finish",function(){"function"===typeof this._flush?this._flush(function(a){c(e,a)}):c(e)})}function c(a,b){if(b)return a.emit("error",b);var c=a._transformState;if(a._writableState.length)throw Error("calling transform done when ws.length != 0");
if(c.transforming)throw Error("calling transform done when still transforming");return a.push(null)}C.exports=k;var b=x("./duplex.js");x("inherits")(k,b);k.prototype.push=function(a,c){this._transformState.needTransform=!1;return b.prototype.push.call(this,a,c)};k.prototype._transform=function(a,b,c){throw Error("not implemented");};k.prototype._write=function(a,b,c){var e=this._transformState;e.writecb=c;e.writechunk=a;e.writeencoding=b;e.transforming||(a=this._readableState,(e.needTransform||a.needReadable||
a.length<a.highWaterMark)&&this._read(a.highWaterMark))};k.prototype._read=function(a){a=this._transformState;a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0}},{"./duplex.js":17,inherits:11}],23:[function(x,C,B){function t(d,a,b){this.chunk=d;this.encoding=a;this.callback=b}function k(a,b){a=a||{};var c=a.highWaterMark;this.highWaterMark=c||0===c?c:16384;this.objectMode=!!a.objectMode;this.highWaterMark=
~~this.highWaterMark;this.finished=this.ended=this.ending=this.needDrain=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){d(b,a)};this.writecb=null;this.writelen=0;this.buffer=[]}function c(d){if(!(this instanceof c||this instanceof D.Duplex))return new c(d);this._writableState=new k(d,this);this.writable=!0;D.call(this)}function b(d,a,b){var c=Error("write after end");
d.emit("error",c);u(function(){b(c)})}function a(d,a,b,c){var e=!0;if(!A.isBuffer(b)&&"string"!==typeof b&&null!==b&&void 0!==b&&!a.objectMode){var l=new TypeError("Invalid non-string/buffer chunk");d.emit("error",l);u(function(){c(l)});e=!1}return e}function e(d,a,b,c,e){a.objectMode||!1===a.decodeStrings||"string"!==typeof b||(b=new A(b,c));var l=a.objectMode?1:b.length;a.length+=l;var h=a.length<a.highWaterMark;a.needDrain=!h;a.writing?a.buffer.push(new t(b,c,e)):(a.writelen=l,a.writecb=e,a.writing=
!0,a.sync=!0,d._write(b,c,a.onwrite),a.sync=!1);return h}function h(d,a,b,c,e){b?u(function(){e(c)}):e(c);d.emit("error",c)}function l(d){d.writing=!1;d.writecb=null;d.length-=d.writelen;d.writelen=0}function d(d,a){var b=d._writableState,c=b.sync,e=b.writecb;l(b);if(a)h(d,b,c,a,e);else{var k=b.ending&&0===b.length&&!b.finished&&!b.writing;k||b.bufferProcessing||!b.buffer.length||v(d,b);c?u(function(){m(d,b,k,e)}):m(d,b,k,e)}}function m(d,a,b,c){!b&&0===a.length&&a.needDrain&&(a.needDrain=!1,d.emit("drain"));
c();b&&w(d,a)}function v(d,a){a.bufferProcessing=!0;for(var b=0;b<a.buffer.length;b++){var c=a.buffer[b],e=c.chunk,l=d,h=a,k=e,m=c.encoding,c=c.callback;h.writelen=a.objectMode?1:e.length;h.writecb=c;h.writing=!0;h.sync=!0;l._write(k,m,h.onwrite);h.sync=!1;if(a.writing){b++;break}}a.bufferProcessing=!1;b<a.buffer.length?a.buffer=a.buffer.slice(b):a.buffer.length=0}function w(d,a){var b=a.ending&&0===a.length&&!a.finished&&!a.writing;b&&(a.finished=!0,d.emit("finish"));return b}C.exports=c;c.WritableState=
k;var n="undefined"!==typeof Uint8Array?function(d){return d instanceof Uint8Array}:function(d){return d&&d.constructor&&"Uint8Array"===d.constructor.name},y="undefined"!==typeof ArrayBuffer?function(d){return d instanceof ArrayBuffer}:function(d){return d&&d.constructor&&"ArrayBuffer"===d.constructor.name};C=x("inherits");var D=x("./index.js"),u=x("process/browser.js").nextTick,A=x("buffer").Buffer;C(c,D);c.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};c.prototype.write=
function(d,c,l){var h=this._writableState,k=!1;"function"===typeof c&&(l=c,c=null);!A.isBuffer(d)&&n(d)&&(d=new A(d));y(d)&&"undefined"!==typeof Uint8Array&&(d=new A(new Uint8Array(d)));A.isBuffer(d)?c="buffer":c||(c=h.defaultEncoding);"function"!==typeof l&&(l=function(){});h.ended?b(this,h,l):a(this,h,d,l)&&(k=e(this,h,d,c,l));return k};c.prototype._write=function(d,a,b){b(Error("not implemented"))};c.prototype.end=function(d,a,b){var c=this._writableState;"function"===typeof d?(b=d,a=d=null):"function"===
typeof a&&(b=a,a=null);"undefined"!==typeof d&&null!==d&&this.write(d,a);if(!c.ending&&!c.finished){d=b;c.ending=!0;w(this,c);if(d)if(c.finished)u(d);else this.once("finish",d);c.ended=!0}}},{"./index.js":18,buffer:2,inherits:11,"process/browser.js":19}],24:[function(x,C,B){function t(a){return a.toString(this.encoding)}function k(a){this.charLength=(a=this.charReceived=a.length%2)?2:0;return a}function c(a){this.charLength=(a=this.charReceived=a.length%3)?3:0;return a}var b=x("buffer").Buffer;x=
B.StringDecoder=function(a){this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,"");if(a&&!b.isEncoding(a))throw Error("Unknown encoding: "+a);switch(this.encoding){case "utf8":this.surrogateSize=3;break;case "ucs2":case "utf16le":this.surrogateSize=2;this.detectIncompleteChar=k;break;case "base64":this.surrogateSize=3;this.detectIncompleteChar=c;break;default:this.write=t;return}this.charBuffer=new b(6);this.charLength=this.charReceived=0};x.prototype.write=function(a){for(var b="",c=0;this.charLength;){var l=
a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;a.copy(this.charBuffer,this.charReceived,c,l);this.charReceived+=l-c;c=l;if(this.charReceived<this.charLength)return"";var b=this.charBuffer.slice(0,this.charLength).toString(this.encoding),d=b.charCodeAt(b.length-1);if(55296<=d&&56319>=d)this.charLength+=this.surrogateSize,b="";else{this.charReceived=this.charLength=0;if(l==a.length)return b;a=a.slice(l,a.length);break}}d=this.detectIncompleteChar(a);c=a.length;
this.charLength&&(a.copy(this.charBuffer,0,a.length-d,c),this.charReceived=d,c-=d);b+=a.toString(this.encoding,0,c);c=b.length-1;d=b.charCodeAt(c);return 55296<=d&&56319>=d?(a=this.surrogateSize,this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),this.charBuffer.write(b.charAt(b.length-1),this.encoding),b.substring(0,c)):b};x.prototype.detectIncompleteChar=function(a){for(var b=3<=a.length?3:a.length;0<b;b--){var c=a[a.length-b];if(1==b&&6==c>>5){this.charLength=2;
break}if(2>=b&&14==c>>4){this.charLength=3;break}if(3>=b&&30==c>>3){this.charLength=4;break}}return b};x.prototype.end=function(a){var b="";a&&a.length&&(b=this.write(a));this.charReceived&&(a=this.encoding,b+=this.charBuffer.slice(0,this.charReceived).toString(a));return b}},{buffer:2}],25:[function(x,C,B){function t(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function k(d,a,b){if(d&&c(d)&&d instanceof
t)return d;var e=new t;e.parse(d,a,b);return e}function c(d){return"object"===typeof d&&null!==d}var b=x("punycode");B.parse=k;B.resolve=function(d,a){return k(d,!1,!0).resolve(a)};B.resolveObject=function(d,a){return d?k(d,!1,!0).resolveObject(a):a};B.format=function(d){"string"===typeof d&&(d=k(d));return d instanceof t?d.format():t.prototype.format.call(d)};B.Url=t;var a=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/;C="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var h=["'"].concat(C),l=["%","/","?",
";","#"].concat(h),d=["/","?","#"],m=/^[a-z0-9A-Z_-]{0,63}$/,v=/^([a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},n={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},D=x("querystring");t.prototype.parse=function(c,e,k){if("string"!==typeof c)throw new TypeError("Parameter 'url' must be a string, not "+typeof c);c=c.trim();var u=a.exec(c);if(u){var u=u[0],A=u.toLowerCase();this.protocol=A;c=c.substr(u.length)}if(k||
u||c.match(/^\/\/[^@\/]+@[^@\/]+/)){var t="//"===c.substr(0,2);!t||u&&n[u]||(c=c.substr(2),this.slashes=!0)}if(!n[u]&&(t||u&&!y[u])){t=-1;for(k=0;k<d.length;k++)u=c.indexOf(d[k]),-1!==u&&(-1===t||u<t)&&(t=u);t=-1===t?c.lastIndexOf("@"):c.lastIndexOf("@",t);-1!==t&&(k=c.slice(0,t),c=c.slice(t+1),this.auth=decodeURIComponent(k));t=-1;for(k=0;k<l.length;k++)u=c.indexOf(l[k]),-1!==u&&(-1===t||u<t)&&(t=u);-1===t&&(t=c.length);this.host=c.slice(0,t);c=c.slice(t);this.parseHost();this.hostname=this.hostname||
"";t="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!t){var G=this.hostname.split(/\./);k=0;for(u=G.length;k<u;k++){var x=G[k];if(x&&!x.match(m)){for(var ha="",N=0,E=x.length;N<E;N++)ha=127<x.charCodeAt(N)?ha+"x":ha+x[N];if(!ha.match(m)){u=G.slice(0,k);k=G.slice(k+1);if(x=x.match(v))u.push(x[1]),k.unshift(x[2]);k.length&&(c="/"+k.join(".")+c);this.hostname=u.join(".");break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();if(!t){x=this.hostname.split(".");
G=[];for(k=0;k<x.length;++k)u=x[k],G.push(u.match(/[^A-Za-z0-9_-]/)?"xn--"+b.encode(u):u);this.hostname=G.join(".")}k=this.port?":"+this.port:"";this.host=(this.hostname||"")+k;this.href+=this.host;t&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==c[0]&&(c="/"+c))}if(!w[A])for(k=0,u=h.length;k<u;k++)t=h[k],x=encodeURIComponent(t),x===t&&(x=escape(t)),c=c.split(t).join(x);k=c.indexOf("#");-1!==k&&(this.hash=c.substr(k),c=c.slice(0,k));k=c.indexOf("?");-1!==k?(this.search=c.substr(k),
this.query=c.substr(k+1),e&&(this.query=D.parse(this.query)),c=c.slice(0,k)):e&&(this.search="",this.query={});c&&(this.pathname=c);y[A]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)k=this.pathname||"",u=this.search||"",this.path=k+u;this.href=this.format();return this};t.prototype.format=function(){var d=this.auth||"";d&&(d=encodeURIComponent(d),d=d.replace(/%3A/i,":"),d+="@");var a=this.protocol||"",b=this.pathname||"",e=this.hash||"",l=!1,k="";this.host?l=d+
this.host:this.hostname&&(l=d+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(l+=":"+this.port));this.query&&c(this.query)&&Object.keys(this.query).length&&(k=D.stringify(this.query));d=this.search||k&&"?"+k||"";a&&":"!==a.substr(-1)&&(a+=":");this.slashes||(!a||y[a])&&!1!==l?(l="//"+(l||""),b&&"/"!==b.charAt(0)&&(b="/"+b)):l||(l="");e&&"#"!==e.charAt(0)&&(e="#"+e);d&&"?"!==d.charAt(0)&&(d="?"+d);b=b.replace(/[?#]/g,function(d){return encodeURIComponent(d)});d=d.replace("#",
"%23");return a+l+b+d+e};t.prototype.resolve=function(d){return this.resolveObject(k(d,!1,!0)).format()};t.prototype.resolveObject=function(d){if("string"===typeof d){var a=new t;a.parse(d,!1,!0);d=a}var b=new t;Object.keys(this).forEach(function(d){b[d]=this[d]},this);b.hash=d.hash;if(""===d.href)return b.href=b.format(),b;if(d.slashes&&!d.protocol)return Object.keys(d).forEach(function(a){"protocol"!==a&&(b[a]=d[a])}),y[b.protocol]&&b.hostname&&!b.pathname&&(b.path=b.pathname="/"),b.href=b.format(),
b;if(d.protocol&&d.protocol!==b.protocol){if(!y[d.protocol])return Object.keys(d).forEach(function(a){b[a]=d[a]}),b.href=b.format(),b;b.protocol=d.protocol;if(d.host||n[d.protocol])b.pathname=d.pathname;else{for(var c=(d.pathname||"").split("/");c.length&&!(d.host=c.shift()););d.host||(d.host="");d.hostname||(d.hostname="");""!==c[0]&&c.unshift("");2>c.length&&c.unshift("");b.pathname=c.join("/")}b.search=d.search;b.query=d.query;b.host=d.host||"";b.auth=d.auth;b.hostname=d.hostname||d.host;b.port=
d.port;if(b.pathname||b.search)b.path=(b.pathname||"")+(b.search||"");b.slashes=b.slashes||d.slashes;b.href=b.format();return b}var a=b.pathname&&"/"===b.pathname.charAt(0),e=d.host||d.pathname&&"/"===d.pathname.charAt(0),l=a=e||a||b.host&&d.pathname,k=b.pathname&&b.pathname.split("/")||[],c=d.pathname&&d.pathname.split("/")||[],h=b.protocol&&!y[b.protocol];h&&(b.hostname="",b.port=null,b.host&&(""===k[0]?k[0]=b.host:k.unshift(b.host)),b.host="",d.protocol&&(d.hostname=null,d.port=null,d.host&&(""===
c[0]?c[0]=d.host:c.unshift(d.host)),d.host=null),a=a&&(""===c[0]||""===k[0]));if(e)b.host=d.host||""===d.host?d.host:b.host,b.hostname=d.hostname||""===d.hostname?d.hostname:b.hostname,b.search=d.search,b.query=d.query,k=c;else if(c.length)k||(k=[]),k.pop(),k=k.concat(c),b.search=d.search,b.query=d.query;else if(null!=d.search){h&&(b.hostname=b.host=k.shift(),h=b.host&&0<b.host.indexOf("@")?b.host.split("@"):!1)&&(b.auth=h.shift(),b.host=b.hostname=h.shift());b.search=d.search;b.query=d.query;if(null!==
b.pathname||null!==b.search)b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"");b.href=b.format();return b}if(!k.length)return b.pathname=null,b.path=b.search?"/"+b.search:null,b.href=b.format(),b;for(var e=k.slice(-1)[0],c=(b.host||d.host)&&("."===e||".."===e)||""===e,m=0,v=k.length;0<=v;v--)e=k[v],"."==e?k.splice(v,1):".."===e?(k.splice(v,1),m++):m&&(k.splice(v,1),m--);if(!a&&!l)for(;m--;m)k.unshift("..");!a||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift("");c&&"/"!==k.join("/").substr(-1)&&
k.push("");l=""===k[0]||k[0]&&"/"===k[0].charAt(0);h&&(b.hostname=b.host=l?"":k.length?k.shift():"",h=b.host&&0<b.host.indexOf("@")?b.host.split("@"):!1)&&(b.auth=h.shift(),b.host=b.hostname=h.shift());(a=a||b.host&&k.length)&&!l&&k.unshift("");k.length?b.pathname=k.join("/"):(b.pathname=null,b.path=null);if(null!==b.pathname||null!==b.search)b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"");b.auth=d.auth||b.auth;b.slashes=b.slashes||d.slashes;b.href=b.format();return b};t.prototype.parseHost=
function(){var d=this.host,a=e.exec(d);a&&(a=a[0],":"!==a&&(this.port=a.substr(1)),d=d.substr(0,d.length-a.length));d&&(this.hostname=d)}},{punycode:13,querystring:16}],26:[function(x,C,B){C.exports=x(11)},{}],27:[function(x,C,B){C.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},{}],28:[function(x,C,B){(function(t,k){function c(d,c){var e={seen:[],stylize:a};3<=arguments.length&&(e.depth=arguments[2]);4<=
arguments.length&&(e.colors=arguments[3]);y(c)?e.showHidden=c:c&&B._extend(e,c);A(e.showHidden)&&(e.showHidden=!1);A(e.depth)&&(e.depth=2);A(e.colors)&&(e.colors=!1);A(e.customInspect)&&(e.customInspect=!0);e.colors&&(e.stylize=b);return h(e,d,e.depth)}function b(d,a){var b=c.styles[a];return b?"\u001b["+c.colors[b][0]+"m"+d+"\u001b["+c.colors[b][1]+"m":d}function a(d,a){return d}function e(d){var a={};d.forEach(function(d,b){a[d]=!0});return a}function h(a,b,c){if(a.customInspect&&b&&ia(b.inspect)&&
b.inspect!==B.inspect&&(!b.constructor||b.constructor.prototype!==b)){var k=b.inspect(c,a);u(k)||(k=h(a,k,c));return k}if(k=l(a,b))return k;var y=Object.keys(b),D=e(y);a.showHidden&&(y=Object.getOwnPropertyNames(b));if(L(b)&&(0<=y.indexOf("message")||0<=y.indexOf("description")))return d(b);if(0===y.length){if(ia(b))return a.stylize("[Function"+(b.name?": "+b.name:"")+"]","special");if(G(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(O(b))return a.stylize(Date.prototype.toString.call(b),
"date");if(L(b))return d(b)}var k="",t=!1,A=["{","}"];n(b)&&(t=!0,A=["[","]"]);ia(b)&&(k=" [Function"+(b.name?": "+b.name:"")+"]");G(b)&&(k=" "+RegExp.prototype.toString.call(b));O(b)&&(k=" "+Date.prototype.toUTCString.call(b));L(b)&&(k=" "+d(b));if(0===y.length&&(!t||0==b.length))return A[0]+k+A[1];if(0>c)return G(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);y=t?m(a,b,c,D,y):y.map(function(d){return v(a,b,c,D,d,t)});a.seen.pop();return w(y,
k,A)}function l(d,a){if(A(a))return d.stylize("undefined","undefined");if(u(a)){var b="'"+JSON.stringify(a).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return d.stylize(b,"string")}if(D(a))return d.stylize(""+a,"number");if(y(a))return d.stylize(""+a,"boolean");if(null===a)return d.stylize("null","null")}function d(d){return"["+Error.prototype.toString.call(d)+"]"}function m(d,a,b,c,e){for(var l=[],k=0,h=a.length;k<h;++k)Object.prototype.hasOwnProperty.call(a,String(k))?l.push(v(d,
a,b,c,String(k),!0)):l.push("");e.forEach(function(e){e.match(/^\d+$/)||l.push(v(d,a,b,c,e,!0))});return l}function v(d,a,b,c,e,l){var k,m;a=Object.getOwnPropertyDescriptor(a,e)||{value:a[e]};a.get?m=a.set?d.stylize("[Getter/Setter]","special"):d.stylize("[Getter]","special"):a.set&&(m=d.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(c,e)||(k="["+e+"]");m||(0>d.seen.indexOf(a.value)?(m=null===b?h(d,a.value,null):h(d,a.value,b-1),-1<m.indexOf("\n")&&(m=l?m.split("\n").map(function(d){return"  "+
d}).join("\n").substr(2):"\n"+m.split("\n").map(function(d){return"   "+d}).join("\n"))):m=d.stylize("[Circular]","special"));if(A(k)){if(l&&e.match(/^\d+$/))return m;k=JSON.stringify(""+e);k.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(k=k.substr(1,k.length-2),k=d.stylize(k,"name")):(k=k.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),k=d.stylize(k,"string"))}return k+": "+m}function w(d,a,b){var c=0;return 60<d.reduce(function(d,a){c++;0<=a.indexOf("\n")&&c++;return d+a.replace(/\u001b\[\d\d?m/g,
"").length+1},0)?b[0]+(""===a?"":a+"\n ")+" "+d.join(",\n  ")+" "+b[1]:b[0]+a+" "+d.join(", ")+" "+b[1]}function n(d){return Array.isArray(d)}function y(d){return"boolean"===typeof d}function D(d){return"number"===typeof d}function u(d){return"string"===typeof d}function A(d){return void 0===d}function G(d){return I(d)&&"[object RegExp]"===Object.prototype.toString.call(d)}function I(d){return"object"===typeof d&&null!==d}function O(d){return I(d)&&"[object Date]"===Object.prototype.toString.call(d)}
function L(d){return I(d)&&("[object Error]"===Object.prototype.toString.call(d)||d instanceof Error)}function ia(d){return"function"===typeof d}function R(d){return 10>d?"0"+d.toString(10):d.toString(10)}function ha(){var d=new Date,a=[R(d.getHours()),R(d.getMinutes()),R(d.getSeconds())].join(":");return[d.getDate(),Ba[d.getMonth()],a].join(" ")}var N=/%[sdj%]/g;B.format=function(d){if(!u(d)){for(var a=[],b=0;b<arguments.length;b++)a.push(c(arguments[b]));return a.join(" ")}for(var b=1,e=arguments,
l=e.length,a=String(d).replace(N,function(d){if("%%"===d)return"%";if(b>=l)return d;switch(d){case "%s":return String(e[b++]);case "%d":return Number(e[b++]);case "%j":try{return JSON.stringify(e[b++])}catch(ja){return"[Circular]"}default:return d}}),k=e[b];b<l;k=e[++b])a=null!==k&&I(k)?a+(" "+c(k)):a+(" "+k);return a};B.deprecate=function(d,a){if(A(k.process))return function(){return B.deprecate(d,a).apply(this,arguments)};if(!0===t.noDeprecation)return d;var b=!1;return function(){if(!b){if(t.throwDeprecation)throw Error(a);
t.traceDeprecation?console.trace(a):console.error(a);b=!0}return d.apply(this,arguments)}};var E={},C;B.debuglog=function(d){A(C)&&(C=t.env.NODE_DEBUG||"");d=d.toUpperCase();if(!E[d])if((new RegExp("\\b"+d+"\\b","i")).test(C)){var a=t.pid;E[d]=function(){var b=B.format.apply(B,arguments);console.error("%s %d: %s",d,a,b)}}else E[d]=function(){};return E[d]};B.inspect=c;c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,
39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};c.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};B.isArray=n;B.isBoolean=y;B.isNull=function(d){return null===d};B.isNullOrUndefined=function(d){return null==d};B.isNumber=D;B.isString=u;B.isSymbol=function(d){return"symbol"===typeof d};B.isUndefined=A;B.isRegExp=G;B.isObject=I;B.isDate=O;B.isError=L;B.isFunction=ia;B.isPrimitive=function(d){return null===
d||"boolean"===typeof d||"number"===typeof d||"string"===typeof d||"symbol"===typeof d||"undefined"===typeof d};B.isBuffer=x("./support/isBuffer");var Ba="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");B.log=function(){console.log("%s - %s",ha(),B.format.apply(B,arguments))};B.inherits=x("inherits");B._extend=function(d,a){if(!a||!I(a))return d;for(var b=Object.keys(a),c=b.length;c--;)d[b[c]]=a[b[c]];return d}}).call(this,x("VCmEsw"),"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{"./support/isBuffer":27,VCmEsw:12,inherits:26}],29:[function(x,C,B){},{}],30:[function(x,C,B){(function(t,k,c){(function(){var b="undefined"!==typeof t&&t.versions&&t.versions.node,a=!b&&("undefined"!==typeof window||"undefined"!==typeof self);a&&"undefined"===typeof k&&("undefined"!==typeof window?k=window:"undefined"!==typeof self?k=self:"undefined"!==typeof $&&(k=$));var e=function(e){function d(){}function h(d,a){if(J(a))for(var b=0;b<a.length;++b)a[b]=h(d,a[b]);else if(fa(a))a["@list"]=
h(d,a["@list"]);else if(H(a)){Da(a)&&(a["@id"]=d.getId(a["@id"]));for(var b=Object.keys(a).sort(),c=0;c<b.length;++c){var e=b[c];"@id"!==e&&(a[e]=h(d,a[e]))}}return a}function l(d,a,b){if(null===b||void 0===b)return null;var c=E(d,a,{vocab:!0});if("@id"===c)return E(d,b,{base:!0});if("@type"===c)return E(d,b,{vocab:!0,base:!0});var k=e.getContextValue(d,a,"@type");if("@id"===k||"@graph"===c&&S(b))return{"@id":E(d,b,{base:!0})};if("@vocab"===k)return{"@id":E(d,b,{vocab:!0,base:!0})};if(C(c))return b;
c={};null!==k?c["@type"]=k:S(b)&&(d=e.getContextValue(d,a,"@language"),null!==d&&(c["@language"]=d));-1===["boolean","number","string"].indexOf(typeof b)&&(b=b.toString());c["@value"]=b;return c}function w(d){var a={};if(ja(d)){a.type="literal";var b=d["@value"],c=d["@type"]||null;"boolean"===typeof b||"[object Boolean]"===Object.prototype.toString.call(b)?(a.value=b.toString(),a.datatype=c||"http://www.w3.org/2001/XMLSchema#boolean"):Aa(b)||"http://www.w3.org/2001/XMLSchema#double"===c?(Aa(b)||(b=
parseFloat(b)),a.value=b.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),a.datatype=c||"http://www.w3.org/2001/XMLSchema#double"):wa(b)?(a.value=b.toFixed(0),a.datatype=c||"http://www.w3.org/2001/XMLSchema#integer"):"@language"in d?(a.value=b,a.datatype=c||Ea,a.language=d["@language"]):(a.value=b,a.datatype=c||xa)}else d=H(d)?d["@id"]:d,a.type=0===d.indexOf("_:")?"blank node":"IRI",a.value=d;return"IRI"!==a.type||ka(a.value)?a:null}function n(d,a,b,c,k,h){if(J(d))for(var l=0;l<d.length;++l)n(d[l],a,
b,c,void 0,h);else if(H(d))if(ja(d)){if("@type"in d){var m=d["@type"];0===m.indexOf("_:")&&(d["@type"]=c.getId(m))}h&&h.push(d)}else{if("@type"in d)for(var K=d["@type"],l=0;l<K.length;++l)m=K[l],0===m.indexOf("_:")&&c.getId(m);Y(k)&&(k=Da(d)?c.getId(d["@id"]):d["@id"]);h&&h.push({"@id":k});h=a[b];l=h[k]=h[k]||{};l["@id"]=k;m=Object.keys(d).sort();for(K=0;K<m.length;++K){var v=m[K];if("@id"!==v)if("@reverse"===v){var v={"@id":k},Q=d["@reverse"],Z;for(Z in Q)for(var M=Q[Z],w=0;w<M.length;++w){var P=
M[w],y=P["@id"];Da(P)&&(y=c.getId(y));n(P,a,b,c,y);e.addValue(h[y],Z,v,{propertyIsArray:!0,allowDuplicate:!1})}}else if("@graph"===v)k in a||(a[k]={}),n(d[v],a,"@merged"===b?b:k,c);else if("@type"!==v&&C(v)){if("@index"===v&&v in l&&(d[v]!==l[v]||d[v]["@id"]!==l[v]["@id"]))throw new F("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:l});l[v]=d[v]}else if(Q=d[v],0===v.indexOf("_:")&&(v=c.getId(v)),0===Q.length)e.addValue(l,v,[],
{propertyIsArray:!0});else for(M=0;M<Q.length;++M)w=Q[M],"@type"===v&&(w=0===w.indexOf("_:")?c.getId(w):w),P=w,y=!1,!H(P)||"@value"in P||"@set"in P||"@list"in P||(y=1<Object.keys(P).length||!("@id"in P)),y||da(w)?(P=Da(w)?c.getId(w["@id"]):w["@id"],e.addValue(l,v,{"@id":P},{propertyIsArray:!0,allowDuplicate:!1}),n(w,a,b,c,P)):(fa(w)?(P=[],n(w["@list"],a,b,c,k,P),w={"@list":P}):n(w,a,b,c,k),e.addValue(l,v,w,{propertyIsArray:!0,allowDuplicate:!1}))}}else h&&h.push(d)}function y(d){for(var a=d["@default"],
b=Object.keys(d).sort(),c=0;c<b.length;++c){var e=b[c];if("@default"!==e){var k=d[e],h=a[e];h?"@graph"in h||(h["@graph"]=[]):a[e]=h={"@id":e,"@graph":[]};for(var e=h["@graph"],h=Object.keys(k).sort(),l=0;l<h.length;++l){var m=k[h[l]];da(m)||e.push(m)}}}return a}function D(d,a,b,c,e){var k=b;if(!J(k)||1!==k.length||!H(k[0]))throw new F("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:k});b=b[0];for(var k=d.options,h={embed:A(b,k,"embed"),explicit:A(b,k,
"explicit"),requireAll:A(b,k,"requireAll")},l=b,m={},n=0;n<a.length;++n){var v=a[n],K=d.subjects[v];G(K,l,h)&&(m[v]=K)}a=Object.keys(m).sort();for(l=0;l<a.length;++l)if(K=a[l],v=m[K],"@link"===h.embed&&K in d.link)O(c,e,d.link[K]);else{null===e&&(d.uniqueEmbeds={});n={};n["@id"]=K;d.link[K]=n;var Z;if(!(Z="@never"===h.embed))a:{Z=d.subjectStack;for(var M=Z.length-1;0<=M;--M)if(Z[M]["@id"]===v["@id"]){Z=!0;break a}Z=!1}if(Z)O(c,e,n);else{"@last"===h.embed&&(K in d.uniqueEmbeds&&I(d,K),d.uniqueEmbeds[K]=
{parent:c,property:e});d.subjectStack.push(v);K=Object.keys(v).sort();for(Z=0;Z<K.length;Z++)if(M=K[Z],C(M))n[M]=X(v[M]);else if(!h.explicit||M in b)for(var w=v[M],y=0;y<w.length;++y){var P=w[y];if(fa(P)){var t={"@list":[]};O(n,M,t);var Na=P["@list"],x;for(x in Na)if(P=Na[x],da(P)){var L=M in b?b[M][0]["@list"]:u(h);D(d,[P["@id"]],L,t,"@list")}else O(t,"@list",X(P))}else da(P)?(L=M in b?b[M]:u(h),D(d,[P["@id"]],L,n,M)):O(n,M,X(P))}K=Object.keys(b).sort();for(Z=0;Z<K.length;++Z)M=K[Z],C(M)||(v=b[M][0],
A(v,k,"omitDefault")||M in n||(w="@null","@default"in v&&(w=X(v["@default"])),J(w)||(w=[w]),n[M]=[{"@preserve":w}]));O(c,e,n);d.subjectStack.pop()}}}function u(d){var a={},b;for(b in d)void 0!==d[b]&&(a["@"+b]=[d[b]]);return[a]}function A(d,a,b){var c="@"+b;d=c in d?d[c][0]:a[b];"embed"===b&&(!0===d?d="@last":!1===d?d="@never":"@always"!==d&&"@never"!==d&&"@link"!==d&&(d="@last"));return d}function G(d,a,b){if("@type"in a&&(1!==a["@type"].length||!H(a["@type"][0]))){a=a["@type"];for(b=0;b<a.length;++b)if(e.hasValue(d,
"@type",a[b]))return!0;return!1}var c=!0,k=!1,h;for(h in a){if(C(h)){if("@id"!==h&&"@type"!==h)continue;c=!1;if("@id"===h&&S(a[h])){if(d[h]!==a[h])return!1;k=!0;continue}}c=!1;if(h in d){if(J(a[h])&&0===a[h].length&&void 0!==d[h])return!1;k=!0}else{var l=J(a[h])&&H(a[h][0])&&"@default"in a[h][0];if(b.requireAll&&!l)return!1}}return c||k}function I(d,a){var b=d.uniqueEmbeds,c=b[a],k=c.parent,h=c.property,c={"@id":a};if(J(k))for(h=0;h<k.length;++h){if(e.compareValues(k[h],c)){k[h]=c;break}}else{var l=
J(k[h]);e.removeValue(k,h,c,{propertyIsArray:l});e.addValue(k,h,c,{propertyIsArray:l})}var m=function(d){for(var a=Object.keys(b),c=0;c<a.length;++c){var e=a[c];e in b&&H(b[e].parent)&&b[e].parent["@id"]===d&&(delete b[e],m(e))}};m(a)}function O(d,a,b){H(d)?e.addValue(d,a,b,{propertyIsArray:!0}):d.push(b)}function L(d,a,b){if(J(a)){for(var c=[],k=0;k<a.length;++k){var h=L(d,a[k],b);null!==h&&c.push(h)}a=c}else if(H(a)){if("@preserve"in a)return"@null"===a["@preserve"]?null:a["@preserve"];if(ja(a))return a;
if(fa(a))return a["@list"]=L(d,a["@list"],b),a;h=R(d,"@id");if(h in a)if(h=a[h],h in b.link)if(k=b.link[h].indexOf(a),-1===k)b.link[h].push(a);else return b.link[h][k];else b.link[h]=[a];for(c in a)h=L(d,a[c],b),k=e.getContextValue(d,c,"@container"),b.compactArrays&&J(h)&&1===h.length&&null===k&&(h=h[0]),a[c]=h}return a}function ia(d,a){return d.length<a.length?-1:a.length<d.length?1:d===a?0:d<a?-1:1}function R(d,a,b,c,k){if(null===a)return a;Y(b)&&(b=null);Y(k)&&(k=!1);c=c||{};var h=d.getInverse();
if(C(a))return a in h?h[a]["@none"]["@type"]["@none"]:a;if(c.vocab&&a in h){var l=d["@language"]||"@none",h=[];H(b)&&"@index"in b&&h.push("@index");var m="@language",n="@null";if(k)m="@type",n="@reverse",h.push("@set");else if(fa(b)){"@index"in b||h.push("@list");var v=b["@list"],n=0===v.length?l:null,l=null;for(k=0;k<v.length;++k){var K=v[k],w="@none",M="@none";ja(K)?"@language"in K?w=K["@language"]:"@type"in K?M=K["@type"]:w="@null":M="@id";null===n?n=w:w!==n&&ja(K)&&(n="@none");null===l?l=M:M!==
l&&(l="@none");if("@none"===n&&"@none"===l)break}n=n||"@none";l=l||"@none";"@none"!==l&&(m="@type",n=l)}else ja(b)?"@language"in b&&!("@index"in b)?(h.push("@language"),n=b["@language"]):"@type"in b&&(m="@type",n=b["@type"]):(m="@type",n="@id"),h.push("@set");h.push("@none");a:{v=b;k=m;null===n&&(n="@null");m=[];"@id"!==n&&"@reverse"!==n||!da(v)?m.push(n):("@reverse"===n&&m.push("@reverse"),n=R(d,v["@id"],null,{vocab:!0}),n in d.mappings&&d.mappings[n]&&d.mappings[n]["@id"]===v["@id"]?m.push.apply(m,
["@vocab","@id"]):m.push.apply(m,["@id","@vocab"]));m.push("@none");v=d.inverse[a];for(n=0;n<h.length;++n)if(l=h[n],l in v)for(l=v[l][k],K=0;K<m.length;++K)if(w=m[K],w in l){h=l[w];break a}h=null}if(null!==h)return h}if(c.vocab&&"@vocab"in d&&(h=d["@vocab"],0===a.indexOf(h)&&a!==h&&(h=a.substr(h.length),!(h in d.mappings))))return h;h=null;k=0;m=[];v=d.fastCurieMap;for(n=a.length-1;k<n&&a[k]in v;++k)v=v[a[k]],""in v&&m.push(v[""][0]);for(k=m.length-1;0<=k;--k)for(v=m[k],n=v.terms,l=0;l<n.length;++l)K=
n[l]+":"+a.substr(v.iri.length),K in d.mappings&&(null!==b||d.mappings[K]["@id"]!==a)||!(null===h||0>ia(K,h))||(h=K);if(null!==h)return h;if(!c.vocab&&(d=d["@base"],null!==d&&(S(d)&&(d=e.url.parse(d||"")),b="",""!==d.href?b+=(d.protocol||"")+"//"+(d.authority||""):a.indexOf("//")&&(b+="//"),0===a.indexOf(b)))){a=e.url.parse(a.substr(b.length));d=d.normalizedPath.split("/");b=a.normalizedPath.split("/");for(c=a.fragment||a.query?0:1;0<d.length&&b.length>c&&d[0]===b[0];)d.shift(),b.shift();c="";if(0<
d.length)for(d.pop(),h=0;h<d.length;++h)c+="../";c+=b.join("/");null!==a.query&&(c+="?"+a.query);null!==a.fragment&&(c+="#"+a.fragment);""===c&&(c="./");a=c}return a}function ha(d,a,b){if(ja(b)){var c=e.getContextValue(d,a,"@type"),k=e.getContextValue(d,a,"@language"),h=e.getContextValue(d,a,"@container"),h="@index"in b&&"@index"!==h;if(!h&&(b["@type"]===c||b["@language"]===k))return b["@value"];var c=Object.keys(b).length,c=1===c||2===c&&"@index"in b&&!h,k="@language"in d,l=S(b["@value"]);a=d.mappings[a]&&
null===d.mappings[a]["@language"];if(c&&(!k||!l||a))return b["@value"];a={};h&&(a[R(d,"@index")]=b["@index"]);"@type"in b?a[R(d,"@type")]=R(d,b["@type"],null,{vocab:!0}):"@language"in b&&(a[R(d,"@language")]=b["@language"]);a[R(d,"@value")]=b["@value"];return a}h=E(d,a,{vocab:!0});c=e.getContextValue(d,a,"@type");b=R(d,b["@id"],null,{vocab:"@vocab"===c});if("@id"===c||"@vocab"===c||"@graph"===h)return b;a={};a[R(d,"@id")]=b;return a}function N(d,a,b,c){if(b in c){if(c[b])return;throw new F("Cyclical context definition detected.",
"jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:a,term:b});}c[b]=!1;if(C(b))throw new F("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:a,term:b});if(""===b)throw new F("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:a});d.mappings[b]&&delete d.mappings[b];var e=a[b];if(null===e||H(e)&&null===e["@id"])d.mappings[b]=null,c[b]=!0;else{S(e)&&(e={"@id":e});
if(!H(e))throw new F("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:a});var k=d.mappings[b]={};k.reverse=!1;if("@reverse"in e){if("@id"in e)throw new F("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:a});var h=e["@reverse"];if(!S(h))throw new F("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",
{code:"invalid IRI mapping",context:a});h=E(d,h,{vocab:!0,base:!1},a,c);if(!ka(h))throw new F("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:a});k["@id"]=h;k.reverse=!0}else if("@id"in e){h=e["@id"];if(!S(h))throw new F("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:a});if(h!==b){h=E(d,h,
{vocab:!0,base:!1},a,c);if(!ka(h)&&!C(h))throw new F("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:a});k["@id"]=h}}var l=b.indexOf(":");k._termHasColon=-1!==l;if(!("@id"in k))if(k._termHasColon)h=b.substr(0,l),h in a&&N(d,a,h,c),d.mappings[h]?(l=b.substr(l+1),k["@id"]=d.mappings[h]["@id"]+l):k["@id"]=b;else{if(!("@vocab"in d))throw new F("Invalid JSON-LD syntax; @context terms must define an @id.",
"jsonld.SyntaxError",{code:"invalid IRI mapping",context:a,term:b});k["@id"]=d["@vocab"]+b}c[b]=!0;if("@type"in e){b=e["@type"];if(!S(b))throw new F("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:a});if("@id"!==b&&"@vocab"!==b){b=E(d,b,{vocab:!0,base:!1},a,c);if(!ka(b))throw new F("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:a});if(0===
b.indexOf("_:"))throw new F("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:a});}k["@type"]=b}if("@container"in e){d=e["@container"];if("@list"!==d&&"@set"!==d&&"@index"!==d&&"@language"!==d)throw new F("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:a});if(k.reverse&&
"@index"!==d&&"@set"!==d&&null!==d)throw new F("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:a});k["@container"]=d}if("@language"in e&&!("@type"in e)){e=e["@language"];if(null!==e&&!S(e))throw new F("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:a});null!==e&&(e=e.toLowerCase());k["@language"]=
e}h=k["@id"];if("@context"===h||"@preserve"===h)throw new F("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:a});}}function E(d,a,b,c,k){if(null===a||C(a))return a;a=String(a);c&&a in c&&!0!==k[a]&&N(d,c,a,k);b=b||{};if(b.vocab){var h=d.mappings[a];if(null===h)return null;if(h)return h["@id"]}h=a.indexOf(":");if(-1!==h){b=a.substr(0,h);var l=a.substr(h+1);if("_"===b||0===l.indexOf("//"))return a;c&&b in c&&N(d,c,b,k);return(h=
d.mappings[b])?h["@id"]+l:a}if(b.vocab&&"@vocab"in d)return d["@vocab"]+a;b.base&&(a=e.prependBase(d["@base"],a));return a}function B(d){function a(d,b,c){var e=d[b];d=d[b]={};for(var k,h=0;h<e.length;++h)k=e[h].iri,k=c>=k.length?"":k[c],k in d?d[k].push(e[h]):d[k]=[e[h]];for(b in d)""!==b&&a(d,b,c+1)}return{"@base":e.url.parse(d.base||""),mappings:{},inverse:null,getInverse:function(){if(this.inverse)return this.inverse;for(var d=this.inverse={},b=this.fastCurieMap={},c={},e=this["@language"]||"@none",
k=this.mappings,h=Object.keys(k).sort(ia),l=0;l<h.length;++l){var m=h[l],n=k[m];if(null!==n){var v=n["@container"]||"@none",w=n["@id"];J(w)||(w=[w]);for(var y=0;y<w.length;++y){var M=w[y],u=d[M],t=C(M);u?t||n._termHasColon||c[M].push(m):(d[M]=u={},t||n._termHasColon||(c[M]=[m],t={iri:M,terms:c[M]},M[0]in b?b[M[0]].push(t):b[M[0]]=[t]));u[v]||(u[v]={"@language":{},"@type":{}});u=u[v];n.reverse?(u=u["@type"],"@reverse"in u||(u["@reverse"]=m)):"@type"in n?(u=u["@type"],M=n["@type"],M in u||(u[M]=m)):
"@language"in n?(u=u["@language"],M=n["@language"]||"@null",M in u||(u[M]=m)):(M=u["@language"],e in M||(M[e]=m),M=u["@type"],"@none"in M||(M["@none"]=m),u=u["@language"],"@none"in u||(u["@none"]=m))}}}for(var Z in b)a(b,Z,1);return d},clone:function(){var d={};d["@base"]=this["@base"];d.mappings=X(this.mappings);d.clone=this.clone;d.inverse=null;d.getInverse=this.getInverse;"@language"in this&&(d["@language"]=this["@language"]);"@vocab"in this&&(d["@vocab"]=this["@vocab"]);return d}}}function C(d){if(!S(d))return!1;
switch(d){case "@base":case "@context":case "@container":case "@default":case "@embed":case "@explicit":case "@graph":case "@id":case "@index":case "@language":case "@list":case "@omitDefault":case "@preserve":case "@requireAll":case "@reverse":case "@set":case "@type":case "@value":case "@vocab":return!0}return!1}function H(d){return"[object Object]"===Object.prototype.toString.call(d)}function J(d){return Array.isArray(d)}function S(d){return"string"===typeof d||"[object String]"===Object.prototype.toString.call(d)}
function wa(d){return"number"===typeof d||"[object Number]"===Object.prototype.toString.call(d)}function Aa(d){return wa(d)&&-1!==String(d).indexOf(".")}function Y(d){return"undefined"===typeof d}function da(d){return H(d)&&1===Object.keys(d).length&&"@id"in d}function ja(d){return H(d)&&"@value"in d}function fa(d){return H(d)&&"@list"in d}function Da(d){var a=!1;H(d)&&(a="@id"in d?0===d["@id"].indexOf("_:"):0===Object.keys(d).length||!("@value"in d||"@set"in d||"@list"in d));return a}function ka(d){return S(d)&&
-1!==d.indexOf(":")}function X(d){if(d&&"object"===typeof d){var a;if(J(d)){a=[];for(var b=0;b<d.length;++b)a[b]=X(d[b])}else if(H(d))for(b in a={},d)a[b]=X(d[b]);else a=d.toString();return a}return d}function Qa(d,a,b,c){var k=Object.keys(a).length;if(J(d)){for(var h=0;h<d.length;++h)Qa(d[h],a,b,c);return k<Object.keys(a).length}if(H(d)){for(var l in d)if("@context"!==l)Qa(d[l],a,b,c);else{var m=d[l];if(J(m))for(var n=m.length,h=0;h<n;++h){var v=m[h];S(v)&&(v=e.prependBase(c,v),b?(v=a[v],J(v)?(Array.prototype.splice.apply(m,
[h,1].concat(v)),h+=v.length-1,n=m.length):m[h]=v):v in a||(a[v]=!1))}else S(m)&&(m=e.prependBase(c,m),b?d[l]=a[m]:m in a||(a[m]=!1))}return k<Object.keys(a).length}return!1}function Ga(d,a,b){var c=null,e=function(d,a,b,k,h){if(Object.keys(a).length>pb)return c=new F("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:pb}),h(c);var l={};Qa(d,l,!1,k)||(Qa(d,l,!0,k),h(null,d));var m=[],n;for(n in l)!1===l[n]&&m.push(n);var v=m.length;for(n=
0;n<m.length;++n)(function(m){if(m in a)return c=new F("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:m}),h(c);var n=X(a);n[m]=!0;var w=function(a,w){if(!c){var K=w?w.document:null;if(!a&&S(K))try{K=JSON.parse(K)}catch(Hb){a=Hb}a?a=new F("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.",
"jsonld.InvalidUrl",{code:"loading remote context failed",url:m,cause:a}):H(K)||(a=new F("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:m,cause:a}));if(a)return c=a,h(c);K="@context"in K?{"@context":K["@context"]}:{"@context":{}};w.contextUrl&&(J(K["@context"])||(K["@context"]=[K["@context"]]),K["@context"].push(w.contextUrl));e(K,n,b,m,function(a,b){if(a)return h(a);l[m]=b["@context"];
--v;0===v&&(Qa(d,l,!0,k),h(null,d))})}},K=b(m,w);K&&"then"in K&&K.then(w.bind(null,null),w)})(m[n])};e(d,{},a.documentLoader,a.base,b)}function Xa(d){var a=/^[ \t]*(?:#.*)?$/,b=/^[ \t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]+(?:<([^:]+:[^>]*)>)[ \t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\]*(?:\\.[^"\\]*)*)"(?:(?:\^\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \t]*(?:\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]*\.))[ \t]*(?:#.*)?$/,c={};d=d.split(/(?:\r\n)|(?:\n)|(?:\r)/g);
for(var e=0,k=0;k<d.length;++k){var h=d[k];e++;if(!a.test(h)){var l=h.match(b);if(null===l)throw new F("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:e});h={};Y(l[1])?h.subject={type:"blank node",value:l[2]}:h.subject={type:"IRI",value:l[1]};h.predicate={type:"IRI",value:l[3]};if(Y(l[4]))if(Y(l[5])){h.object={type:"literal"};Y(l[7])?Y(l[8])?h.object.datatype=xa:(h.object.datatype=Ea,h.object.language=l[8]):h.object.datatype=l[7];var m=l[6].replace(/\\"/g,'"').replace(/\\t/g,
"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");h.object.value=m}else h.object={type:"blank node",value:l[5]};else h.object={type:"IRI",value:l[4]};m="@default";Y(l[9])?Y(l[10])||(m=l[10]):m=l[9];if(m in c){for(var l=!0,m=c[m],n=0;l&&n<m.length;++n){var v;a:{v=m[n];for(var w=["subject","predicate","object"],y=0;y<w.length;++y){var u=w[y];if(v[u].type!==h[u].type||v[u].value!==h[u].value){v=!1;break a}}v=v.object.language!==h.object.language||v.object.datatype!==h.object.datatype?
!1:!0}v&&(l=!1)}l&&m.push(h)}else c[m]=[h]}}return c}function Ya(d,a){var b=d.subject,c=d.predicate,e=d.object,k=a||null;"name"in d&&d.name&&(k=d.name.value);var h="",h="IRI"===b.type?h+("<"+b.value+">"):h+b.value,h=h+" ",h="IRI"===c.type?h+("<"+c.value+">"):h+c.value,h=h+" ";"IRI"===e.type?h+="<"+e.value+">":"blank node"===e.type?h+=e.value:(b=e.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"'),h+='"'+b+'"',e.datatype===Ea?e.language&&
(h+="@"+e.language):e.datatype!==xa&&(h+="^^<"+e.datatype+">"));null!==k&&void 0!==k&&(h=0!==k.indexOf("_:")?h+(" <"+k+">"):h+(" "+k));return h+" .\n"}function ga(d){this.prefix=d;this.counter=0;this.existing={}}function Ib(d,a){var b="";0===d.indexOf("/")&&(b="/");for(var c=d.split("/"),e=[];0<c.length;)"."===c[0]||""===c[0]&&1<c.length?c.shift():".."===c[0]?(c.shift(),a||0<e.length&&".."!==e[e.length-1]?e.pop():e.push("..")):e.push(c.shift());return b+e.join("/")}e.compact=function(d,a,b,c){if(2>
arguments.length)return e.nextTick(function(){c(new TypeError("Could not compact, too few arguments."))});"function"===typeof b&&(c=b,b={});b=b||{};if(null===a)return e.nextTick(function(){c(new F("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===d)return e.nextTick(function(){c(null,null)});"base"in b||(b.base="string"===typeof d?d:"");"compactArrays"in b||(b.compactArrays=!0);"graph"in b||(b.graph=!1);"skipExpansion"in b||(b.skipExpansion=
!1);"documentLoader"in b||(b.documentLoader=e.loadDocument);"link"in b||(b.link=!1);b.link&&(b.skipExpansion=!0);(function(d,a,b){if(a.skipExpansion)return e.nextTick(function(){b(null,d)});e.expand(d,a,b)})(d,b,function(d,h){if(d)return c(new F("Could not expand input before compaction.","jsonld.CompactError",{cause:d}));var k=B(b);e.processContext(k,a,b,function(d,e){if(d)return c(new F("Could not process context before compaction.","jsonld.CompactError",{cause:d}));var k;try{k=(new aa).compact(e,
null,h,b)}catch(Pa){return c(Pa)}var l=b;l.compactArrays&&!l.graph&&J(k)?1===k.length?k=k[0]:0===k.length&&(k={}):l.graph&&H(k)&&(k=[k]);H(a)&&"@context"in a&&(a=a["@context"]);a=X(a);J(a)||(a=[a]);l=a;a=[];for(var m=0;m<l.length;++m)(!H(l[m])||0<Object.keys(l[m]).length)&&a.push(l[m]);l=0<a.length;1===a.length&&(a=a[0]);if(J(k)){var n=R(e,"@graph"),m=k;k={};l&&(k["@context"]=a);k[n]=m}else if(H(k)&&l)for(n in m=k,k={"@context":a},m)k[n]=m[n];c(null,k,e)})})};e.expand=function(d,a,b){function c(d){"base"in
a||(a.base=d.documentUrl||"");d={document:X(d.document),remoteContext:{"@context":d.contextUrl}};if("expandContext"in a){var c=X(a.expandContext);d.expandContext="object"===typeof c&&"@context"in c?c:{"@context":c}}Ga(d,a,function(d,c){if(d)return b(d);var e;try{var k=new aa,h=B(a),l=c.document,m=c.remoteContext["@context"];c.expandContext&&(h=k.processContext(h,c.expandContext["@context"],a));m&&(h=k.processContext(h,m,a));e=k.expand(h,null,l,a,!1);H(e)&&"@graph"in e&&1===Object.keys(e).length?e=
e["@graph"]:null===e&&(e=[]);J(e)||(e=[e])}catch(Pa){return b(Pa)}b(null,e)})}if(1>arguments.length)return e.nextTick(function(){b(new TypeError("Could not expand, too few arguments."))});"function"===typeof a&&(b=a,a={});a=a||{};"documentLoader"in a||(a.documentLoader=e.loadDocument);"keepFreeFloatingNodes"in a||(a.keepFreeFloatingNodes=!1);e.nextTick(function(){if("string"===typeof d){var e=function(d,a){if(d)return b(d);try{if(!a.document)throw new F("No remote document found at the given URL.",
"jsonld.NullRemoteDocument");"string"===typeof a.document&&(a.document=JSON.parse(a.document))}catch(va){return b(new F("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:va,remoteDoc:a}))}c(a)},k=a.documentLoader(d,e);k&&"then"in k&&k.then(e.bind(null,null),e)}else c({contextUrl:null,documentUrl:null,document:d})})};e.flatten=function(d,a,b,c){if(1>arguments.length)return e.nextTick(function(){c(new TypeError("Could not flatten, too few arguments."))});
"function"===typeof b?(c=b,b={}):"function"===typeof a&&(c=a,a=null,b={});b=b||{};"base"in b||(b.base="string"===typeof d?d:"");"documentLoader"in b||(b.documentLoader=e.loadDocument);e.expand(d,b,function(d,k){if(d)return c(new F("Could not expand input before flattening.","jsonld.FlattenError",{cause:d}));var h;try{h=(new aa).flatten(k)}catch(Fa){return c(Fa)}if(null===a)return c(null,h);b.graph=!0;b.skipExpansion=!0;e.compact(h,a,b,function(d,a){if(d)return c(new F("Could not compact flattened output.",
"jsonld.FlattenError",{cause:d}));c(null,a)})})};e.frame=function(d,a,b,c){function k(a){var k=a.document,h;k?(h=k["@context"],a.contextUrl?(h?J(h)?h.push(a.contextUrl):h=[h,a.contextUrl]:h=a.contextUrl,k["@context"]=h):h=h||{}):h={};e.expand(d,b,function(d,a){if(d)return c(new F("Could not expand input before framing.","jsonld.FrameError",{cause:d}));var l=X(b);l.isFrame=!0;l.keepFreeFloatingNodes=!0;e.expand(k,l,function(d,b){if(d)return c(new F("Could not expand frame before framing.","jsonld.FrameError",
{cause:d}));var k;try{k=(new aa).frame(a,b,l)}catch(ob){return c(ob)}l.graph=!0;l.skipExpansion=!0;l.link={};e.compact(k,h,l,function(d,a,b){if(d)return c(new F("Could not compact framed output.","jsonld.FrameError",{cause:d}));d=R(b,"@graph");l.link={};a[d]=L(b,a[d],l);c(null,a)})})})}if(2>arguments.length)return e.nextTick(function(){c(new TypeError("Could not frame, too few arguments."))});"function"===typeof b&&(c=b,b={});b=b||{};"base"in b||(b.base="string"===typeof d?d:"");"documentLoader"in
b||(b.documentLoader=e.loadDocument);"embed"in b||(b.embed="@last");b.explicit=b.explicit||!1;"requireAll"in b||(b.requireAll=!0);b.omitDefault=b.omitDefault||!1;e.nextTick(function(){if("string"===typeof a){var d=function(d,a){if(d)return c(d);try{if(!a.document)throw new F("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"===typeof a.document&&(a.document=JSON.parse(a.document))}catch(jb){return c(new F("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.",
"jsonld.LoadDocumentError",{code:"loading document failed",cause:jb,remoteDoc:a}))}k(a)},e=b.documentLoader(a,d);e&&"then"in e&&e.then(d.bind(null,null),d)}else k({contextUrl:null,documentUrl:null,document:a})})};e.link=function(d,a,b,c){var k={};a&&(k["@context"]=a);k["@embed"]="@link";e.frame(d,k,b,c)};e.objectify=function(d,a,b,c){"function"===typeof b&&(c=b,b={});b=b||{};"base"in b||(b.base="string"===typeof d?d:"");"documentLoader"in b||(b.documentLoader=e.loadDocument);e.expand(d,b,function(d,
k){if(d)return c(new F("Could not expand input before linking.","jsonld.LinkError",{cause:d}));var h;try{h=(new aa).flatten(k)}catch(Fa){return c(Fa)}b.graph=!0;b.skipExpansion=!0;e.compact(h,a,b,function(d,a,b){if(d)return c(new F("Could not compact flattened output before linking.","jsonld.LinkError",{cause:d}));d=R(b,"@graph");var k=a[d][0],h=function(d){if(H(d)||J(d)){if(H(d)){if(h.visited[d["@id"]])return;h.visited[d["@id"]]=!0}for(var a in d){var c=d[a],l="@id"===e.getContextValue(b,a,"@type");
if(J(c)||H(c)||l)if(S(c)&&l)d[a]=c=k[c],h(c);else if(J(c))for(var m=0;m<c.length;++m)S(c[m])&&l?c[m]=k[c[m]]:H(c[m])&&"@id"in c[m]&&(c[m]=k[c[m]["@id"]]),h(c[m]);else H(c)&&(d[a]=c=k[c["@id"]],h(c))}}};h.visited={};h(k);a.of_type={};for(var l in k)if("@type"in k[l]){d=k[l]["@type"];J(d)||(d=[d]);for(var m=0;m<d.length;++m)d[m]in a.of_type||(a.of_type[d[m]]=[]),a.of_type[d[m]].push(k[l])}c(null,a)})})};e.normalize=function(d,a,b){if(1>arguments.length)return e.nextTick(function(){b(new TypeError("Could not normalize, too few arguments."))});
"function"===typeof a&&(b=a,a={});a=a||{};"algorithm"in a||(a.algorithm="URGNA2012");"base"in a||(a.base="string"===typeof d?d:"");"documentLoader"in a||(a.documentLoader=e.loadDocument);if("inputFormat"in a){if("application/nquads"!==a.inputFormat)return b(new F("Unknown normalization input format.","jsonld.NormalizeError"));var c=Xa(d);(new aa).normalize(c,a,b)}else c=X(a),delete c.format,c.produceGeneralizedRdf=!1,e.toRDF(d,c,function(d,c){if(d)return b(new F("Could not convert input to RDF dataset before normalization.",
"jsonld.NormalizeError",{cause:d}));(new aa).normalize(c,a,b)})};e.fromRDF=function(d,a,b){if(1>arguments.length)return e.nextTick(function(){b(new TypeError("Could not convert from RDF, too few arguments."))});"function"===typeof a&&(b=a,a={});a=a||{};"useRdfType"in a||(a.useRdfType=!1);"useNativeTypes"in a||(a.useNativeTypes=!1);"format"in a||!S(d)||"format"in a||(a.format="application/nquads");e.nextTick(function(){function c(d,a,b){(new aa).fromRDF(d,a,b)}var e;if(a.format){if(e=a.rdfParser||
Ra[a.format],!e)return b(new F("Unknown input format.","jsonld.UnknownFormat",{format:a.format}))}else e=function(){return d};var k=!1;try{d=e(d,function(d,e){k=!0;if(d)return b(d);c(e,a,b)})}catch(Ca){if(!k)return b(Ca);throw Ca;}if(d){if("then"in d)return d.then(function(d){c(d,a,b)},b);c(d,a,b)}})};e.toRDF=function(d,a,b){if(1>arguments.length)return e.nextTick(function(){b(new TypeError("Could not convert to RDF, too few arguments."))});"function"===typeof a&&(b=a,a={});a=a||{};"base"in a||(a.base=
"string"===typeof d?d:"");"documentLoader"in a||(a.documentLoader=e.loadDocument);e.expand(d,a,function(d,c){if(d)return b(new F("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:d}));var e;try{if(e=aa.prototype.toRDF(c,a),a.format){if("application/nquads"===a.format){var k=b,h,l=[],m;for(m in e)for(var n=e[m],v=0;v<n.length;++v){var w=n[v];"@default"===m&&(m=null);l.push(Ya(w,m))}h=l.sort().join("");return k(null,h)}throw new F("Unknown output format.","jsonld.UnknownFormat",
{format:a.format});}}catch(Pa){return b(Pa)}b(null,e)})};e.createNodeMap=function(d,a,b){if(1>arguments.length)return e.nextTick(function(){b(new TypeError("Could not create node map, too few arguments."))});"function"===typeof a&&(b=a,a={});a=a||{};"base"in a||(a.base="string"===typeof d?d:"");"documentLoader"in a||(a.documentLoader=e.loadDocument);e.expand(d,a,function(d,c){if(d)return b(new F("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:d}));var e;try{e=
(new aa).createNodeMap(c,a)}catch(Ca){return b(Ca)}b(null,e)})};e.merge=function(d,a,b,c){function k(d,a){if(!m){if(d)return m=d,c(new F("Could not expand input before flattening.","jsonld.FlattenError",{cause:d}));l.push(a);0===--v&&h(l)}}function h(d){var k=!0;"mergeNodes"in b&&(k=b.mergeNodes);var h=b.namer||b.issuer||new ga("_:b"),l={"@default":{}},m;try{for(var v=0;v<d.length;++v){var w=d[v],w=e.relabelBlankNodes(w,{issuer:new ga("_:b"+v+"-")}),u=k||0===v?l:{"@default":{}};n(w,u,"@default",h);
if(u!==l)for(var t in u){var D=u[t];if(t in l){var A=l[t],Q;for(Q in D)Q in A||(A[Q]=D[Q])}else l[t]=D}}m=y(l)}catch(Jb){return c(Jb)}d=[];k=Object.keys(m).sort();for(h=0;h<k.length;++h)l=m[k[h]],da(l)||d.push(l);if(null===a)return c(null,d);b.graph=!0;b.skipExpansion=!0;e.compact(d,a,b,function(d,a){if(d)return c(new F("Could not compact merged output.","jsonld.MergeError",{cause:d}));c(null,a)})}if(1>arguments.length)return e.nextTick(function(){c(new TypeError("Could not merge, too few arguments."))});
if(!J(d))return e.nextTick(function(){c(new TypeError('Could not merge, "docs" must be an array.'))});"function"===typeof b?(c=b,b={}):"function"===typeof a&&(c=a,a=null,b={});b=b||{};for(var l=[],m=null,v=d.length,w=0;w<d.length;++w){var u={},t;for(t in b)u[t]=b[t];e.expand(d[w],u,k)}};e.relabelBlankNodes=function(d,a){a=a||{};var b=a.namer||a.issuer||new ga("_:b");return h(b,d)};e.prependBase=function(d,a){var b;var c=d;if(null===c)b=a;else if(-1!==a.indexOf(":"))b=a;else{S(c)&&(c=e.url.parse(c||
""));b=e.url.parse(a);var k=c.protocol||"",h,l;null!==b.authority?(h=b.authority,l=b.path,c=b.query):(h=c.authority,""===b.path?(l=c.path,c=null!==b.query?b.query:c.query):(0===b.path.indexOf("/")?l=b.path:(l=c.path,""!==b.path&&(l=l.substr(0,l.lastIndexOf("/")+1),0<l.length&&"/"!==l.substr(-1)&&(l+="/"),l+=b.path)),c=b.query));l=Ib(l,!!h);null!==h&&(k+="//"+h);k+=l;null!==c&&(k+="?"+c);null!==b.fragment&&(k+="#"+b.fragment);""===k&&(k="./");b=k}return b};e.documentLoader=function(d,a){var c=new F("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.",
"jsonld.LoadDocumentError",{code:"loading document failed"});return b?a(c,{contextUrl:null,documentUrl:d,document:null}):e.promisify(function(d){d(c)})};e.loadDocument=function(d,a){var b=e.documentLoader(d,a);b&&"then"in b&&b.then(a.bind(null,null),a)};e.promises=function(d){d=d||{};var a=Array.prototype.slice,b=e.promisify,c=d.api||{},h=d.version||"jsonld.js";"string"===typeof d.api&&(d.version||(h=d.api),c={});c.expand=function(d){if(1>arguments.length)throw new TypeError("Could not expand, too few arguments.");
return b.apply(null,[e.expand].concat(a.call(arguments)))};c.compact=function(d,c){if(2>arguments.length)throw new TypeError("Could not compact, too few arguments.");return b.apply(null,[function(d,a,b,c){e.compact(d,a,b,function(d,a){c(d,a)})}].concat(a.call(arguments)))};c.flatten=function(d){if(1>arguments.length)throw new TypeError("Could not flatten, too few arguments.");return b.apply(null,[e.flatten].concat(a.call(arguments)))};c.frame=function(d,c){if(2>arguments.length)throw new TypeError("Could not frame, too few arguments.");
return b.apply(null,[e.frame].concat(a.call(arguments)))};c.fromRDF=function(d){if(1>arguments.length)throw new TypeError("Could not convert from RDF, too few arguments.");return b.apply(null,[e.fromRDF].concat(a.call(arguments)))};c.toRDF=function(d){if(1>arguments.length)throw new TypeError("Could not convert to RDF, too few arguments.");return b.apply(null,[e.toRDF].concat(a.call(arguments)))};c.normalize=function(d){if(1>arguments.length)throw new TypeError("Could not normalize, too few arguments.");
return b.apply(null,[e.normalize].concat(a.call(arguments)))};"jsonld.js"===h&&(c.link=function(d,c){if(2>arguments.length)throw new TypeError("Could not link, too few arguments.");return b.apply(null,[e.link].concat(a.call(arguments)))},c.objectify=function(d){return b.apply(null,[e.objectify].concat(a.call(arguments)))},c.createNodeMap=function(d){return b.apply(null,[e.createNodeMap].concat(a.call(arguments)))},c.merge=function(d){return b.apply(null,[e.merge].concat(a.call(arguments)))});try{e.Promise=
k.Promise||x("es6-promise").Promise}catch(Ca){d=function(){throw Error("Unable to find a Promise implementation.");};for(var l in c)c[l]=d}return c};e.promisify=function(d){if(!e.Promise)try{e.Promise=k.Promise||x("es6-promise").Promise}catch(K){throw Error("Unable to find a Promise implementation.");}var a=Array.prototype.slice.call(arguments,1);return new e.Promise(function(b,c){d.apply(null,a.concat(function(d,a){d?c(d):b(a)}))})};e.promises({api:e.promises});d.prototype=e.promises({version:"json-ld-1.0"});
d.prototype.toString=function(){return this instanceof d?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"};e.JsonLdProcessor=d;var oa=!!Object.defineProperty;if(oa)try{Object.defineProperty({},"x",{})}catch(M){oa=!1}oa&&(Object.defineProperty(d,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(d.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:d}));a&&"undefined"===typeof k.JsonLdProcessor&&(oa?Object.defineProperty(k,"JsonLdProcessor",{writable:!0,
enumerable:!1,configurable:!0,value:d}):k.JsonLdProcessor=d);var kb="function"===typeof setImmediate&&setImmediate,oa=kb?function(d){kb(d)}:function(d){setTimeout(d,0)};e.nextTick="object"===typeof t&&"function"===typeof t.nextTick?t.nextTick:oa;e.setImmediate=kb?oa:e.nextTick;e.parseLinkHeader=function(d){var a={};d=d.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g);for(var b=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,c=0;c<d.length;++c){var e=d[c].match(b);if(e){for(var k={target:e[1]},h=e[2],l=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;e=
l.exec(h);)k[e[1]]=void 0===e[2]?e[3]:e[2];e=k.rel||"";J(a[e])?a[e].push(k):a[e]=e in a?[a[e],k]:k}}return a};e.RequestQueue=function(){this._requests={}};e.RequestQueue.prototype.wrapLoader=function(d){this._loader=d;this._usePromise=1===d.length;return this.add.bind(this)};e.RequestQueue.prototype.add=function(d,a){var b=this;if(!a&&!b._usePromise)throw Error("callback must be specified.");if(b._usePromise)return new e.Promise(function(a,c){var e=b._requests[d];e||(e=b._requests[d]=b._loader(d).then(function(a){delete b._requests[d];
return a})["catch"](function(a){delete b._requests[d];throw a;}));e.then(function(d){a(d)})["catch"](function(d){c(d)})});d in b._requests?b._requests[d].push(a):(b._requests[d]=[a],b._loader(d,function(a,c){var e=b._requests[d];delete b._requests[d];for(var k=0;k<e.length;++k)e[k](a,c)}))};e.DocumentCache=function(d){this.order=[];this.cache={};this.size=d||50;this.expires=3E4};e.DocumentCache.prototype.get=function(d){if(d in this.cache){var a=this.cache[d];if(a.expires>=+new Date)return a.ctx;
delete this.cache[d];this.order.splice(this.order.indexOf(d),1)}return null};e.DocumentCache.prototype.set=function(d,a){this.order.length===this.size&&delete this.cache[this.order.shift()];this.order.push(d);this.cache[d]={ctx:a,expires:+new Date+this.expires}};e.ActiveContextCache=function(d){this.order=[];this.cache={};this.size=d||100};e.ActiveContextCache.prototype.get=function(d,a){var b=JSON.stringify(d),c=JSON.stringify(a);return(b=this.cache[b])&&c in b?b[c]:null};e.ActiveContextCache.prototype.set=
function(d,a,b){if(this.order.length===this.size){var c=this.order.shift();delete this.cache[c.activeCtx][c.localCtx]}d=JSON.stringify(d);a=JSON.stringify(a);this.order.push({activeCtx:d,localCtx:a});d in this.cache||(this.cache[d]={});this.cache[d][a]=X(b)};e.cache={activeCtx:new e.ActiveContextCache};e.documentLoaders={};e.documentLoaders.jquery=function(d,a){function b(b,c){if(0!==b.indexOf("http:")&&0!==b.indexOf("https:"))return c(new F('URL could not be dereferenced; only "http" and "https" URLs are supported.',
"jsonld.InvalidUrl",{code:"loading document failed",url:b}),{contextUrl:null,documentUrl:b,document:null});if(a.secure&&0!==b.indexOf("https"))return c(new F('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:b}),{contextUrl:null,documentUrl:b,document:null});d.ajax({url:b,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",
crossDomain:!0,success:function(d,a,k){d={contextUrl:null,documentUrl:b,document:d};a=k.getResponseHeader("Content-Type");if((k=k.getResponseHeader("Link"))&&"application/ld+json"!==a){k=e.parseLinkHeader(k)[rb];if(J(k))return c(new F("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:b}),d);k&&(d.contextUrl=k.target)}c(null,d)},error:function(d,a,e){c(new F("URL could not be dereferenced, an error occurred.",
"jsonld.LoadDocumentError",{code:"loading document failed",url:b,cause:e}),{contextUrl:null,documentUrl:b,document:null})}})}a=a||{};var c=new e.RequestQueue;return("usePromise"in a?a.usePromise:"undefined"!==typeof Promise)?c.wrapLoader(function(d){return e.promisify(b,d)}):c.wrapLoader(b)};e.documentLoaders.node=function(d){function a(l,m,n){if(0!==l.indexOf("http:")&&0!==l.indexOf("https:"))return n(new F('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",
{code:"loading document failed",url:l}),{contextUrl:null,documentUrl:l,document:null});if(d.secure&&0!==l.indexOf("https"))return n(new F('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:l}),{contextUrl:null,documentUrl:l,document:null});var v=null;if(null!==v)return n(null,v);var w={Accept:"application/ld+json, application/json"},y;for(y in d.headers)w[y]=d.headers[y];k({url:l,headers:w,strictSSL:b,
followRedirect:!1},function(d,b,k){v={contextUrl:null,documentUrl:l,document:k||null};if(d)return n(new F("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:l,cause:d}),v);k=h.STATUS_CODES[b.statusCode];if(400<=b.statusCode)return n(new F("URL could not be dereferenced: "+k,"jsonld.InvalidUrl",{code:"loading document failed",url:l,httpStatusCode:b.statusCode}),v);if(b.headers.link&&"application/ld+json"!==b.headers["content-type"]){k=
e.parseLinkHeader(b.headers.link)[rb];if(J(k))return n(new F("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:l}),v);k&&(v.contextUrl=k.target)}if(300<=b.statusCode&&400>b.statusCode&&b.headers.location){if(m.length===c)return n(new F("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:l,httpStatusCode:b.statusCode,redirects:m}),
v);if(-1!==m.indexOf(l))return n(new F("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:l,httpStatusCode:b.statusCode,redirects:m}),v);m.push(l);return a(b.headers.location,m,n)}m.push(l);n(d,v)})}d=d||{};var b="strictSSL"in d?d.strictSSL:!0,c="maxRedirects"in d?d.maxRedirects:-1,k="request"in d?d.request:x("request"),h=x("http"),l=new e.RequestQueue;if(d.usePromise)return l.wrapLoader(function(d){return e.promisify(a,
d,[])});var m=d.headers||{};if("Accept"in m||"accept"in m)throw new RangeError('Accept header may not be specified as an option; only "application/ld+json, application/json" is supported.');return l.wrapLoader(function(d,b){a(d,[],b)})};e.documentLoaders.xhr=function(d){function a(a,c){if(0!==a.indexOf("http:")&&0!==a.indexOf("https:"))return c(new F('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a}),{contextUrl:null,
documentUrl:a,document:null});if(d.secure&&0!==a.indexOf("https"))return c(new F('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:a}),{contextUrl:null,documentUrl:a,document:null});var k=new (d.xhr||XMLHttpRequest);k.onload=function(){if(400<=k.status)return c(new F("URL could not be dereferenced: "+k.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:a,httpStatusCode:k.status}),
{contextUrl:null,documentUrl:a,document:null});var d={contextUrl:null,documentUrl:a,document:k.response},h=k.getResponseHeader("Content-Type"),l;b.test(k.getAllResponseHeaders())&&(l=k.getResponseHeader("Link"));if(l&&"application/ld+json"!==h){l=e.parseLinkHeader(l)[rb];if(J(l))return c(new F("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a}),d);l&&(d.contextUrl=l.target)}c(null,d)};k.onerror=function(){c(new F("URL could not be dereferenced, an error occurred.",
"jsonld.LoadDocumentError",{code:"loading document failed",url:a}),{contextUrl:null,documentUrl:a,document:null})};k.open("GET",a,!0);k.setRequestHeader("Accept","application/ld+json, application/json");k.send()}d=d||{};var b=/(^|(\r\n))link:/i,c=new e.RequestQueue;return("usePromise"in d?d.usePromise:"undefined"!==typeof Promise)?c.wrapLoader(function(d){return e.promisify(a,d)}):c.wrapLoader(a)};e.useDocumentLoader=function(d){if(!(d in e.documentLoaders))throw new F('Unknown document loader type: "'+
d+'"',"jsonld.UnknownDocumentLoader",{type:d});e.documentLoader=e.documentLoaders[d].apply(e,Array.prototype.slice.call(arguments,1))};e.processContext=function(d,a){var b={},c=2;3<arguments.length&&(b=arguments[2]||{},c+=1);var k=arguments[c];"base"in b||(b.base="");"documentLoader"in b||(b.documentLoader=e.loadDocument);if(null===a)return k(null,B(b));a=X(a);H(a)&&"@context"in a||(a={"@context":a});Ga(a,b,function(a,c){if(a)return k(a);try{c=(new aa).processContext(d,c,b)}catch(Fa){return k(Fa)}k(null,
c)})};e.hasProperty=function(d,a){var b=!1;a in d&&(b=d[a],b=!J(b)||0<b.length);return b};e.hasValue=function(d,a,b){var c=!1;if(e.hasProperty(d,a))if(d=d[a],a=fa(d),J(d)||a)for(a&&(d=d["@list"]),a=0;a<d.length;++a){if(e.compareValues(b,d[a])){c=!0;break}}else J(b)||(c=e.compareValues(b,d));return c};e.addValue=function(d,a,b,c){c=c||{};"propertyIsArray"in c||(c.propertyIsArray=!1);"allowDuplicate"in c||(c.allowDuplicate=!0);if(J(b)){0!==b.length||!c.propertyIsArray||a in d||(d[a]=[]);for(var k=0;k<
b.length;++k)e.addValue(d,a,b[k],c)}else a in d?(k=!c.allowDuplicate&&e.hasValue(d,a,b),J(d[a])||k&&!c.propertyIsArray||(d[a]=[d[a]]),k||d[a].push(b)):d[a]=c.propertyIsArray?[b]:b};e.getValues=function(d,a){var b=d[a]||[];J(b)||(b=[b]);return b};e.removeProperty=function(d,a){delete d[a]};e.removeValue=function(d,a,b,c){c=c||{};"propertyIsArray"in c||(c.propertyIsArray=!1);var k=e.getValues(d,a).filter(function(d){return!e.compareValues(d,b)});0===k.length?e.removeProperty(d,a):d[a]=1!==k.length||
c.propertyIsArray?k:k[0]};e.compareValues=function(d,a){return d===a||ja(d)&&ja(a)&&d["@value"]===a["@value"]&&d["@type"]===a["@type"]&&d["@language"]===a["@language"]&&d["@index"]===a["@index"]?!0:H(d)&&"@id"in d&&H(a)&&"@id"in a?d["@id"]===a["@id"]:!1};e.getContextValue=function(d,a,b){var c=null;if(null===a)return c;"@language"===b&&b in d&&(c=d[b]);d.mappings[a]&&(d=d.mappings[a],Y(b)?c=d:b in d&&(c=d[b]));return c};var Ra={};e.registerRDFParser=function(d,a){Ra[d]=a};e.unregisterRDFParser=function(d){delete Ra[d]};
if(b){if("undefined"===typeof Za)var Za=null;if("undefined"===typeof sb)var sb={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var xa="http://www.w3.org/2001/XMLSchema#string",Ea="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",rb="http://www.w3.org/ns/json-ld#context",pb=10,F=function(d,a,c){b?(Error.call(this),
Error.captureStackTrace(this,this.constructor)):"undefined"!==typeof Error&&(this.stack=Error().stack);this.name=a||"jsonld.Error";this.message=d||"An unspecified JSON-LD error occurred.";this.details=c||{}};b?x("util").inherits(F,Error):"undefined"!==typeof Error&&(F.prototype=Error());var aa=function(){};aa.prototype.compact=function(d,a,b,c){if(J(b)){for(var k=[],h=0;h<b.length;++h){var l=this.compact(d,a,b[h],c);null!==l&&k.push(l)}if(c.compactArrays&&1===k.length){var m=e.getContextValue(d,a,
"@container");null===m&&(k=k[0])}return k}if(H(b)){if(c.link&&"@id"in b&&b["@id"]in c.link)for(k=c.link[b["@id"]],h=0;h<k.length;++h)if(k[h].expanded===b)return k[h].compacted;if(ja(b)||da(b))return k=ha(d,a,b),c.link&&da(b)&&(b["@id"]in c.link||(c.link[b["@id"]]=[]),c.link[b["@id"]].push({expanded:b,compacted:k})),k;h="@reverse"===a;k={};c.link&&"@id"in b&&(b["@id"]in c.link||(c.link[b["@id"]]=[]),c.link[b["@id"]].push({expanded:b,compacted:k}));for(var n=Object.keys(b).sort(),v=0;v<n.length;++v){var w=
n[v],y=b[w];if("@id"===w||"@type"===w){var u;if(S(y))u=R(d,y,null,{vocab:"@type"===w});else{u=[];for(var t=0;t<y.length;++t)u.push(R(d,y[t],null,{vocab:!0}))}w=R(d,w);m=J(u)&&0===y.length;e.addValue(k,w,u,{propertyIsArray:m})}else if("@reverse"===w){u=this.compact(d,"@reverse",y,c);for(l in u)d.mappings[l]&&d.mappings[l].reverse&&(y=u[l],m=e.getContextValue(d,l,"@container"),e.addValue(k,l,y,{propertyIsArray:"@set"===m||!c.compactArrays}),delete u[l]);0<Object.keys(u).length&&(w=R(d,w),e.addValue(k,
w,u))}else if("@index"===w)m=e.getContextValue(d,a,"@container"),"@index"!==m&&(w=R(d,w),e.addValue(k,w,y));else if("@graph"!==w&&"@list"!==w&&C(w))w=R(d,w),e.addValue(k,w,y);else for(0===y.length&&(u=R(d,w,y,{vocab:!0},h),e.addValue(k,u,y,{propertyIsArray:!0})),t=0;t<y.length;++t){var D=y[t];u=R(d,w,D,{vocab:!0},h);var m=e.getContextValue(d,u,"@container"),A=fa(D),I=null;A&&(I=D["@list"]);I=this.compact(d,u,A?I:D,c);if(A)if(J(I)||(I=[I]),"@list"!==m)A={},A[R(d,"@list")]=I,I=A,"@index"in D&&(I[R(d,
"@index")]=D["@index"]);else if(u in k)throw new F('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===m||"@index"===m){var x;u in k?x=k[u]:k[u]=x={};"@language"===m&&ja(I)&&(I=I["@value"]);e.addValue(x,D[m],I)}else m=!c.compactArrays||"@set"===m||"@list"===m||J(I)&&0===I.length||
"@list"===w||"@graph"===w,e.addValue(k,u,I,{propertyIsArray:m})}}return k}return b};aa.prototype.expand=function(d,a,b,c,k){if(null===b||void 0===b)return null;if(!J(b)&&!H(b))return k||null!==a&&"@graph"!==E(d,a,{vocab:!0})?l(d,a,b):null;if(J(b)){var h=[],m=e.getContextValue(d,a,"@container");k=k||"@list"===m;for(var n=0;n<b.length;++n){var v=this.expand(d,a,b[n],c);if(k&&(J(v)||fa(v)))throw new F("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});
null!==v&&(J(v)?h=h.concat(v):h.push(v))}return h}"@context"in b&&(d=this.processContext(d,b["@context"],c));for(var n=E(d,a,{vocab:!0}),h={},v=Object.keys(b).sort(),w=0;w<v.length;++w){var y=v[w],u=b[y];if("@context"!==y){var t=E(d,y,{vocab:!0});if(null!==t&&(ka(t)||C(t))){if(C(t)){if("@reverse"===n)throw new F("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:u});if(t in h)throw new F("Invalid JSON-LD syntax; colliding keywords detected.",
"jsonld.SyntaxError",{code:"colliding keywords",keyword:t});}if("@id"===t&&!S(u)){if(!c.isFrame)throw new F('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:u});if(!H(u))throw new F('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:u});}if("@type"===t){var m=u,D;(D=S(m))||(D=H(m)&&0===Object.keys(m).length);if(!D){D=!1;if(J(m)){D=!0;for(var A=0;A<m.length;++A)if(!S(m[A])){D=
!1;break}}if(!D)throw new F('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:m});}}if("@graph"===t&&!H(u)&&!J(u))throw new F('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:u});if("@value"===t&&(H(u)||J(u)))throw new F('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",
{code:"invalid value object value",value:u});if("@language"===t){if(null===u)continue;if(!S(u))throw new F('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:u});u=u.toLowerCase()}if("@index"===t&&!S(u))throw new F('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:u});if("@reverse"===t){if(!H(u))throw new F('Invalid JSON-LD syntax; "@reverse" value must be an object.',
"jsonld.SyntaxError",{code:"invalid @reverse value",value:u});u=this.expand(d,"@reverse",u,c);if("@reverse"in u)for(var I in u["@reverse"])e.addValue(h,I,u["@reverse"][I],{propertyIsArray:!0});y=h["@reverse"]||null;for(I in u)if("@reverse"!==I)for(null===y&&(y=h["@reverse"]={}),e.addValue(y,I,[],{propertyIsArray:!0}),t=u[I],m=0;m<t.length;++m){D=t[m];if(ja(D)||fa(D))throw new F('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",
value:u});e.addValue(y,I,D,{propertyIsArray:!0})}}else{m=e.getContextValue(d,y,"@container");if("@language"===m&&H(u)){D=[];for(var A=Object.keys(u).sort(),x=0;x<A.length;++x){var O=A[x],G=u[O];J(G)||(G=[G]);for(var P=0;P<G.length;++P){var L=G[P];if(null!==L){if(!S(L))throw new F("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:u});D.push({"@value":L,"@language":O.toLowerCase()})}}}u=D}else if("@index"===m&&H(u)){D=
y;A=[];x=Object.keys(u).sort();for(O=0;O<x.length;++O)for(G=x[O],P=u[G],J(P)||(P=[P]),P=this.expand(d,D,P,c,!1),L=0;L<P.length;++L){var K=P[L];"@index"in K||(K["@index"]=G);A.push(K)}u=A}else if((D="@list"===t)||"@set"===t){if(A=a,D&&"@graph"===n&&(A=null),u=this.expand(d,A,u,c,D),D&&fa(u))throw new F("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});}else u=this.expand(d,y,u,c,!1);if(null!==u||"@value"===t)if("@list"===t||fa(u)||"@list"!==m||
(u=J(u)?u:[u],u={"@list":u}),d.mappings[y]&&d.mappings[y].reverse)for(y=h["@reverse"]=h["@reverse"]||{},J(u)||(u=[u]),m=0;m<u.length;++m){D=u[m];if(ja(D)||fa(D))throw new F('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:u});e.addValue(y,t,D,{propertyIsArray:!0})}else y=-1===["@index","@id","@type","@value","@language"].indexOf(t),e.addValue(h,t,u,{propertyIsArray:y})}}}}v=Object.keys(h);d=v.length;if("@value"in
h){if("@type"in h&&"@language"in h)throw new F('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});b=d-1;"@type"in h&&--b;"@index"in h&&--b;"@language"in h&&--b;if(0!==b)throw new F('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",
element:h});if(null===h["@value"])h=null;else{if("@language"in h&&!S(h["@value"]))throw new F("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:h});if("@type"in h&&(!ka(h["@type"])||0===h["@type"].indexOf("_:")))throw new F('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:h});}}else if("@type"in
h&&!J(h["@type"]))h["@type"]=[h["@type"]];else if("@set"in h||"@list"in h){if(1<d&&!(2===d&&"@index"in h))throw new F('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:h});"@set"in h&&(h=h["@set"],v=Object.keys(h),d=v.length)}else 1===d&&"@language"in h&&(h=null);!H(h)||c.keepFreeFloatingNodes||k||null!==a&&"@graph"!==n||!(0===d||"@value"in h||"@list"in
h||1===d&&"@id"in h)||(h=null);return h};aa.prototype.createNodeMap=function(d,a){a=a||{};var b=a.namer||a.issuer||new ga("_:b"),c={"@default":{}};n(d,c,"@default",b);return y(c)};aa.prototype.flatten=function(d){d=this.createNodeMap(d);for(var a=[],b=Object.keys(d).sort(),c=0;c<b.length;++c){var e=d[b[c]];da(e)||a.push(e)}return a};aa.prototype.frame=function(d,a,b){b={options:b,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}};var c=new ga("_:b");n(d,b.graphs,"@merged",c);b.subjects=
b.graphs["@merged"];d=[];D(b,Object.keys(b.subjects).sort(),a,d,null);return d};aa.prototype.normalize=function(d,a,b){if("URDNA2015"===a.algorithm)return(new $a(a)).main(d,b);if("URGNA2012"===a.algorithm)return(new Kb(a)).main(d,b);b(Error("Invalid RDF Dataset Normalization algorithm: "+a.algorithm))};aa.prototype.fromRDF=function(d,a,b){var c={},k={"@default":c},h={},l;for(l in d){var m=d[l];l in k||(k[l]={});"@default"===l||l in c||(c[l]={"@id":l});for(var n=k[l],v=0;v<m.length;++v){var w=m[v],
u=w.subject.value,y=w.predicate.value,w=w.object;u in n||(n[u]={"@id":u});var u=n[u],t="IRI"===w.type||"blank node"===w.type;!t||w.value in n||(n[w.value]={"@id":w.value});if("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===y&&!a.useRdfType&&t)e.addValue(u,"@type",w.value,{propertyIsArray:!0});else{var D;var A=w,I=a.useNativeTypes;"IRI"===A.type||"blank node"===A.type?D={"@id":A.value}:(D={"@value":A.value},A.language?D["@language"]=A.language:((A=A.datatype)||(A=xa),I?("http://www.w3.org/2001/XMLSchema#boolean"===
A?"true"===D["@value"]?D["@value"]=!0:"false"===D["@value"]&&(D["@value"]=!1):(I=D["@value"],!isNaN(parseFloat(I))&&isFinite(I)&&("http://www.w3.org/2001/XMLSchema#integer"===A?(I=parseInt(D["@value"],10),I.toFixed(0)===D["@value"]&&(D["@value"]=I)):"http://www.w3.org/2001/XMLSchema#double"===A&&(D["@value"]=parseFloat(D["@value"])))),-1===["http://www.w3.org/2001/XMLSchema#boolean","http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#double",xa].indexOf(A)&&(D["@type"]=A)):
A!==xa&&(D["@type"]=A)));e.addValue(u,y,D,{propertyIsArray:!0});t&&("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===w.value?(w=n[w.value],"usages"in w||(w.usages=[]),w.usages.push({node:u,property:y,value:D})):h[w.value]=w.value in h?!1:{node:u,property:y,value:D})}}}for(l in k)if(a=k[l],"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"in a){m=a["http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"];for(d=0;d<m.usages.length;++d){w=m.usages[d];u=w.node;v=w.property;w=w.value;y=[];n=[];for(t=Object.keys(u).length;"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"===
v&&H(h[u["@id"]])&&J(u["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"])&&1===u["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"].length&&J(u["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"])&&1===u["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"].length&&(3===t||4===t&&J(u["@type"])&&1===u["@type"].length&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#List"===u["@type"][0])&&(y.push(u["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"][0]),n.push(u["@id"]),w=h[u["@id"]],u=w.node,v=w.property,
w=w.value,t=Object.keys(u).length,0===u["@id"].indexOf("_:")););if("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"===v){if("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===u["@id"])continue;w=a[w["@id"]]["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"][0];y.pop();n.pop()}delete w["@id"];w["@list"]=y.reverse();for(u=0;u<n.length;++u)delete a[n[u]]}delete m.usages}h=[];l=Object.keys(c).sort();for(d=0;d<l.length;++d){a=l[d];u=c[a];if(a in k)for(m=u["@graph"]=[],a=k[a],n=Object.keys(a).sort(),
v=0;v<n.length;++v)y=a[n[v]],da(y)||m.push(y);da(u)||h.push(u)}b(null,h)};aa.prototype.toRDF=function(d,a){var b=new ga("_:b"),c={"@default":{}};n(d,c,"@default",b);for(var e={},k=Object.keys(c).sort(),h=0;h<k.length;++h){var l=k[h];if("@default"===l||ka(l)){for(var m=l,l=c[l],v=b,u=a,y=[],t=Object.keys(l).sort(),D=0;D<t.length;++D)for(var A=t[D],I=l[A],x=Object.keys(I).sort(),O=0;O<x.length;++O){var G=x[O],L=I[G];if("@type"===G)G="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";else if(C(G))continue;
for(var E=0;E<L.length;++E){var X=L[E],ia={};ia.type=0===A.indexOf("_:")?"blank node":"IRI";ia.value=A;if(ka(A)){var R={};R.type=0===G.indexOf("_:")?"blank node":"IRI";R.value=G;if(ka(G)&&("blank node"!==R.type||u.produceGeneralizedRdf))if(fa(X)){for(var X=X["@list"],B=v,N=y,ha={type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},H={type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},r=0;r<X.length;++r){var M=X[r],F={type:"blank node",value:B.getId()};N.push({subject:ia,
predicate:R,object:F});ia=F;R=ha;(M=w(M))&&N.push({subject:ia,predicate:R,object:M});R=H}N.push({subject:ia,predicate:R,object:{type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}})}else(X=w(X))&&y.push({subject:ia,predicate:R,object:X})}}}e[m]=y}}return e};aa.prototype.processContext=function(d,a,b){H(a)&&"@context"in a&&J(a["@context"])&&(a=a["@context"]);a=J(a)?a:[a];if(0===a.length)return d.clone();for(var c=d,k=0;k<a.length;++k){var h=a[k];if(null===h)c=d=B(b);else{H(h)&&"@context"in
h&&(h=h["@context"]);if(!H(h))throw new F("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:h});if(e.cache.activeCtx&&(d=e.cache.activeCtx.get(d,h))){c=d;continue}d=c;var c=c.clone(),l={};if("@base"in h){var m=h["@base"];if(null===m)m=null;else{if(!S(m))throw new F('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h});if(""!==m&&!ka(m))throw new F('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',
"jsonld.SyntaxError",{code:"invalid base IRI",context:h});}null!==m&&(m=e.url.parse(m||""));c["@base"]=m;l["@base"]=!0}if("@vocab"in h){m=h["@vocab"];if(null===m)delete c["@vocab"];else if(S(m))if(ka(m))c["@vocab"]=m;else throw new F('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});else throw new F('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",
{code:"invalid vocab mapping",context:h});l["@vocab"]=!0}if("@language"in h){m=h["@language"];if(null===m)delete c["@language"];else if(S(m))c["@language"]=m.toLowerCase();else throw new F('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:h});l["@language"]=!0}for(var n in h)N(c,h,n,l);e.cache.activeCtx&&e.cache.activeCtx.set(d,h,c)}}return c};var $a=function(){var d={subject:"s",object:"o",name:"g"},
a=function(d){d=d||{};this.name="URDNA2015";this.options=d;this.blankNodeInfo={};this.hashToBlankNodes={};this.canonicalIssuer=new ga("_:c14n");this.quads=[];this.schedule={};this.schedule.MAX_DEPTH="maxCallStackDepth"in d?d.maxCallStackDepth:500;this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in d?d.maxCallStackDepth:4294967295;this.schedule.depth=0;this.schedule.totalDepth=0;this.schedule.timeSlice="timeSlice"in d?d.timeSlice:10};a.prototype.doWork=function(d,a){var b=this.schedule;if(b.totalDepth>=
b.MAX_TOTAL_DEPTH)return a(Error("Maximum total call stack depth exceeded; normalization aborting."));(function Ca(){if(b.depth===b.MAX_DEPTH)return b.depth=0,b.running=!1,e.nextTick(Ca);var c=(new Date).getTime();b.running||(b.start=(new Date).getTime(),b.deadline=b.start+b.timeSlice);if(c<b.deadline)return b.running=!0,b.depth++,b.totalDepth++,d(function(d,c){b.depth--;b.totalDepth--;a(d,c)});b.depth=0;b.running=!1;e.setImmediate(Ca)})()};a.prototype.forEach=function(d,a,b){var c=this,e,k=0,h;if(J(d))h=
d.length,e=function(){if(k===h)return!1;e.value=d[k++];e.key=k;return!0};else{var l=Object.keys(d);h=l.length;e=function(){if(k===h)return!1;e.key=l[k++];e.value=d[e.key];return!0}}(function nb(d,k){if(d)return b(d);if(e())return c.doWork(function(){a(e.value,e.key,nb)});b()})()};a.prototype.waterfall=function(d,a){var b=this;b.forEach(d,function(d,a,c){b.doWork(d,c)},a)};a.prototype.whilst=function(d,a,b){var c=this;(function Fa(e){if(e)return b(e);if(!d())return b();c.doWork(a,Fa)})()};a.prototype.main=
function(d,a){var b=this;b.schedule.start=(new Date).getTime();var c;if(b.options.format&&"application/nquads"!==b.options.format)return a(new F("Unknown output format.","jsonld.UnknownFormat",{format:b.options.format}));var e={};b.waterfall([function(a){b.forEach(d,function(d,a,c){"@default"===a&&(a=null);b.forEach(d,function(d,c,k){null!==a&&(0===a.indexOf("_:")?d.name={type:"blank node",value:a}:d.name={type:"IRI",value:a});b.quads.push(d);b.forEachComponent(d,function(a){"blank node"===a.type&&
(a=a.value,a in b.blankNodeInfo?b.blankNodeInfo[a].quads.push(d):(e[a]=!0,b.blankNodeInfo[a]={quads:[d]}))});k()},c)},a)},function(d){var a=!0;b.whilst(function(){return a},function(d){a=!1;b.hashToBlankNodes={};b.waterfall([function(d){b.forEach(e,function(d,a,c){b.hashFirstDegreeQuads(a,function(d,e){if(d)return c(d);e in b.hashToBlankNodes?b.hashToBlankNodes[e].push(a):b.hashToBlankNodes[e]=[a];c()})},d)},function(d){var c=Object.keys(b.hashToBlankNodes).sort();b.forEach(c,function(d,c,k){c=b.hashToBlankNodes[d];
if(1<c.length)return k();c=c[0];b.canonicalIssuer.getId(c);delete e[c];delete b.hashToBlankNodes[d];a=!0;k()},d)}],d)},d)},function(d){var a=Object.keys(b.hashToBlankNodes).sort();b.forEach(a,function(d,a,c){var e=[],k=b.hashToBlankNodes[d];b.waterfall([function(d){b.forEach(k,function(d,a,c){if(b.canonicalIssuer.hasId(d))return c();a=new ga("_:b");a.getId(d);b.hashNDegreeQuads(d,a,function(d,a){if(d)return c(d);e.push(a);c()})},d)},function(d){e.sort(function(d,a){return d.hash<a.hash?-1:d.hash>
a.hash?1:0});b.forEach(e,function(d,a,c){for(var e in d.issuer.existing)b.canonicalIssuer.getId(e);c()},d)}],c)},d)},function(d){var a=[];b.waterfall([function(d){b.forEach(b.quads,function(d,c,e){b.forEachComponent(d,function(d){"blank node"===d.type&&0!==d.value.indexOf(b.canonicalIssuer.prefix)&&(d.value=b.canonicalIssuer.getId(d.value))});a.push(Ya(d));e()},d)},function(d){a.sort();if("application/nquads"===b.options.format)return c=a.join(""),d();c=Xa(a.join(""));d()}],d)}],function(d){a(d,c)})};
a.prototype.hashFirstDegreeQuads=function(d,a){var b=this,c=b.blankNodeInfo[d];if("hash"in c)return a(null,c.hash);var e=[];b.forEach(c.quads,function(a,c,k){var h={predicate:a.predicate};b.forEachComponent(a,function(a,c){h[c]=b.modifyFirstDegreeComponent(d,a,c)});e.push(Ya(h));k()},function(d){if(d)return a(d);e.sort();c.hash=pa.hashNQuads(b.name,e);a(null,c.hash)})};a.prototype.modifyFirstDegreeComponent=function(d,a){if("blank node"!==a.type)return a;a=X(a);a.value=a.value===d?"_:a":"_:z";return a};
a.prototype.hashRelatedBlankNode=function(d,a,b,c,e){var k=this,h;k.waterfall([function(a){if(k.canonicalIssuer.hasId(d))return h=k.canonicalIssuer.getId(d),a();if(b.hasId(d))return h=b.getId(d),a();k.hashFirstDegreeQuads(d,function(d,b){if(d)return a(d);h=b;a()})}],function(d){if(d)return e(d);d=new pa(k.name);d.update(c);"g"!==c&&d.update(k.getRelatedPredicate(a));d.update(h);return e(null,d.digest())})};a.prototype.getRelatedPredicate=function(d){return"<"+d.predicate.value+">"};a.prototype.hashNDegreeQuads=
function(d,a,b){var c=this,e,k=new pa(c.name);c.waterfall([function(b){c.createHashToRelated(d,a,function(d,a){if(d)return b(d);e=a;b()})},function(d){var b=Object.keys(e).sort();c.forEach(b,function(d,b,h){k.update(d);var l="",m,n=new tb(e[d]);c.whilst(function(){return n.hasNext()},function(d){var b=n.next(),e=a.clone(),k="",h=[];c.waterfall([function(a){c.forEach(b,function(a,b,m){c.canonicalIssuer.hasId(a)?k+=c.canonicalIssuer.getId(a):(e.hasId(a)||h.push(a),k+=e.getId(a));if(0!==l.length&&k.length>=
l.length&&k>l)return d();m()},a)},function(a){c.forEach(h,function(a,b,h){c.hashNDegreeQuads(a,e,function(b,c){if(b)return h(b);k+=e.getId(a);k+="<"+c.hash+">";e=c.issuer;if(0!==l.length&&k.length>=l.length&&k>l)return d();h()})},a)},function(d){if(0===l.length||k<l)l=k,m=e;d()}],d)},function(d){if(d)return h(d);k.update(l);a=m;h()})},d)}],function(d){b(d,{hash:k.digest(),issuer:a})})};a.prototype.createHashToRelated=function(a,b,c){var e=this,k={};e.forEach(e.blankNodeInfo[a].quads,function(c,h,
l){e.forEach(c,function(h,l,m){if("predicate"===l||"blank node"!==h.type||h.value===a)return m();var n=h.value;e.hashRelatedBlankNode(n,c,b,d[l],function(d,a){if(d)return m(d);a in k?k[a].push(n):k[a]=[n];m()})},l)},function(d){c(d,k)})};a.prototype.forEachComponent=function(d,a){for(var b in d)"predicate"!==b&&a(d[b],b,d)};return a}(),Kb=function(){var d=function(d){$a.call(this,d);this.name="URGNA2012"};d.prototype=new $a;d.prototype.modifyFirstDegreeComponent=function(d,a,b){if("blank node"!==
a.type)return a;a=X(a);a.value="name"===b?"_:g":a.value===d?"_:a":"_:z";return a};d.prototype.getRelatedPredicate=function(d){return d.predicate.value};d.prototype.createHashToRelated=function(d,a,b){var c=this,e={};c.forEach(c.blankNodeInfo[d].quads,function(b,k,h){var l;if("blank node"===b.subject.type&&b.subject.value!==d)l=b.subject.value,k="p";else if("blank node"===b.object.type&&b.object.value!==d)l=b.object.value,k="r";else return h();c.hashRelatedBlankNode(l,b,a,k,function(d,a){a in e?e[a].push(l):
e[a]=[l];h()})},function(d){b(d,e)})};return d}();Object.keys||(Object.keys=function(d){if(d!==Object(d))throw new TypeError("Object.keys called on non-object");var a=[],b;for(b in d)Object.prototype.hasOwnProperty.call(d,b)&&a.push(b);return a});e.registerRDFParser("application/nquads",Xa);e.registerRDFParser("rdfa-api",function(d){for(var a={"@default":[]},b=d.getSubjects(),c=0;c<b.length;++c){var e=b[c];if(null!==e){var k=d.getSubjectTriples(e);if(null!==k){var k=k.predicates,h;for(h in k)for(var l=
k[h].objects,m=0;m<l.length;++m){var n=l[m],v={};0===e.indexOf("_:")?v.subject={type:"blank node",value:e}:v.subject={type:"IRI",value:e};0===h.indexOf("_:")?v.predicate={type:"blank node",value:h}:v.predicate={type:"IRI",value:h};var w=n.value;if("http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"===n.type){Za||(Za=x("xmldom").XMLSerializer);for(var u=new Za,w="",y=0;y<n.value.length;y++)n.value[y].nodeType===sb.ELEMENT_NODE?w+=u.serializeToString(n.value[y]):n.value[y].nodeType===sb.TEXT_NODE&&
(w+=n.value[y].nodeValue)}v.object={};"http://www.w3.org/1999/02/22-rdf-syntax-ns#object"===n.type?0===n.value.indexOf("_:")?v.object.type="blank node":v.object.type="IRI":(v.object.type="literal","http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral"===n.type?n.language?(v.object.datatype=Ea,v.object.language=n.language):v.object.datatype=xa:v.object.datatype=n.type);v.object.value=w;a["@default"].push(v)}}}}return a});e.IdentifierIssuer=ga;e.UniqueNamer=ga;ga.prototype.clone=function(){var d=
new ga(this.prefix);d.counter=this.counter;d.existing=X(this.existing);return d};ga.prototype.getId=function(d){if(d&&d in this.existing)return this.existing[d];var a=this.prefix+this.counter;this.counter+=1;d&&(this.existing[d]=a);return a};ga.prototype.getName=ga.prototype.getName;ga.prototype.hasId=function(d){return d in this.existing};ga.prototype.isNamed=ga.prototype.hasId;var tb=function(d){this.list=d.sort();this.done=!1;this.left={};for(var a=0;a<d.length;++a)this.left[d[a]]=!0};tb.prototype.hasNext=
function(){return!this.done};tb.prototype.next=function(){for(var d=this.list.slice(),a=null,b=0,c=this.list.length,e=0;e<c;++e){var k=this.list[e],h=this.left[k];(null===a||k>a)&&(h&&0<e&&k>this.list[e-1]||!h&&e<c-1&&k>this.list[e+1])&&(a=k,b=e)}if(null===a)this.done=!0;else for(e=this.left[a]?b-1:b+1,this.list[b]=this.list[e],this.list[e]=a,e=0;e<c;++e)this.list[e]>a&&(this.left[this.list[e]]=!this.left[this.list[e]]);return d};var pa=function(d){if(!(this instanceof pa))return new pa(d);if(-1===
["URDNA2015","URGNA2012"].indexOf(d))throw Error("Invalid RDF Dataset Normalization algorithm: "+d);pa._init.call(this,d)};pa.hashNQuads=function(d,a){for(var b=new pa(d),c=0;c<a.length;++c)b.update(a[c]);return b.digest()};(function(d){if(d){var a=x("crypto");pa._init=function(d){this.md=a.createHash("URDNA2015"===d?"sha256":"sha1")};pa.prototype.update=function(d){return this.md.update(d,"utf8")};pa.prototype.digest=function(){return this.md.digest("hex")}}else{pa._init=function(d){d="URDNA2015"===
d?new e.Algorithm:new c.Algorithm;this.md=new b(d)};pa.prototype.update=function(d){return this.md.update(d)};pa.prototype.digest=function(){return this.md.digest().toHex()};var b=function(d){if(!(this instanceof b))return new b(d);this._algorithm=d;if(!b._padding||b._padding.length<this._algorithm.blockSize){b._padding=String.fromCharCode(128);d=String.fromCharCode(0);for(var a=64;0<a;)a&1&&(b._padding+=d),a>>>=1,0<a&&(d+=d)}this.start()};b.prototype.start=function(){this.messageLength=0;this.fullMessageLength=
[];for(var d=this._algorithm.messageLengthSize/4,a=0;a<d;++a)this.fullMessageLength.push(0);this._input=new b.ByteBuffer;this.state=this._algorithm.start();return this};b.prototype.update=function(d){d=new b.ByteBuffer(unescape(encodeURIComponent(d)));this.messageLength+=d.length();for(var a=d.length(),a=[a/4294967296>>>0,a>>>0],c=this.fullMessageLength.length-1;0<=c;--c)this.fullMessageLength[c]+=a[1],a[1]=a[0]+(this.fullMessageLength[c]/4294967296>>>0),this.fullMessageLength[c]>>>=0,a[0]=a[1]/4294967296>>>
0;for(this._input.putBytes(d.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);(2048<this._input.read||0===this._input.length())&&this._input.compact();return this};b.prototype.digest=function(){var d=new b.ByteBuffer;d.putBytes(this._input.bytes());d.putBytes(b._padding.substr(0,this._algorithm.blockSize-(this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize&this._algorithm.blockSize-1)));for(var a=
new b.ByteBuffer,c=0;c<this.fullMessageLength.length;++c)a.putInt32(this.fullMessageLength[c]<<3|this.fullMessageLength[c+1]>>>28);this._algorithm.writeMessageLength(d,a);d=this._algorithm.digest(this.state.copy(),d);a=new b.ByteBuffer;d.write(a);return a};b.ByteBuffer=function(d){this.data="string"===typeof d?d:"";this.read=0};b.ByteBuffer.prototype.putInt32=function(d){this.data+=String.fromCharCode(d>>24&255)+String.fromCharCode(d>>16&255)+String.fromCharCode(d>>8&255)+String.fromCharCode(d&255)};
b.ByteBuffer.prototype.getInt32=function(){var d=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);this.read+=4;return d};b.ByteBuffer.prototype.putBytes=function(d){this.data+=d};b.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)};b.ByteBuffer.prototype.length=function(){return this.data.length-this.read};b.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read);
this.read=0};b.ByteBuffer.prototype.toHex=function(){for(var d="",a=this.read;a<this.data.length;++a){var b=this.data.charCodeAt(a);16>b&&(d+="0");d+=b.toString(16)}return d};var c={_w:null,Algorithm:function(){this.name="sha1";this.blockSize=64;this.digestLength=20;this.messageLengthSize=8}};c.Algorithm.prototype.start=function(){c._w||(c._w=Array(80));return c._createState()};c.Algorithm.prototype.writeMessageLength=function(d,a){d.putBytes(a.bytes())};c.Algorithm.prototype.digest=function(d,a){for(var b,
e,k,h,l,m,n,v,w=a.length(),u=c._w;64<=w;){e=d.h0;k=d.h1;h=d.h2;l=d.h3;m=d.h4;for(v=0;16>v;++v)b=a.getInt32(),u[v]=b,n=l^k&(h^l),b=(e<<5|e>>>27)+n+m+1518500249+b,m=l,l=h,h=k<<30|k>>>2,k=e,e=b;for(;20>v;++v)b=u[v-3]^u[v-8]^u[v-14]^u[v-16],b=b<<1|b>>>31,u[v]=b,n=l^k&(h^l),b=(e<<5|e>>>27)+n+m+1518500249+b,m=l,l=h,h=k<<30|k>>>2,k=e,e=b;for(;32>v;++v)b=u[v-3]^u[v-8]^u[v-14]^u[v-16],b=b<<1|b>>>31,u[v]=b,n=k^h^l,b=(e<<5|e>>>27)+n+m+1859775393+b,m=l,l=h,h=k<<30|k>>>2,k=e,e=b;for(;40>v;++v)b=u[v-6]^u[v-16]^
u[v-28]^u[v-32],b=b<<2|b>>>30,u[v]=b,n=k^h^l,b=(e<<5|e>>>27)+n+m+1859775393+b,m=l,l=h,h=k<<30|k>>>2,k=e,e=b;for(;60>v;++v)b=u[v-6]^u[v-16]^u[v-28]^u[v-32],b=b<<2|b>>>30,u[v]=b,n=k&h|l&(k^h),b=(e<<5|e>>>27)+n+m+2400959708+b,m=l,l=h,h=k<<30|k>>>2,k=e,e=b;for(;80>v;++v)b=u[v-6]^u[v-16]^u[v-28]^u[v-32],b=b<<2|b>>>30,u[v]=b,n=k^h^l,b=(e<<5|e>>>27)+n+m+3395469782+b,m=l,l=h,h=k<<30|k>>>2,k=e,e=b;d.h0=d.h0+e|0;d.h1=d.h1+k|0;d.h2=d.h2+h|0;d.h3=d.h3+l|0;d.h4=d.h4+m|0;w-=64}return d};c._createState=function(){var d=
{h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520,copy:function(){var a=c._createState();a.h0=d.h0;a.h1=d.h1;a.h2=d.h2;a.h3=d.h3;a.h4=d.h4;return a},write:function(a){a.putInt32(d.h0);a.putInt32(d.h1);a.putInt32(d.h2);a.putInt32(d.h3);a.putInt32(d.h4)}};return d};var e={_k:null,_w:null,Algorithm:function(){this.name="sha256";this.blockSize=64;this.digestLength=32;this.messageLengthSize=8}};e.Algorithm.prototype.start=function(){e._k||e._init();return e._createState()};e.Algorithm.prototype.writeMessageLength=
function(d,a){d.putBytes(a.bytes())};e.Algorithm.prototype.digest=function(d,a){for(var b,c,k,h,l,m,n,v,w,u,y,t,D,A=a.length(),I=e._k,x=e._w;64<=A;){for(l=0;16>l;++l)x[l]=a.getInt32();for(;64>l;++l)b=x[l-2],b=(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10,c=x[l-15],c=(c>>>7|c<<25)^(c>>>18|c<<14)^c>>>3,x[l]=b+x[l-7]+c+x[l-16]|0;m=d.h0;n=d.h1;v=d.h2;w=d.h3;u=d.h4;y=d.h5;t=d.h6;D=d.h7;for(l=0;64>l;++l)b=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),k=t^u&(y^t),c=(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10),h=m&n|
v&(m^n),b=D+b+k+I[l]+x[l],c+=h,D=t,t=y,y=u,u=w+b|0,w=v,v=n,n=m,m=b+c|0;d.h0=d.h0+m|0;d.h1=d.h1+n|0;d.h2=d.h2+v|0;d.h3=d.h3+w|0;d.h4=d.h4+u|0;d.h5=d.h5+y|0;d.h6=d.h6+t|0;d.h7=d.h7+D|0;A-=64}return d};e._createState=function(){var d={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225,copy:function(){var a=e._createState();a.h0=d.h0;a.h1=d.h1;a.h2=d.h2;a.h3=d.h3;a.h4=d.h4;a.h5=d.h5;a.h6=d.h6;a.h7=d.h7;return a},write:function(a){a.putInt32(d.h0);
a.putInt32(d.h1);a.putInt32(d.h2);a.putInt32(d.h3);a.putInt32(d.h4);a.putInt32(d.h5);a.putInt32(d.h6);a.putInt32(d.h7)}};return d};e._init=function(){e._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,
773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];e._w=Array(64)}}})(b);e.url={};e.url.parsers={simple:{keys:"href scheme authority path query fragment".split(" "),regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},
full:{keys:"href protocol scheme authority auth user password hostname port path directory file query fragment".split(" "),regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};e.url.parse=function(d,a){for(var b={},c=e.url.parsers[a||"full"],k=c.regex.exec(d),h=c.keys.length;h--;)b[c.keys[h]]=void 0===k[h]?null:k[h];b.normalizedPath=Ib(b.path,!!b.authority);return b};b?e.useDocumentLoader("node"):"undefined"!==
typeof XMLHttpRequest&&e.useDocumentLoader("xhr");b&&(e.use=function(d){switch(d){case "request":e.request=x("jsonld-request");break;default:throw new F("Unknown extension.","jsonld.UnknownExtension",{extension:d});}},oa={exports:{},filename:c},x("pkginfo")(oa,"version"),e.version=oa.exports.version);return e},h=function(){return e(function(){return h()})};e(h);"function"===typeof x&&"undefined"!==typeof C&&C.exports&&(C.exports=h);a&&("undefined"===typeof jsonld?jsonld=jsonldjs=h:jsonldjs=h);return h})()}).call(this,
x("VCmEsw"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},"/..\\node_modules\\jsonld\\js")},{VCmEsw:12,crypto:29,"es6-promise":31,http:29,"jsonld-request":29,pkginfo:29,request:29,util:29,xmldom:29}],31:[function(x,C,B){(function(t,k){(function(){function c(d){return"function"===typeof d}function b(){var a=t.nextTick,b=t.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);Array.isArray(b)&&"0"===b[1]&&"10"===b[2]&&(a=setImmediate);return function(){a(d)}}function a(){return function(){Ba(d)}}
function e(){var a=0,b=new Aa(d),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function h(){var a=new MessageChannel;a.port1.onmessage=d;return function(){a.port2.postMessage(0)}}function l(){return function(){setTimeout(d,1)}}function d(){for(var d=0;d<ea;d+=2)(0,da[d])(da[d+1]),da[d]=void 0,da[d+1]=void 0;ea=0}function m(){try{var d=x("vertx");Ba=d.runOnLoop||d.runOnContext;return a()}catch(Qa){return l()}}function v(){}function w(d,a,b,c){try{d.call(a,
b,c)}catch(Ya){return Ya}}function n(d,a,b){J(function(d){var c=!1,e=w(b,a,function(b){c||(c=!0,a!==b?D(d,b):A(d,b))},function(a){c||(c=!0,G(d,a))},"Settle: "+(d._label||" unknown promise"));!c&&e&&(c=!0,G(d,e))},d)}function y(d,a){1===a._state?A(d,a._result):2===a._state?G(d,a._result):I(a,void 0,function(a){D(d,a)},function(a){G(d,a)})}function D(d,a){if(d===a)G(d,new TypeError("You cannot resolve a promise with itself"));else if("function"===typeof a||"object"===typeof a&&null!==a)if(a.constructor===
d.constructor)y(d,a);else{var b;try{b=a.then}catch(Xa){fa.error=Xa,b=fa}b===fa?G(d,fa.error):void 0===b?A(d,a):c(b)?n(d,a,b):A(d,a)}else A(d,a)}function u(d){d._onerror&&d._onerror(d._result);O(d)}function A(d,a){void 0===d._state&&(d._result=a,d._state=1,0!==d._subscribers.length&&J(O,d))}function G(d,a){void 0===d._state&&(d._state=2,d._result=a,J(u,d))}function I(d,a,b,c){var e=d._subscribers,k=e.length;d._onerror=null;e[k]=a;e[k+1]=b;e[k+2]=c;0===k&&d._state&&J(O,d)}function O(d){var a=d._subscribers,
b=d._state;if(0!==a.length){for(var c,e,k=d._result,h=0;h<a.length;h+=3)c=a[h],e=a[h+b],c?ia(b,c,e,k):e(k);d._subscribers.length=0}}function L(){this.error=null}function ia(d,a,b,e){var k=c(b),h,l,m,n;if(k){try{h=b(e)}catch(Ra){Da.error=Ra,h=Da}h===Da?(n=!0,l=h.error,h=null):m=!0;if(a===h){G(a,new TypeError("A promises callback cannot return that same promise."));return}}else h=e,m=!0;void 0===a._state&&(k&&m?D(a,h):n?G(a,l):1===d?A(a,h):2===d&&G(a,h))}function R(d,a){try{a(function(a){D(d,a)},function(a){G(d,
a)})}catch(Ga){G(d,Ga)}}function B(d,a){this._instanceConstructor=d;this.promise=new d(v);this._validateInput(a)?(this._input=a,this._remaining=this.length=a.length,this._init(),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):G(this.promise,this._validationError())}function N(d){this._id=ka++;this._result=this._state=void 0;this._subscribers=[];if(v!==d){if(!c(d))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
if(!(this instanceof N))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");R(this,d)}}var E=Array.isArray?Array.isArray:function(d){return"[object Array]"===Object.prototype.toString.call(d)},ea=0,Ba,H,J=function(a,b){da[ea]=a;da[ea+1]=b;ea+=2;2===ea&&(H?H(d):ja())},S="undefined"!==typeof window?window:void 0,wa=S||{},Aa=wa.MutationObserver||wa.WebKitMutationObserver,wa="undefined"!==typeof t&&"[object process]"===
{}.toString.call(t),Y="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,da=Array(1E3),ja;ja=wa?b():Aa?e():Y?h():void 0===S&&"function"===typeof x?m():l();var fa=new L,Da=new L;B.prototype._validateInput=function(d){return E(d)};B.prototype._validationError=function(){return Error("Array Methods must be provided an Array")};B.prototype._init=function(){this._result=Array(this.length)};B.prototype._enumerate=function(){for(var d=this.length,
a=this.promise,b=this._input,c=0;void 0===a._state&&c<d;c++)this._eachEntry(b[c],c)};B.prototype._eachEntry=function(d,a){var b=this._instanceConstructor;"object"===typeof d&&null!==d?d.constructor===b&&void 0!==d._state?(d._onerror=null,this._settledAt(d._state,a,d._result)):this._willSettleAt(b.resolve(d),a):(this._remaining--,this._result[a]=d)};B.prototype._settledAt=function(d,a,b){var c=this.promise;void 0===c._state&&(this._remaining--,2===d?G(c,b):this._result[a]=b);0===this._remaining&&A(c,
this._result)};B.prototype._willSettleAt=function(d,a){var b=this;I(d,void 0,function(d){b._settledAt(1,a,d)},function(d){b._settledAt(2,a,d)})};var ka=0;N.all=function(d){return(new B(this,d)).promise};N.race=function(d){function a(d){D(c,d)}function b(d){G(c,d)}var c=new this(v);if(!E(d))return G(c,new TypeError("You must pass an array to race.")),c;for(var e=d.length,k=0;void 0===c._state&&k<e;k++)I(this.resolve(d[k]),void 0,a,b);return c};N.resolve=function(d){if(d&&"object"===typeof d&&d.constructor===
this)return d;var a=new this(v);D(a,d);return a};N.reject=function(d){var a=new this(v);G(a,d);return a};N._setScheduler=function(d){H=d};N._setAsap=function(d){J=d};N._asap=J;N.prototype={constructor:N,then:function(d,a){var b=this._state;if(1===b&&!d||2===b&&!a)return this;var c=new this.constructor(v),e=this._result;if(b){var k=arguments[b-1];J(function(){ia(b,c,k,e)})}else I(this,c,d,a);return c},"catch":function(d){return this.then(null,d)}};S=function(){var d;if("undefined"!==typeof k)d=k;else if("undefined"!==
typeof self)d=self;else try{d=Function("return this")()}catch(Ga){throw Error("polyfill failed because global object is unavailable in this environment");}var a=d.Promise;if(!a||"[object Promise]"!==Object.prototype.toString.call(a.resolve())||a.cast)d.Promise=N};wa={Promise:N,polyfill:S};"undefined"!==typeof C&&C.exports?C.exports=wa:"undefined"!==typeof this&&(this.ES6Promise=wa);S()}).call(this)}).call(this,x("VCmEsw"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{VCmEsw:12}],
32:[function(x,C,B){var t=x;x=function(){};B=C.exports={Lexer:x("./lib/N3Lexer"),Parser:x("./lib/N3Parser"),Writer:x("./lib/N3Writer"),Store:x("./lib/N3Store"),StreamParser:x("./lib/N3StreamParser"),StreamWriter:x("./lib/N3StreamWriter"),Util:x("./lib/N3Util")};Object.keys(B).forEach(function(k){Object.defineProperty(B,k,{configurable:!0,enumerable:!0,get:function(){delete B[k];return B[k]=t("./lib/N3"+k)}})})},{"./lib/N3Lexer":33,"./lib/N3Parser":34,"./lib/N3Store":35,"./lib/N3StreamParser":36,"./lib/N3StreamWriter":37,
"./lib/N3Util":38,"./lib/N3Writer":39}],33:[function(x,C,B){function t(a){if(!(this instanceof t))return new t(a);if(a&&a.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var b=this;this._tokenize=this.tokenize;this.tokenize=function(d,a){this._tokenize(d,function(d,c){!d&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(c.type)?a&&a(d,c):a&&a(d||b._syntaxError(c.type,a=null))})}}}var k=String.fromCharCode,c="function"===typeof setImmediate?setImmediate:function(a){setTimeout(a,
0)},b=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,a={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},e=/[\x00-\x20<>\\"\{\}\|\^\`]/;t.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,
_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,
_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,
_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,
_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(a,b){function d(d){a(d._syntaxError(/^\S*/.exec(c)[0]))}for(var c=this._input;;){for(var k;k=this._newline.exec(c);)c=c.substr(k[0].length,c.length),this._line++;if(k=this._whitespace.exec(c))c=c.substr(k[0].length,c.length);if(this._endOfFile.test(c))return b&&
a(c=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=c;k=this._line;var h="",l="",y="",t=c[0],u=null,A=0,x=!1;switch(t){case "^":if(1===c.length)break;else if("^"!==c[1])return d(this);this._prevTokenType="^";c=c.substr(2);if("<"!==c[0]){x=!0;break}case "<":if(u=this._unescapedIri.exec(c))h="IRI",l=u[1];else if(u=this._iri.exec(c)){l=this._unescape(u[1]);if(null===l||e.test(l))return d(this);h="IRI"}break;case "_":if((u=this._blank.exec(c))||b&&(u=this._blank.exec(c+" ")))h="prefixed",
y="_",l=u[1];break;case '"':case "'":if(u=this._unescapedString.exec(c))h="literal",l=u[0];else if(u=this._singleQuotedString.exec(c)){l=this._unescape(u[0]);if(null===l)return d(this);h="literal";l=l.replace(/^'|'$/g,'"')}else if(u=this._tripleQuotedString.exec(c)){l=u[1]||u[2];this._line+=l.split(/\r\n|\r|\n/).length-1;l=this._unescape(l);if(null===l)return d(this);h="literal";l=l.replace(/^'|'$/g,'"')}break;case "@":if("literal"===this._prevTokenType&&(u=this._langcode.exec(c)))h="langcode",l=
u[1];else if(u=this._keyword.exec(c))h=u[0];break;case ".":if(1===c.length?b:"0">c[1]||"9"<c[1]){h=".";A=1;break}case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "+":case "-":if(u=this._number.exec(c))h="literal",l='"'+u[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(u[1]?"double":/^[+\-]?\d+$/.test(u[0])?"integer":"decimal");break;case "B":case "b":case "p":case "P":case "G":case "g":(u=this._sparqlKeyword.exec(c))?h=u[0].toUpperCase():x=!0;break;case "f":case "t":(u=
this._boolean.exec(c))?(h="literal",l='"'+u[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):x=!0;break;case "a":(u=this._shortPredicates.exec(c))?(h="abbreviation",l="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):x=!0;break;case ",":case ";":case "[":case "]":case "(":case ")":case "{":case "}":A=1;h=t;break;default:x=!0}if(x)if(("@prefix"===this._prevTokenType||"PREFIX"===this._prevTokenType)&&(u=this._prefix.exec(c)))h="prefix",l=u[1]||"";else if((u=this._prefixed.exec(c))||b&&(u=this._prefixed.exec(c+
" ")))h="prefixed",y=u[1]||"",l=this._unescape(u[2]);"^"===this._prevTokenType&&(h="IRI"===h||"prefixed"===h?"type":"");if(!h)return b||!/^'''|^"""/.test(c)&&/\n|\r/.test(c)?d(this):this._input=c;a(null,{line:k,type:h,value:l,prefix:y});this._prevTokenType=h;c=c.substr(A||u[0].length,c.length)}},_unescape:function(c){try{return c.replace(b,function(b,d,c,e){if(d){b=parseInt(d,16);if(isNaN(b))throw Error();return k(b)}if(c){b=parseInt(c,16);if(isNaN(b))throw Error();return 65535>=b?k(b):k(55296+(b-=
65536)/1024,56320+(b&1023))}b=a[e];if(!b)throw Error();return b})}catch(l){return null}},_syntaxError:function(a){this._input=null;return Error('Syntax error: unexpected "'+a+'" on line '+this._line+".")},tokenize:function(a,b){function d(d){null!==k._input&&(k._input+=d,k._tokenizeToEnd(b,!1))}function e(){null!==k._input&&k._tokenizeToEnd(b,!0)}var k=this;this._line=1;"string"===typeof a?(this._input=a,c(function(){k._tokenizeToEnd(b,!0)})):(this._input="",a&&"function"!==typeof a?("function"===
typeof a.setEncoding&&a.setEncoding("utf8"),a.on("data",d),a.on("end",e)):(this.addChunk=d,this.end=e,b||(b=a)))}};C.exports=t},{}],34:[function(x,C,B){function t(d){if(!(this instanceof t))return new t(d);this._tripleStack=[];this._graph=null;d=d||{};this._setBase(d.documentIRI);var a="string"===typeof d.format&&d.format.match(/\w*$/)[0].toLowerCase(),b="turtle"===a,e="trig"===a,h=/triple/.test(a),a=/quad/.test(a),a=h||a;(this._supportsNamedGraphs=!b)||(this._readPredicateOrNamedGraph=this._readPredicate);
this._supportsQuads=!(b||e||h);a&&(this._base="",this._resolveIRI=function(d){this._error("Disallowed relative IRI",d);return this._callback=k,this._subject=null});this._blankNodePrefix="string"!==typeof d.blankNodePrefix?"":"_:"+d.blankNodePrefix.replace(/^_:/,"");this._lexer=d.lexer||new c({lineMode:a})}function k(){}var c=x("./N3Lexer"),b=/^[a-z][a-z0-9+.-]*:/i,a=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,e=/(?:^|\/)\.\.?(?:$|[\/#?])/,h=0,l=0;t._resetBlankNodeIds=function(){h=l=0};t.prototype=
{_setBase:function(d){if(!d)d=null;else if(0<=d.indexOf("#"))throw Error("Invalid base IRI "+d);if(this._base=d)this._basePath=d.replace(/[^\/?]*(?:\?.*)?$/,""),d=d.match(a),this._baseRoot=d[0],this._baseScheme=d[1]},_readInTopContext:function(d){switch(d.type){case "eof":if(null!==this._graph)return this._error("Unclosed graph",d);delete this._prefixes._;return this._callback(null,null,this._prefixes);case "@prefix":return this._sparqlStyle=!1,this._readPrefix;case "PREFIX":return this._sparqlStyle=
!0,this._readPrefix;case "@base":return this._sparqlStyle=!1,this._readBaseIRI;case "BASE":return this._sparqlStyle=!0,this._readBaseIRI;case "{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case "GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(d)}},_readSubject:function(d){this._predicate=null;switch(d.type){case "IRI":null===this._base||b.test(d.value)?this._subject=d.value:this._subject=this._resolveIRI(d);
break;case "prefixed":var a=this._prefixes[d.prefix];if(void 0===a)return this._error('Undefined prefix "'+d.prefix+':"',d);this._subject=a+d.value;break;case "[":return this._subject="_:b"+l++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case "(":return this._tripleStack.push({subject:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case "}":return this._readPunctuation(d);
default:return this._error("Expected subject but got "+d.type,d)}return this._readPredicateOrNamedGraph},_readPredicate:function(d){var a=d.type;switch(a){case "IRI":case "abbreviation":null===this._base||b.test(d.value)?this._predicate=d.value:this._predicate=this._resolveIRI(d);break;case "prefixed":if("_"===d.prefix)return this._error("Disallowed blank node as predicate",d);a=this._prefixes[d.prefix];if(void 0===a)return this._error('Undefined prefix "'+d.prefix+':"',d);this._predicate=a+d.value;
break;case ".":case "]":case "}":if(null===this._predicate)return this._error("Unexpected "+a,d);this._subject=null;return"]"===a?this._readBlankNodeTail(d):this._readPunctuation(d);case ";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',d)}return this._readObject},_readObject:function(d){switch(d.type){case "IRI":null===this._base||b.test(d.value)?this._object=d.value:this._object=this._resolveIRI(d);break;case "prefixed":var a=this._prefixes[d.prefix];
if(void 0===a)return this._error('Undefined prefix "'+d.prefix+':"',d);this._object=a+d.value;break;case "literal":return this._object=d.value,this._readDataTypeOrLang;case "[":return d="_:b"+l++,this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:d,type:"blank"}),this._subject=d,this._readBlankNodeHead;case "(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",type:"list"}),this._subject=
null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',d)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(d){return"{"===d.type?this._readGraph(d):this._readPredicate(d)},_readGraph:function(d){if("{"!==d.type)return this._error("Expected graph but got "+d.type,d);this._graph=this._subject;this._subject=null;return this._readSubject},_readBlankNodeHead:function(d){if("]"===d.type)return this._subject=null,this._readBlankNodeTail(d);
this._predicate=null;return this._readPredicate(d)},_readBlankNodeTail:function(d){if("]"!==d.type)return this._readBlankNodePunctuation(d);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});d=this._tripleStack.pop();this._subject=d.subject;return null!==d.object?(this._predicate=d.predicate,this._object=d.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},
_readDataTypeOrLang:function(d){switch(d.type){case "type":if(""===d.prefix)d=null===this._base||b.test(d.value)?d.value:this._resolveIRI(d);else{var a=this._prefixes[d.prefix];if(void 0===a)return this._error('Undefined prefix "'+d.prefix+':"',d);d=a+d.value}this._object+="^^"+d;return this._getTripleEndReader();case "langcode":return this._object+="@"+d.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,d)}},_readListItem:function(d){var a=null,c=
null,e=this._subject,k=this._tripleStack,h=k[k.length-1],t=this._readListItem;switch(d.type){case "IRI":a=null===this._base||b.test(d.value)?d.value:this._resolveIRI(d);break;case "prefixed":a=this._prefixes[d.prefix];if(void 0===a)return this._error('Undefined prefix "'+d.prefix+':"',d);a+=d.value;break;case "literal":a=d.value;t=this._readDataTypeOrLang;break;case "[":c="_:b"+l++;a="_:b"+l++;k.push({subject:c,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",object:a,type:"blank"});this._subject=
a;t=this._readBlankNodeHead;break;case "(":c="_:b"+l++;k.push({subject:c,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",object:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",type:"list"});this._subject=null;t=this._readListItem;break;case ")":k.pop();0!==k.length&&"list"===k[k.length-1].type&&this._callback(null,{subject:h.subject,predicate:h.predicate,object:h.object,graph:this._graph||""});this._subject=h.subject;if(null===h.predicate){if(t=this._readPredicate,"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===
h.subject)return t}else if(this._predicate=h.predicate,this._object=h.object,t=this._getTripleEndReader(),"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===h.object)return t;c="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil";break;default:return this._error('Expected list item instead of "'+d.type+'"',d)}null===c&&(this._subject=c="_:b"+l++);null===e?"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===h.object?h.object=c:h.subject=c:this._callback(null,{subject:e,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",
object:c,graph:this._graph||""});null!==a&&this._callback(null,{subject:c,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",object:a,graph:this._graph||""});return t},_readPunctuation:function(d){var a=this._subject,c=this._graph;switch(d.type){case "}":if(null===this._graph)return this._error("Unexpected graph closing",d);this._graph=null;case ".":this._subject=null;d=this._readInTopContext;break;case ";":d=this._readPredicate;break;case ",":d=this._readObject;break;case "IRI":if(this._supportsQuads&&
null===this._graph){c=null===this._base||b.test(d.value)?d.value:this._resolveIRI(d);a=this._subject;d=this._readQuadPunctuation;break}case "prefixed":if(this._supportsQuads&&null===this._graph){c=this._prefixes[d.prefix];if(void 0===c)return this._error('Undefined prefix "'+d.prefix+':"',d);c+=d.value;d=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',d)}null!==a&&this._callback(null,{subject:a,predicate:this._predicate,object:this._object,
graph:c||""});return d},_readBlankNodePunctuation:function(d){switch(d.type){case ";":d=this._readPredicate;break;case ",":d=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',d)}this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});return d},_readQuadPunctuation:function(d){return"."!==d.type?this._error("Expected dot to follow quad",d):this._readInTopContext},_readPrefix:function(d){if("prefix"!==
d.type)return this._error("Expected prefix to follow @prefix",d);this._prefix=d.value;return this._readPrefixIRI},_readPrefixIRI:function(d){if("IRI"!==d.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',d);d=null===this._base||b.test(d.value)?d.value:this._resolveIRI(d);this._prefixes[this._prefix]=d;this._prefixCallback(this._prefix,d);return this._readDeclarationPunctuation},_readBaseIRI:function(d){if("IRI"!==d.type)return this._error("Expected IRI to follow base declaration",
d);try{this._setBase(null===this._base||b.test(d.value)?d.value:this._resolveIRI(d))}catch(m){this._error(m.message,d)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(d){switch(d.type){case "IRI":case "prefixed":return this._readSubject(d),this._readGraph;case "[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",d)}},_readNamedGraphBlankLabel:function(d){if("]"!==d.type)return this._error("Invalid graph label",d);this._subject="_:b"+l++;
return this._readGraph},_readDeclarationPunctuation:function(d){return this._sparqlStyle?this._readInTopContext(d):"."!==d.type?this._error("Expected declaration to end with a dot",d):this._readInTopContext},_getTripleEndReader:function(){var d=this._tripleStack;if(0===d.length)return this._readPunctuation;switch(d[d.length-1].type){case "blank":return this._readBlankNodeTail;case "list":return this._readListItem}},_error:function(d,a){this._callback(Error(d+" at line "+a.line+"."))},_resolveIRI:function(d){d=
d.value;switch(d[0]){case void 0:return this._base;case "#":return this._base+d;case "?":return this._base.replace(/(?:\?.*)?$/,d);case "/":return("/"===d[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(d);default:return this._removeDotSegments(this._basePath+d)}},_removeDotSegments:function(d){if(!e.test(d))return d;for(var a="",b=d.length,c=-1,k=-1,h=0,l="/";c<b;){switch(l){case ":":if(0>k&&"/"===d[++c]&&"/"===d[++c])for(;(k=c+1)<b&&"/"!==d[k];)c=k;break;case "?":case "#":c=b;break;
case "/":if("."===d[c+1])switch(l=d[++c+1],l){case "/":a+=d.substring(h,c-1);h=c+1;break;case void 0:case "?":case "#":return a+d.substring(h,c)+d.substr(c+1);case ".":if(l=d[++c+1],void 0===l||"/"===l||"?"===l||"#"===l){a+=d.substring(h,c-2);(h=a.lastIndexOf("/"))>=k&&(a=a.substr(0,h));if("/"!==l)return a+"/"+d.substr(c+1);h=c+1}}}l=d[++c]}return a+d.substring(h)},parse:function(d,a,b){this._readCallback=this._readInTopContext;this._prefixes=Object.create(null);this._prefixes._=this._blankNodePrefix||
"_:b"+h++ +"_";"function"===typeof d&&(b=a,a=d,d=null);this._callback=a||k;this._prefixCallback=b||k;var c=this;this._lexer.tokenize(d,function(d,a){null!==d?(c._callback(d),c._callback=k):void 0!==c._readCallback&&(c._readCallback=c._readCallback(a))});d||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}};C.exports=t},{"./N3Lexer":33}],35:[function(x,C,B){function t(c,b){if(!(this instanceof t))return new t(c,b);this._size=0;this._graphs=Object.create(null);this._id=0;this._ids=Object.create(null);
this._ids["><"]=0;this._entities=Object.create(null);this._blankNodeIndex=0;b||!c||c[0]||(b=c,c=null);b=b||{};this._prefixes=Object.create(null);b.prefixes&&this.addPrefixes(b.prefixes);this.defaultGraph=b.defaultGraph||"http://example.org/#defaultGraph";c&&this.addTriples(c)}var k=x("./N3Util").expandPrefixedName;t.prototype={get size(){var c=this._size;if(null!==c)return c;var b=this._graphs,a,e,k;for(k in b)for(var l in a=b[k].subjects)for(var d in e=a[l])c+=Object.keys(e[d]).length;return this._size=
c},_addToIndex:function(c,b,a,e){c=c[b]||(c[b]={});a=c[a]||(c[a]={});(c=e in a)||(a[e]=null);return!c},_removeFromIndex:function(c,b,a,e){var k=c[b],l=k[a],d;delete l[e];for(d in l)return;delete k[a];for(d in k)return;delete c[b]},_findInIndex:function(c,b,a,e,k,l,d,m){var h=[],w,n,y=1< !b+!a+!e?Object.keys(this._ids):this._entities;b&&((w=c,c={})[b]=w[b]);for(var t in c){var u=y[t];if(b=c[t]){a&&((w=b,b={})[a]=w[a]);for(var A in b){var x=y[A];if(n=b[A]){n=e?e in n?[e]:[]:Object.keys(n);for(var I=
n.length-1;0<=I;I--){var O={subject:"",predicate:"",object:"",graph:m};O[k]=u;O[l]=x;O[d]=y[n[I]];h.push(O)}}}}}return h},_countInIndex:function(c,b,a,e){var k=0,l,d;b&&((l=c,c={})[b]=l[b]);for(var m in c)if(b=c[m]){a&&((l=b,b={})[a]=l[a]);for(var v in b)if(d=b[v])e?e in d&&k++:k+=Object.keys(d).length}return k},addTriple:function(c,b,a,e){b||(e=c.graph,a=c.object,b=c.predicate,c=c.subject);e=e||this.defaultGraph;var k=this._graphs[e];k||(k=this._graphs[e]={subjects:{},predicates:{},objects:{}},Object.freeze(k));
e=this._ids;var l=this._entities;c=e[c]||(e[l[++this._id]=c]=this._id);b=e[b]||(e[l[++this._id]=b]=this._id);a=e[a]||(e[l[++this._id]=a]=this._id);e=this._addToIndex(k.subjects,c,b,a);this._addToIndex(k.predicates,b,a,c);this._addToIndex(k.objects,a,c,b);this._size=null;return e},addTriples:function(c){for(var b=c.length-1;0<=b;b--)this.addTriple(c[b])},addPrefix:function(c,b){this._prefixes[c]=b},addPrefixes:function(c){for(var b in c)this.addPrefix(b,c[b])},removeTriple:function(c,b,a,e){b||(e=
c.graph,a=c.object,b=c.predicate,c=c.subject);e=e||this.defaultGraph;var k,l=this._ids,d=this._graphs;if(!((c=l[c])&&(b=l[b])&&(a=l[a])&&(k=d[e])))return!1;var m,v;if(!((m=k.subjects[c])&&(v=m[b])&&a in v))return!1;this._removeFromIndex(k.subjects,c,b,a);this._removeFromIndex(k.predicates,b,a,c);this._removeFromIndex(k.objects,a,c,b);null!==this._size&&this._size--;for(c in k.subjects)return!0;delete d[e];return!0},removeTriples:function(c){for(var b=c.length-1;0<=b;b--)this.removeTriple(c[b])},find:function(c,
b,a,e){var h=this._prefixes;return this.findByIRI(k(c,h),k(b,h),k(a,h),k(e,h))},findByIRI:function(c,b,a,e){var k=[],l={},d=this._ids,m,v,w;e?l[e]=this._graphs[e]:l=this._graphs;for(var n in l)if(e=l[n]){if(c&&!(m=d[c])||b&&!(v=d[b])||a&&!(w=d[a]))return k;m?w?k.push(this._findInIndex(e.objects,w,m,v,"object","subject","predicate",n)):k.push(this._findInIndex(e.subjects,m,v,null,"subject","predicate","object",n)):v?k.push(this._findInIndex(e.predicates,v,w,null,"predicate","object","subject",n)):
w?k.push(this._findInIndex(e.objects,w,null,null,"object","subject","predicate",n)):k.push(this._findInIndex(e.subjects,null,null,null,"subject","predicate","object",n))}return 1===k.length?k[0]:k.concat.apply([],k)},count:function(c,b,a,e){var h=this._prefixes;return this.countByIRI(k(c,h),k(b,h),k(a,h),k(e,h))},countByIRI:function(c,b,a,e){e=e||this.defaultGraph;e=this._graphs[e];var k=this._ids;return!e||c&&!(c=k[c])||b&&!(b=k[b])||a&&!(a=k[a])?0:c?a?this._countInIndex(e.objects,a,c,b):this._countInIndex(e.subjects,
c,b,a):b?this._countInIndex(e.predicates,b,a,c):this._countInIndex(e.objects,a,c,b)},createBlankNode:function(c){var b,a;if(c)for(b=c="_:"+c,a=1;this._ids[b];)b=c+a++;else{do b="_:b"+this._blankNodeIndex++;while(this._ids[b])}this._ids[b]=++this._id;return b}};C.exports=t},{"./N3Util":38}],36:[function(x,C,B){function t(b){if(!(this instanceof t))return new t(b);k.call(this,{decodeStrings:!0});this._readableState.objectMode=!0;var a=this,e=new c(b);e.parse(function(b,c){c&&a.push(c)||b&&a.emit("error",
b)},this.emit.bind(this,"prefix"));this._transform=function(a,b,d){e.addChunk(a);d()};this._flush=function(a){e.end();a()}}var k=x("stream").Transform;B=x("util");var c=x("./N3Parser.js");B.inherits(t,k);C.exports=t},{"./N3Parser.js":34,stream:18,util:28}],37:[function(x,C,B){function t(b){if(!(this instanceof t))return new t(b);k.call(this,{encoding:"utf8"});this._writableState.objectMode=!0;var a=this,e=new c({write:function(b,c,d){a.push(b);d&&d()},end:function(b){a.push(null);b&&b()}},b);this._transform=
function(a,b,d){e.addTriple(a,d)};this._flush=function(a){e.end(a)}}var k=x("stream").Transform;B=x("util");var c=x("./N3Writer.js");B.inherits(t,k);C.exports=t},{"./N3Writer.js":39,stream:18,util:28}],38:[function(x,C,B){function t(b,a){for(var e in c)a?b.prototype[e]=k(c[e]):b[e]=c[e];return b}function k(b){return function(a){return b(this,a)}}var c={isIRI:function(b){if(!b)return b;b=b[0];return'"'!==b&&"_"!==b},isLiteral:function(b){return b&&'"'===b[0]},isBlank:function(b){return b&&"_:"===b.substr(0,
2)},getLiteralValue:function(b){var a=/^"([^]*)"/.exec(b);if(!a)throw Error(b+" is not a literal");return a[1]},getLiteralType:function(b){var a=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(b);if(!a)throw Error(b+" is not a literal");return a[1]||(a[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(b){var a=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(b);if(!a)throw Error(b+" is not a literal");return a[1]?a[1].toLowerCase():
""},isPrefixedName:function(b){return b&&/^[^:\/"']*:[^:\/"']+$/.test(b)},expandPrefixedName:function(b,a){var c=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(b),k,l,d;c&&(k=c[1],l=a[k],d=c.index);return void 0===l?b:0===d?l+b.substr(k.length+1):b.substr(0,d+3)+l+b.substr(d+k.length+4)},createIRI:function(b){return b&&'"'===b[0]?c.getLiteralValue(b):b},createLiteral:function(b,a){if(!a)switch(typeof b){case "boolean":a="http://www.w3.org/2001/XMLSchema#boolean";break;case "number":if(isFinite(b)){a=0===
b%1?"http://www.w3.org/2001/XMLSchema#integer":"http://www.w3.org/2001/XMLSchema#decimal";break}default:return'"'+b+'"'}return'"'+b+(/^[a-z]+(-[a-z0-9]+)*$/i.test(a)?'"@'+a.toLowerCase():'"^^'+a)},prefix:function(b){return c.prefixes({"":b})("")},prefixes:function(b){function a(a,d){if(d||!(a in c)){var b=Object.create(null);d=d||"";c[a]=function(a){return b[a]||(b[a]=d+a)}}return c[a]}var c=Object.create(null),k;for(k in b)a(k,b[k]);return a}};C.exports=t(t)},{}],39:[function(x,C,B){function t(a,
b){if(!(this instanceof t))return new t(a,b);a&&"function"!==typeof a.write&&(b=a,a=null);b=b||{};if(a)this._outputStream=a,this._endStream=void 0===b.end?!0:!!b.end;else{var d="";this._outputStream={write:function(a,b,c){d+=a;c&&c()},end:function(a){a&&a(null,d)}};this._endStream=!0}this._subject=null;/triple|quad/i.test(b.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),b.prefixes&&this.addPrefixes(b.prefixes))}function k(a){var b=e[a];void 0===
b&&(1===a.length?(b=a.charCodeAt(0).toString(16),b="\\u0000".substr(0,6-b.length)+b):(b=(1024*(a.charCodeAt(0)-55296)+a.charCodeAt(1)+9216).toString(16),b="\\U00000000".substr(0,10-b.length)+b));return b}var c=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,b=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,a=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,e={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};t.prototype={_write:function(a,b){this._outputStream.write(a,
"utf8",b)},_writeTriple:function(a,b,d,c,e){try{this._graph!==c&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(c?this._encodeIriOrBlankNode(c)+" {\n":"")),this._subject=null,this._graph="["!==c[0]?c:"]"),this._subject===a?this._predicate===b?this._write(", "+this._encodeObject(d),e):this._write(";\n    "+this._encodePredicate(this._predicate=b)+" "+this._encodeObject(d),e):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=a)+" "+this._encodePredicate(this._predicate=
b)+" "+this._encodeObject(d),e)}catch(w){e&&e(w)}},_writeTripleLine:function(a,b,d,c,e){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(a)+" "+this._encodeIriOrBlankNode(b)+" "+this._encodeObject(d)+(c?" "+this._encodeIriOrBlankNode(c)+".\n":".\n"),e)}catch(w){e&&e(w)}},_encodeIriOrBlankNode:function(c){var e=c[0];if("["===e||"("===e||"_"===e&&":"===c[1])return c;b.test(c)&&(c=c.replace(a,k));return(e=this._prefixRegex.exec(c))?e[1]?this._prefixIRIs[e[1]]+e[2]:c:"<"+c+">"},_encodeLiteral:function(c,
e,d){b.test(c)&&(c=c.replace(a,k));return d?'"'+c+'"@'+d:e?'"'+c+'"^^'+this._encodeIriOrBlankNode(e):'"'+c+'"'},_encodeSubject:function(a){if('"'===a[0])throw Error("A literal as subject is not allowed: "+a);"["===a[0]&&(this._subject="]");return this._encodeIriOrBlankNode(a)},_encodePredicate:function(a){if('"'===a[0])throw Error("A literal as predicate is not allowed: "+a);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===a?"a":this._encodeIriOrBlankNode(a)},_encodeObject:function(a){if('"'!==
a[0])return this._encodeIriOrBlankNode(a);var b=c.exec(a);if(!b)throw Error("Invalid literal: "+a);return this._encodeLiteral(b[1],b[2],b[3])},_blockedWrite:function(){throw Error("Cannot write because the writer has been closed.");},addTriple:function(a,b,d,c,e){void 0===d?this._writeTriple(a.subject,a.predicate,a.object,a.graph||"",b):"string"!==typeof c?this._writeTriple(a,b,d,"",c):this._writeTriple(a,b,d,c,e)},addTriples:function(a){for(var b=0;b<a.length;b++)this.addTriple(a[b])},addPrefix:function(a,
b,d){var c={};c[a]=b;this.addPrefixes(c,d)},addPrefixes:function(a,b){var d=this._prefixIRIs,c=!1,e;for(e in a){var k=a[e];/[#\/]$/.test(k)&&d[k]!==(e+=":")&&(c=!0,d[k]=e,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+e+" <"+k+">.\n"))}if(c){var k=e="",h;for(h in d)e+=e?"|"+h:h,k+=(k?"|":"")+d[h];e=e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^(?:"+k+")[^/]*$|^("+e+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(c?
"\n":"",b)},blank:function(a,b){var d=a,c,e;void 0===a?d=[]:"string"===typeof a?d=[{predicate:a,object:b}]:"length"in a||(d=[a]);switch(e=d.length){case 0:return"[]";case 1:if(c=d[0],"["!==c.object[0])return"[ "+this._encodePredicate(c.predicate)+" "+this._encodeObject(c.object)+" ]";default:for(var k="[",h=0;h<e;h++)c=d[h],c.predicate===a?k+=", "+this._encodeObject(c.object):(k+=(h?";\n  ":"\n  ")+this._encodePredicate(c.predicate)+" "+this._encodeObject(c.object),a=c.predicate);return k+"\n]"}},
list:function(a){for(var b=a&&a.length||0,d=Array(b),c=0;c<b;c++)d[c]=this._encodeObject(a[c]);return"("+d.join(" ")+")"},_prefixRegex:/$0^/,end:function(a){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null);this._write=this._blockedWrite;var b=a&&function(d,c){b=null;a(d,c)};if(this._endStream)try{return this._outputStream.end(b)}catch(d){}b&&b()}};C.exports=t},{}],40:[function(x,C,B){function t(a,b){this.name="NonSupportedSparqlFeatureError";this.feature=a;this.message=
b||"SPARQL feature "+a+" non supported"}function k(a){this.name=ParserError;this.message=a||"Error parsing SPARQL query"}var c=x("./parser"),b=x("./utils");t.prototype=Error();t.constructor=t;k.prototype=Error();k.constructor=k;AbstractQueryTree=function(){};AbstractQueryTree.prototype.parseQueryString=function(a){return c.parse(a)};AbstractQueryTree.prototype.parseExecutableUnit=function(a){if("select"===a.kind||"ask"===a.kind||"modify"===a.kind||"construct"===a.kind)return this.parseSelect(a);if("insertdata"===
a.kind||"deletedata"===a.kind)return this.parseInsertData(a);if("load"===a.kind||"clear"===a.kind||"drop"===a.kind||"create"===a.kind)return a;throw Error("unknown executable unit: "+a.kind);};AbstractQueryTree.prototype.parseSelect=function(a){if(null==a)return console.log("error parsing query"),null;a.pattern=this.build(a.pattern,{freshCounter:0});return a};AbstractQueryTree.prototype.parseInsertData=function(a){return null==a?(console.log("error parsing query"),null):a};AbstractQueryTree.prototype.build=
function(a,b){if("groupgraphpattern"===a.token)return this._buildGroupGraphPattern(a,b);if("basicgraphpattern"===a.token){var c={kind:"BGP",value:a.triplesContext};return c=AbstractQueryTree.translatePathExpressionsInBGP(c,b)}if("graphunionpattern"===a.token){var c=this.build(a.value[0],b),e=this.build(a.value[1],b);return{kind:"UNION",value:[c,e]}}if("graphgraphpattern"===a.token)return{kind:"GRAPH",value:this.build(a.value,b),graph:a.graph};if(null!=a.token)throw new t(a.token,"Non implemented SPARQL graph pattern: '"+
a.token+"'");throw new k("Error parsing graph pattern: '"+JSON.stringify(a)+"'");};AbstractQueryTree.translatePathExpressionsInBGP=function(a,c){var e,k=[],d,m;for(m=0;m<a.value.length;m++)if(a.value[m].predicate&&"path"===a.value[m].predicate.token){e=a.value[m];d=a.value.slice(m+1);var v=AbstractQueryTree.translatePathExpression(e,c);e=null;if("BGP"===v.kind)k=k.concat(v.value);else{if("ZERO_OR_MORE_PATH"===v.kind||"ONE_OR_MORE_PATH"===v.kind){m=0<k.length?{kind:"JOIN",lvalue:{kind:"BGP",value:k},
rvalue:v}:v;if("ZERO_OR_MORE_PATH"===v.kind)if("var"===v.y.token&&0===v.y.value.indexOf("fresh:")&&"var"===v.x.token&&0===v.x.value.indexOf("fresh:"))for(var w=0;w<a.value.length;w++)a.value[w].object&&"var"===a.value[w].object.token&&a.value[w].object.value===v.x.value&&(e=b.clone(a.value[w],!0),e.object=v.y);else if("var"===v.y.token&&0===v.y.value.indexOf("fresh:"))for(w=0;w<a.value.length;w++)a.value[w].subject&&"var"===a.value[w].subject.token&&a.value[w].subject.value===v.y.value&&(e=b.clone(a.value[w],
!0),e.subject=v.x);return 0<d.length?(v=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:d},c),null!=e?(k=k.concat([e]).concat(d),{kind:"UNION",value:[{kind:"JOIN",lvalue:m,rvalue:v},{kind:"BGP",value:k}]}):{kind:"JOIN",lvalue:m,rvalue:v}):m}return v}}else k.push(a.value[m]);a.value=k;return a};AbstractQueryTree.translatePathExpression=function(a,c){if("element"===a.predicate.kind){if("+"===a.predicate.modifier){a.predicate.modifier=null;var e=AbstractQueryTree.translatePathExpression(a,
c);return{kind:"ONE_OR_MORE_PATH",path:e,x:a.subject,y:a.object}}if("*"===a.predicate.modifier)return a.predicate.modifier=null,e=AbstractQueryTree.translatePathExpression(a,c),{kind:"ZERO_OR_MORE_PATH",path:e,x:a.subject,y:a.object};a.predicate=a.predicate.value;return{kind:"BGP",value:[a]}}if("sequence"===a.predicate.kind){for(var e=a.subject,k=a.object,d=a.graph,m,v,w=[],n=0;n<a.predicate.value.length;n++)n!=a.predicate.value.length-1?(m={token:"var",value:"fresh:"+c.freshCounter},c.freshCounter++):
m=k,v={subject:e,predicate:a.predicate.value[n],object:m},null!=d&&(v.graph=b.clone(d,!0)),w.push(v),n!=a.predicate.value.length-1&&(e=b.clone(m,!0));return AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:w},c)}throw new t("Non supported path expression "+a.predicate.kind);};AbstractQueryTree.prototype._buildGroupGraphPattern=function(a,b){for(var c=a.filters||[],e=a.binds||[],d={kind:"EMPTY_PATTERN"},k=0;k<a.patterns.length;k++){var v=a.patterns[k];"optionalgraphpattern"===v.token?
(v=this.build(v.value,b),d="FILTER"===v.kind?{kind:"LEFT_JOIN",lvalue:d,rvalue:v.value,filter:v.filter}:{kind:"LEFT_JOIN",lvalue:d,rvalue:v,filter:!0}):(v=this.build(v,b),d="EMPTY_PATTERN"==d.kind?v:{kind:"JOIN",lvalue:d,rvalue:v})}d.binds=e;if(0!=c.length){if("EMPTY_PATTERN"===d.kind||"LEFT_JOIN"===d.kind&&!0===d.filter||"LEFT_JOIN"===d.kind||"JOIN"===d.kind||"UNION"===d.kind||"GRAPH"===d.kind||"BGP"===d.kind)return{kind:"FILTER",filter:c,value:d};throw Error("Unknow kind of algebra expression: "+
d.kind);}return d};AbstractQueryTree.prototype.collectBasicTriples=function(a,b){null==b&&(b=[]);if("select"===a.kind)b=this.collectBasicTriples(a.pattern,b);else if("BGP"===a.kind)b=b.concat(a.value);else if("ZERO_OR_MORE_PATH"===a.kind)b=this.collectBasicTriples(a.path);else if("UNION"===a.kind)b=this.collectBasicTriples(a.value[0],b),b=this.collectBasicTriples(a.value[1],b);else if("GRAPH"===a.kind)b=this.collectBasicTriples(a.value,b);else if("LEFT_JOIN"===a.kind||"JOIN"===a.kind)b=this.collectBasicTriples(a.lvalue,
b),b=this.collectBasicTriples(a.rvalue,b);else if("FILTER"===a.kind)b=this.collectBasicTriples(a.value,b);else if("construct"===a.kind)b=this.collectBasicTriples(a.pattern,b);else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return b};AbstractQueryTree.prototype.bind=function(a,b){null!=a.graph&&a.graph.token&&"var"===a.graph.token&&null!=b[a.graph.value]&&(a.graph=b[a.graph.value]);if(null!=a.filter){for(var c=[],e=0;e<a.filter.length;e++)a.filter[e].value=this._bindFilter(a.filter[e].value,
b),c.push(a.filter[e]);a.filter=c}if("select"===a.kind)a.pattern=this.bind(a.pattern,b);else if("BGP"===a.kind)a.value=this._bindTripleContext(a.value,b);else if("ZERO_OR_MORE_PATH"===a.kind)a.path=this._bindTripleContext(a.path,b),a.x&&"var"===a.x.token&&null!=b[a.x.value]&&(a.x=b[a.x.value]),a.y&&"var"===a.y.token&&null!=b[a.y.value]&&(a.y=b[a.y.value]);else if("UNION"===a.kind)a.value[0]=this.bind(a.value[0],b),a.value[1]=this.bind(a.value[1],b);else if("GRAPH"===a.kind)a.value=this.bind(a.value,
b);else if("LEFT_JOIN"===a.kind||"JOIN"===a.kind)a.lvalue=this.bind(a.lvalue,b),a.rvalue=this.bind(a.rvalue,b);else if("FILTER"===a.kind){var d=this;a.value=this.bind(a.value,b);a.filter=a.filter.map(function(a){return{token:"filter",value:d._bindFilter(a.value,b)}})}else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return a};AbstractQueryTree.prototype._bindTripleContext=function(a,b){for(var c=0;c<a.length;c++){delete a[c].graph;delete a[c].variables;for(var e in a[c]){var d=a[c][e];
"var"===d.token&&null!=b[d.value]&&(a[c][e]=b[d.value])}}return a};AbstractQueryTree.prototype._bindFilter=function(a,b){if(null!=a.expressionType){var c=a.expressionType;if("relationalexpression"==c)a.op1=this._bindFilter(a.op1,b),a.op2=this._bindFilter(a.op2,b);else if("conditionalor"==c||"conditionaland"==c)for(c=0;c<a.operands.length;c++)a.operands[c]=this._bindFilter(a.operands[c],b);else if("additiveexpression"==c)for(a.summand=this._bindFilter(a.summand,b),c=0;c<a.summands.length;c++)a.summands[c].expression=
this._bindFilter(a.summands[c].expression,b);else if("builtincall"==c)for(c=0;c<a.args.length;c++)a.args[c]=this._bindFilter(a.args[c],b);else if("multiplicativeexpression"==c)for(a.factor=this._bindFilter(a.factor,b),c=0;c<a.factors.length;c++)a.factors[c].expression=this._bindFilter(a.factors[c].expression,b);else if("unaryexpression"==c)a.expression=this._bindFilter(a.expression,b);else if("irireforfunction"==c)for(c=0;c<a.factors.args;c++)a.args[c]=this._bindFilter(a.args[c],b);else"atomic"==
c&&"var"==a.primaryexpression&&null!=b[a.value.value]&&(c=b[a.value.value],a.primaryexpression="uri"===c.token?"iri":"literal",a.value=c)}return a};AbstractQueryTree.prototype.replace=function(a,c,k,l){null!=a.graph&&a.graph.token&&a.graph.token===c.token&&a.graph.value==c.value&&(a.graph=b.clone(k,!0));if(null!=a.filter){for(var d=[],e=0;e<a.filter.length;e++)a.filter[e].value=this._replaceFilter(a.filter[e].value,c,k,l),d.push(a.filter[e]);a.filter=d}if("select"===a.kind)a.pattern=this.replace(a.pattern,
c,k,l);else if("BGP"===a.kind)a.value=this._replaceTripleContext(a.value,c,k,l);else if("ZERO_OR_MORE_PATH"===a.kind)a.path=this._replaceTripleContext(a.path,c,k,l),a.x&&a.x.token===c.token&&a.value===c.value&&(a.x=b.clone(k,!0)),a.y&&a.y.token===c.token&&a.value===c.value&&(a.y=b.clone(k,!0));else if("UNION"===a.kind)a.value[0]=this.replace(a.value[0],c,k,l),a.value[1]=this.replace(a.value[1],c,k,l);else if("GRAPH"===a.kind)a.value=this.replace(a.value,c,k);else if("LEFT_JOIN"===a.kind||"JOIN"===
a.kind)a.lvalue=this.replace(a.lvalue,c,k,l),a.rvalue=this.replace(a.rvalue,c,k,l);else if("FILTER"===a.kind)a.value=this._replaceFilter(a.value,c,k,l);else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return a};AbstractQueryTree.prototype._replaceTripleContext=function(a,c,k,l){for(var d=0;d<a.length;d++)for(var e in a[d]){var h=a[d][e];"var"===h.token&&"var"===c.token&&h.value===c.value?a[d][e]=k:"blank"===h.token&&"blank"===c.token&&h.value===c.value?a[d][e]=k:"literal"!==h.token&&
"uri"!==h.token||"literal"!==c.token&&"uri"!==c.token||h.token!==c.token||b.lexicalFormTerm(h,l)[h.token]!==b.lexicalFormTerm(c,l)[h.token]||(a[d][e]=k)}return a};AbstractQueryTree.prototype._replaceFilter=function(a,b,c,k){if(null!=a.expressionType){var d=a.expressionType;if("relationalexpression"==d)a.op1=this._replaceFilter(a.op1,b,c,k),a.op2=this._replaceFilter(a.op2,b,c,k);else if("conditionalor"==d||"conditionaland"==d)for(d=0;d<a.operands.length;d++)a.operands[d]=this._replaceFilter(a.operands[d],
b,c,k);else if("additiveexpression"==d)for(a.summand=this._replaceFilter(a.summand,b,c,k),d=0;d<a.summands.length;d++)a.summands[d].expression=this._replaceFilter(a.summands[d].expression,b,c,k);else if("builtincall"==d)for(d=0;d<a.args.length;d++)a.args[d]=this._replaceFilter(a.args[d],b,c,k);else if("multiplicativeexpression"==d)for(a.factor=this._replaceFilter(a.factor,b,c,k),d=0;d<a.factors.length;d++)a.factors[d].expression=this._replaceFilter(a.factors[d].expression,b,c,k);else if("unaryexpression"==
d)a.expression=this._replaceFilter(a.expression,b,c,k);else if("irireforfunction"==d)for(d=0;d<a.factors.args;d++)a.args[d]=this._replaceFilter(a.args[d],b,c,k);else"atomic"==d&&(k=null,a.primaryexpression==b.token&&a.value==b.value?k=c.value:"iri"==a.primaryexpression&&"uri"==b.token&&a.value==b.value&&(k=c.value),null!=k&&(a.primaryexpression="uri"===c.token?"iri":c.token,a.value=k))}return a};AbstractQueryTree.prototype.treeWithUnion=function(a){if(null==a||null==a.kind)return!1;if("select"===
a.kind)return this.treeWithUnion(a.pattern);if("BGP"===a.kind)return this.treeWithUnion(a.value);if("ZERO_OR_MORE_PATH"===a.kind)return!1;if("UNION"===a.kind)if(null!=a.value[0].value&&null!=a.value[0].value.variables&&null!=a.value[1].value&&null!=a.value[1].value.variables){if(a.value[0].variables.join("/")===a.values[1].variables.join("/"))return this.treeWithUnion(a.value[0])?!0:this.treeWithUnion(a.value[1])}else return!0;else{if("GRAPH"===a.kind||"LEFT_JOIN"!==a.kind&&"JOIN"!==a.kind)return!1;
if(this.treeWithUnion(a.lvalue))return!0;this.treeWithUnion(a.rvalue)}};C.exports={AbstractQueryTree:AbstractQueryTree,NonSupportedSparqlFeatureError:t,SparqlParserError:k}},{"./parser":47,"./utils":58}],41:[function(x,C,B){var t=x("./utils"),k=t.nextTick,c=function(a,b){if(0!=arguments.length){this.order=a;this.root=this._allocateNode();this.root.isLeaf=!0;this.root.level=0;var c=this;this._diskWrite(this.root,function(a){c.root=a;c._updateRootNode(c.root,function(d){c.comparator=function(d,a){return d<
a?-1:d>a?1:0};c.merger=null;null!=b&&b(c)})})}};c.prototype._allocateNode=function(){return new b};c.prototype._diskWrite=function(a,b){k(function(){b(a)})};c.prototype._diskRead=function(a,b){k(function(){b(a)})};c.prototype._diskDelete=function(a,b){k(function(){b()})};c.prototype._updateRootNode=function(a,b){b(a)};c.prototype.search=function(a,b,c){this.__search(this,a,this.root,b,c)};c.prototype.__search=function(a,b,c,k,d){for(var e=0;e<c.numberActives&&1===a.comparator(b,c.keys[e].key);)e++;
e<c.numberActives&&0===a.comparator(c.keys[e].key,b)?null!=d&&1==d?k(!0):k(c.keys[e].data):!0===c.isLeaf?k(null):a._diskRead(c.children[e],function(c){a.__search(a,b,c,k,d)})};c.prototype.walk=function(a,b){this.__walk(this,this.root,a,b)};c.prototype.__walk=function(a,b,c,k){var d=b.numberActives,e=0;if(b.isLeaf){for(e=0;e<b.numberActives;e++)c(b.keys[e]);return k()}t.whilst(function(){return e<d},function(d){a._diskRead(b.children[e],function(k){a.__walk(a,k,c,function(){a._diskRead(b.keys[e],function(a){c(a);
e++;d()})})})},function(){a._diskRead(b.children[d],function(d){a.__walk(a,d,c,function(){k()})})})};c.prototype.walkNodes=function(a){this.__walkNodes(this,root,a,function(){})};c.prototype.__walkNodes=function(a,b,c,k){if(b.isLeaf)return c(b),k();c(b);var d=b.numberActives,e=0;t.whilst(function(){return e<d},function(d){a._diskRead(b.children[e],function(b){a.__walkNodes(a,b,c,function(){e++;d()})})},function(){a._diskRead(b.children[d],function(d){a.__walkNodes(a,d,c,function(){})})})};c.prototype._splitChild=
function(a,b,c,k){var d=this._allocateNode();d.isLeaf=c.isLeaf;d.level=c.level;d.numberActives=this.order-1;var e=c.keys[this.order-1];c.keys[this.order-1]=null;for(var h=0;h<this.order-1;h++)d.keys[h]=c.keys[h+this.order],c.keys[h+this.order]=null,c.isLeaf||(d.children[h]=c.children[h+this.order],c.children[h+this.order]=null);c.isLeaf||(d.children[h]=c.children[h+this.order],c.children[h+this.order]=null);c.numberActives=this.order-1;for(h=a.numberActives+1;h>b+1;h--)a.children[h]=a.children[h-
1];a.children[b+1]=d;for(h=a.numberActives;h>b;h--)a.keys[h]=a.keys[h-1];a.keys[b]=e;a.numberActives++;var l=this;this._diskWrite(d,function(d){l._diskWrite(a,function(a){a.children[b+1]=d;l._diskWrite(c,function(d){return k(a)})})})};c.prototype.insert=function(a,b,c){if(this.root.numberActives===2*this.order-1){var e=this._allocateNode();e.isLeaf=!1;e.level=this.root.level+1;e.numberActives=0;e.children[0]=this.root;var d=this;this._splitChild(e,0,this.root,function(k){e=k;d.root=e;d._updateRootNode(e,
function(e){d._insertNonFull(e,a,b,c)})})}else this._insertNonFull(this.root,a,b,c)};c.prototype._insertNonFull=function(a,b,c,k){this.__insertNonFull(this,a,a.numberActives-1,b,c,k)};c.prototype.__insertNonFull=function(a,b,c,k,d,m){if(b.isLeaf){for(;0<=c&&-1===a.comparator(k,b.keys[c].key);)b.keys[c+1]=b.keys[c],c--;0<=c&&0===a.comparator(k,b.keys[c].key)?b.keys[c]={key:k,data:d}:(b.keys[c+1]={key:k,data:d},b.numberActives++);a._diskWrite(b,function(d){return m(d)})}else{for(;0<=c&&-1===a.comparator(k,
b.keys[c].key);)c--;c++;a._diskRead(b.children[c],function(e){e.numberActives===2*a.order-1?a._splitChild(b,c,e,function(){1===a.comparator(k,b.keys[c].key)&&c++;a._diskRead(b.children[c],function(b){c=b.numberActives-1;a.__insertNonFull(a,b,c,k,d,m)})}):a._diskRead(b.children[c],function(b){c=b.numberActives-1;a.__insertNonFull(a,b,c,k,d,m)})})}};c.prototype["delete"]=function(a,b){c.prototype.__deleteSearchNode(this,a,this.root,b)};c.prototype.__deleteSearchNode=function(a,b,c,k){var d=0;if(0===
c.numberActives)return k(!1);for(;d<c.numberActives&&1===a.comparator(b,c.keys[d].key);)d++;var e=d;if(d<c.numberActives&&0===a.comparator(b,c.keys[d].key))return a.__deleteNodeFound(a,e,b,c,k);if(!0===c.isLeaf)return k(!1);a._diskRead(c.children[d],function(h){if(null===h)return k(!1);var l=!1,m=!1,v=null,t=null;e===c.numberActives?(m=!0,t=c.children[e-1],v=c.children[e-1]):0===e?(l=!0,v=c.children[1],t=c.children[1]):(t=c.children[e-1],v=c.children[e+1]);a._diskRead(t,function(e){a._diskRead(v,
function(n){!0===m&&(n=null);!0===l&&(e=null);h.numberActives===a.order-1&&null!=c?null!=n&&n.numberActives>a.order-1?a._moveKey(c,d,-1,function(d){a.__deleteSearchNode(a,b,h,k)}):null!=e&&e.numberActives>a.order-1?a._moveKey(c,d,1,function(d){a.__deleteSearchNode(a,b,h,k)}):null!=e&&e.numberActives===a.order-1?a._mergeSiblings(c,d,-1,function(d){a.__deleteSearchNode(a,b,d,k)}):null!=n&&n.numberActives===a.order-1&&a._mergeSiblings(c,d,1,function(d){a.__deleteSearchNode(a,b,d,k)}):a.__deleteSearchNode(a,
b,h,k)})})})};c.prototype.__deleteNodeFound=function(a,b,c,k,d){if(k.isLeaf&&k.numberActives>a.order-1||k.isLeaf&&k===a.root)return a._deleteKeyFromNode(k,b,function(){d(!0)}),!0;!1===k.isLeaf&&a._diskRead(k.children[b],function(e){e.numberActives>a.order-1?a._getMaxKeyPos(a,e,function(h){c=h.node.keys[h.index];k.keys[b]=c;a._diskWrite(k,function(b){b=e;c=c.key;a.__deleteSearchNode(a,c,b,d)})}):a._diskRead(k.children[b+1],function(h){h.numberActives>a.order-1?a._getMinKeyPos(a,h,function(e){c=e.node.keys[e.index];
k.keys[b]=c;a._diskWrite(k,function(b){b=h;c=c.key;a.__deleteSearchNode(a,c,b,d)})}):e.numberActives===a.order-1&&h.numberActives===a.order-1&&a._mergeNodes(e,k.keys[b],h,function(e){k.children[b]=e;b++;for(var h=b;h<k.numberActives;h++)k.children[h]=k.children[h+1],k.keys[h-1]=k.keys[h];k.children[h]=null;k.keys[h-1]=null;k.numberActives--;0===k.numberActives&&a.root===k&&(a.root=e);a._diskWrite(k,function(b){a.__deleteSearchNode(a,c,e,d)})})})});k.isLeaf&&k.numberActives>a.order-1&&a._deleteKeyFromNode(k,
b,function(b){a.__deleteSearchNode(a,c,b,d)})};c.prototype._moveKey=function(a,b,c,k){1===c&&b--;var d=this;d._diskRead(a.children[b],function(e){d._diskRead(a.children[b+1],function(h){if(-1==c){e.keys[e.numberActives]=a.keys[b];e.children[e.numberActives+1]=h.children[0];h.children[0]=null;e.numberActives++;a.keys[b]=h.keys[0];for(var l=1;l<h.numberActives;l++)h.keys[l-1]=h.keys[l],h.children[l-1]=h.children[l];h.children[h.numberActives-1]=h.children[h.numberActives];h.numberActives--}else{h.children[h.numberActives+
1]=h.children[h.numberActives];for(l=h.numberActives;0<l;l--)h.children[l]=h.children[l-1],h.keys[l]=h.keys[l-1];h.keys[0]=null;h.children[0]=null;h.children[0]=e.children[e.numberActives];h.keys[0]=a.keys[b];h.numberActives++;e.children[e.numberActives]=null;a.keys[b]=e.keys[e.numberActives-1];e.keys[e.numberActives-1]=null;e.numberActives--}d._diskWrite(e,function(b){d._diskWrite(h,function(b){d._diskWrite(a,function(d){return k(d)})})})})})};c.prototype._mergeSiblings=function(a,b,c,k){var d,e,
h;b===a.numberActives?(b--,c=a.children[a.numberActives-1],h=a.children[a.numberActives]):(c=a.children[b],h=a.children[b+1]);var l=this;l._diskRead(c,function(c){l._diskRead(h,function(h){var n=l._allocateNode();n.isLeaf=c.isLeaf;n.level=c.level;for(e=0;e<l.order-1;e++)n.keys[e]=c.keys[e],n.children[e]=c.children[e];n.keys[l.order-1]=a.keys[b];n.children[l.order-1]=c.children[l.order-1];for(e=0;e<l.order-1;e++)n.keys[e+l.order]=h.keys[e],n.children[e+l.order]=h.children[e];n.children[2*l.order-1]=
h.children[l.order-1];a.children[b]=n;for(e=b;e<a.numberActives;e++)a.keys[e]=a.keys[e+1],a.children[e+1]=a.children[e+2];n.numberActives=c.numberActives+h.numberActives+1;a.numberActives--;for(d=a.numberActives;d<2*l.order-1;d++)a.keys[d]=null;0===a.numberActives&&l.root===a&&(l.root=n,n.isLeaf=n.level?!1:!0);l._diskWrite(n,function(d){l._diskWrite(a,function(a){l._diskDelete(c,function(){l._diskDelete(h,function(){if(l.root===d)l._updateRootNode(l.root,function(){return k(d)});else return k(d)})})})})})})};
c.prototype._deleteKeyFromNode=function(a,b,c){var e=2*this.order-1;a.numberActives<e&&(e=a.numberActives);if(!1===a.isLeaf)return!1;for(;b<e-1;b++)a.keys[b]=a.keys[b+1];a.keys.pop();a.numberActives--;this._diskWrite(a,function(d){return c(d)})};c.prototype._mergeNodes=function(a,b,c,k){var d,e;d=this._allocateNode();d.isLeaf=!0;for(e=0;e<a.numberActives;e++)d.keys[e]=a.keys[e],d.children[e]=a.children[e];d.children[a.numberActives]=a.children[a.numberActives];d.keys[a.numberActives]=b;for(e=0;e<
c.numberActives;e++)d.keys[e+a.numberActives+1]=c.keys[e],d.children[e+a.numberActives+1]=c.children[e];d.children[2*this.order-1]=c.children[c.numberActives];d.numberActives=a.numberActives+c.numberActives+1;d.isLeaf=a.isLeaf;d.level=a.level;var h=this;this._diskWrite(d,function(d){h._diskDelete(a,function(){h._diskDelete(c,function(){return k(d)})})})};c.prototype.audit=function(a){var b=[],c=[],k=this,d=function(d){for(var e=0;e<c.length;e++)if(0===k.comparator(c[e],d)){var h=" !!! duplicated key "+
d;!0===a&&console.log(h);b.push(h)}},m=null,k=this;this.walkNodes(function(e){!0===a&&(console.log("--- Node at "+e.level+" level"),console.log(" - leaf? "+e.isLeaf),console.log(" - num actives? "+e.numberActives),console.log(" - keys: "));for(var h=e.numberActives;h<e.keys.length;h++)null!=e.keys[h]&&!0===a&&(console.log(" * warning : redundant key data"),b.push(" * warning : redundant key data"));for(h=e.numberActives+1;h<e.children.length;h++)null!=e.children[h]&&!0===a&&(console.log(" * warning : redundant children data"),
b.push(" * warning : redundant key data"));if(!1===e.isLeaf)for(h=0;h<e.numberActives;h++){var l=this._diskRead(e.children[h]).keys[this._diskRead(e.children[h]).numberActives-1].key,v=this._diskRead(e.children[h+1]).keys[0].key;!0===a&&console.log("   "+e.keys[h].key+"("+l+","+v+")");if(-1===k.comparator(e.keys[h].key,l)){var t=" !!! value max left "+l+" > key "+e.keys[h].key;!0===a&&console.log(t);b.push(t)}1===k.comparator(e.keys[h].key,v)&&(t=" !!! value min right "+v+" < key "+e.keys[h].key,
!0===a&&console.log(t),b.push(t));d(e.keys[h].key);c.push(e.keys[h].key)}else for(null===m?m=e.level:m!=e.level&&(t=" !!! Leaf node with wrong level value",!0===a&&console.log(t),b.push(t)),h=0;h<e.numberActives;h++)!0===a&&console.log(" "+e.keys[h].key),d(e.keys[h].key),c.push(e.keys[h].key);e!=k.root&&(e.numberActives>2*k.order-1&&(!0===a&&(t=" !!!! MAX num keys restriction violated "),console.log(t),b.push(t)),e.numberActives<k.order-1&&(!0===a&&(t=" !!!! MIN num keys restriction violated "),console.log(t),
b.push(t)))});return b};c.prototype._getMaxKeyPos=function(a,b,c){var e={};if(null===b)return c(null);if(!0===b.isLeaf)return e.node=b,e.index=b.numberActives-1,c(e);e.node=b;e.index=b.numberActives-1;a._diskRead(b.children[b.numberActives],function(d){return a._getMaxKeyPos(a,d,c)})};c.prototype._getMinKeyPos=function(a,b,c){var e={};null===b&&c(null);if(!0===b.isLeaf)return e.node=b,e.index=0,c(e);e.node=b;e.index=0;a._diskRead(b.children[0],function(d){return a._getMinKeyPos(a,d,c)})};var b=function(){this.numberActives=
0;this.isLeaf=null;this.keys=[];this.children=[];this.level=0};C.exports={Tree:c,Node:b}},{"./utils":58}],42:[function(x,C,B){var t=x("./query_engine").QueryEngine,k=x("./quad_backend").QuadBackend,c=x("./persistent_quad_backend").PersistentQuadBackend,b=x("./lexicon").Lexicon,a=x("./persistent_lexicon").PersistentLexicon,e=x("./rdf_model"),h=x("./utils");Store=function(e,d){var h=null,l=null;if(0==arguments.length)l={};else if(1==arguments.length)l={},h=e;else if(1<arguments.length)l=e,h=d;else throw"An optional argument map and a callback must be provided";
null==l.treeOrder&&(l.treeOrder=15);var w=b,n=k;!0===l.persistent&&(w=a,n=c);this.functionMap={};var y=this;this.customFns={};new w(function(d){var a=function(){new n(l,function(a){var b=function(){l.backend=a;l.lexicon=d;y.engine=new t(l);h(null,y)};l.overwrite?a.clear(b):b()})};!0===l.overwrite?d.clear(a):a()},l.name)};Store.prototype.rdf=e.rdf;Store.prototype.rdf.api=e;Store.prototype.registerCustomFunction=function(a,d){this.customFns[a]=d;this.engine.setCustomFunctions(this.customFns)};Store.prototype.execute=
function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var a,d;1===arguments.length?(a=arguments[0],d=function(){}):2===arguments.length&&(a=arguments[0],d=arguments[1]);this.engine.execute(a,d)}};Store.prototype.executeWithEnvironment=function(){var a,d,b;if(3===arguments.length){a=arguments[0];var c=function(){};d=arguments[1];b=arguments[2]}else 4===
arguments.length&&(a=arguments[0],c=arguments[3],d=arguments[1],b=arguments[2]);d=h.map(d,function(d){return{token:"uri",value:d}});b=h.map(b,function(d){return{token:"uri",value:d}});this.engine.execute(a,c,d,b)};Store.prototype.graph=function(){var a=null,d=null;if(1===arguments.length)d=arguments[0]||function(){},a=this.engine.lexicon.defaultGraphUri;else if(2===arguments.length)d=arguments[1]||function(){},a=arguments[0];else throw"An optional graph URI and a callback function must be provided";
null!=this.rdf.resolve(a)&&(a=this.rdf.resolve(a));this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",d)};Store.prototype.node=function(){var a=null,d=null,b=null;if(2===arguments.length)b=arguments[0],d=arguments[1]||function(){},a=this.engine.lexicon.defaultGraphUri;else if(3===arguments.length)b=arguments[0],a=arguments[1],d=arguments[2]||function(){};else throw"An optional graph URI, node URI and a callback function must be provided";null!=this.rdf.resolve(a)&&(a=
this.rdf.resolve(a));null!=this.rdf.resolve(b)&&(b=this.rdf.resolve(b));this.engine.execute("CONSTRUCT { <"+b+"> ?p ?o } WHERE { GRAPH <"+a+"> { <"+b+"> ?p ?o } }",d)};Store.prototype.startObservingNode=function(){var a,d,b;2===arguments.length?(a=arguments[0],b=arguments[1],this.engine.callbacksBackend.observeNode(a,b,function(){})):3===arguments.length&&(a=arguments[0],d=arguments[1],b=arguments[2],this.engine.callbacksBackend.observeNode(a,d,b,function(){}))};Store.prototype.stopObservingNode=
function(a){this.engine.callbacksBackend.stopObservingNode(a)};Store.prototype.startObservingQuery=function(a,d,b){null!=b?this.engine.callbacksBackend.observeQuery(a,d,b):this.engine.callbacksBackend.observeQuery(a,d,function(){})};Store.prototype.stopObservingQuery=function(a){this.engine.callbacksBackend.stopObservingQuery(a)};Store.prototype.subscribe=function(a,d,b,c,k){var l=this,m=function(d,a){var b=[],c={blanks:{},outCache:{}},n=[];h.each(a,function(d){var a=e.buildRDFResource(d.subject,
n,l.engine,c),k=e.buildRDFResource(d.predicate,n,l.engine,c);d=e.buildRDFResource(d.object,n,l.engine,c);null!=a&&null!=k&&null!=d&&(d=new e.Triple(a,k,d),b.push(d))});k(d,b)};this.functionMap[k]=m;this.engine.callbacksBackend.subscribe(a,d,b,c,m,function(){})};Store.prototype.unsubscribe=function(a){this.engine.callbacksBackend.unsubscribe(this.functionMap[a]);delete this.functionMap[a]};Store.prototype.setPrefix=function(a,d){this.rdf.setPrefix(a,d)};Store.prototype.setDefaultPrefix=function(a){this.rdf.setDefaultPrefix(a)};
Store.prototype.insert=function(){var a,d,b;if(1===arguments.length)d=arguments[0],b=function(){};else if(2===arguments.length)d=arguments[0],b=arguments[1]||function(){};else if(3===arguments.length)d=arguments[0],a=this.rdf.createNamedNode(arguments[1]),b=arguments[2]||function(){};else throw"The triples to insert, an optional graph and callback must be provided";var c="",e=this;d.forEach(function(d){c=c+e._nodeToQuery(d.subject)+e._nodeToQuery(d.predicate)+e._nodeToQuery(d.object)+"."});c=null!=
a?"INSERT DATA { GRAPH "+this._nodeToQuery(a)+" { "+c+" } }":"INSERT DATA { "+c+" }";this.engine.execute(c,b)};Store.prototype._nodeToQuery=function(a){if("NamedNode"===a.interfaceName){var d=this.rdf.resolve(a.valueOf());return null!=d?"<"+d+">":"<"+a.valueOf()+">"}return a.toString()};Store.prototype["delete"]=function(){var a,d,b;if(1===arguments.length)d=arguments[0],b=function(){};else if(2===arguments.length)d=arguments[0],b=arguments[1]||function(){};else if(3===arguments.length)d=arguments[0],
a=this.rdf.createNamedNode(arguments[1]),b=arguments[2]||function(){};else throw"The triples to delete, an optional graph and callback must be provided";var c="",e=this;d.forEach(function(d){c=c+e._nodeToQuery(d.subject)+e._nodeToQuery(d.predicate)+e._nodeToQuery(d.object)+"."});c=null!=a?"DELETE DATA { GRAPH "+this._nodeToQuery(a)+" { "+c+" } }":"DELETE DATA { "+c+" }";this.engine.execute(c,b)};Store.prototype.clear=function(){var a,d;if(0===arguments.length)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),
d=function(){};else if(1===arguments.length)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),d=arguments[0]||function(){};else if(2===arguments.length)a=this.rdf.createNamedNode(arguments[0]),d=arguments[1]||function(){};else throw"The optional graph and a callback must be provided";a="CLEAR GRAPH "+this._nodeToQuery(a);this.engine.execute(a,d)};Store.prototype.setBatchLoadEvents=function(a){this.engine.eventsOnBatchLoad=a};Store.prototype.registerDefaultNamespace=function(a,d){this.rdf.prefixes.set(a,
d);this.engine.registerDefaultNamespace(a,d)};Store.prototype.registerDefaultProfileNamespaces=function(){var a=this.rdf.prefixes.values(),d;for(d in a)this.registerDefaultNamespace(d,a[d])};Store.prototype.load=function(){var a,d,b,c,e={};if(3===arguments.length)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),a=arguments[0],d=arguments[1],c=arguments[2]||function(){};else if(4===arguments.length)a=arguments[0],d=arguments[1],e=arguments[2],"string"===typeof e?(b=this.rdf.createNamedNode(e),
e={}):(b=this.rdf.createNamedNode(e.graph||this.engine.lexicon.defaultGraphUri),delete e.graph),c=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===a)d=this.rdf.createNamedNode(d),this.engine.execute("LOAD <"+d.valueOf()+"> INTO GRAPH <"+b.valueOf()+">",c);else{var k=this,h=this.engine.rdfLoader.parsers[a];if(!h)return c(Error("Cannot find parser for the provided media type:"+a));a=[h,
{token:"uri",value:b.valueOf()},d,e,function(d,a){d?c(d,a):k.engine.batchLoad(a,function(d){null!=d?c(null,d):c(Error("Erro batch-loading triples."))})}];d&&"string"===typeof d&&0===d.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,a):this.engine.rdfLoader.tryToParse.apply(null,a)}};Store.prototype.registerParser=function(a,d){this.engine.rdfLoader.registerParser(a,d)};Store.prototype.registeredGraphs=function(a){this.engine.lexicon.registeredGraphs(!0,function(d){d=h.map(d,function(d){return new e.NamedNode(d)});
a(null,d)})};Store.prototype.getNetworkTransport=function(){return NetworkTransport};Store.prototype.setNetworkTransport=function(a){NetworkTransport=a};Store.prototype.close=function(a){null==a&&(a=function(){});this.engine.close?this.engine.close(a):a()};Store.VERSION="0.9.17";Store.yieldFrequency=function(a){h.yieldFrequency(a)};C.exports.Store=Store;C.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store};
C.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":45,"./persistent_lexicon":48,"./persistent_quad_backend":49,"./quad_backend":50,"./query_engine":52,"./rdf_model":56,"./utils":58}],43:[function(x,C,B){var t=x("./utils"),k=x("./utils");x("./quad_index");var c=x("./quad_index").Pattern,b=x("./rdf_model"),a=x("./abstract_query_tree").AbstractQueryTree;
Callbacks={ANYTHING:{token:"var",value:"_"},added:"added",deleted:"deleted",eventsFlushed:"eventsFlushed",CallbacksBackend:function(b){this.aqt=new a;this.engine=b;this.indexMap={};this.observersMap={};this.queriesIndexMap={};this.emptyNotificationsMap={};this.queriesList=[];this.pendingQueries=[];this.matchedQueries=[];this.updateInProgress=null;this.indices="SPOG GP OGS POG GSP OS".split(" ");this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],
OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};this.callbackCounter=0;this.callbacksMap={};this.callbacksInverseMap={};this.queryCounter=0;this.queriesMap={};this.queriesCallbacksMap={};this.queriesInverseMap={};for(b=0;b<this.indices.length;b++){var c=this.indices[b];this.indexMap[c]={};this.queriesIndexMap[c]={}}}};Callbacks.CallbacksBackend.prototype.startGraphModification=
function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))};Callbacks.CallbacksBackend.prototype.nextGraphModification=function(a,b){this.updateInProgress[a].push(b)};Callbacks.CallbacksBackend.prototype.endGraphModification=function(a){if(!0!==this.ongoingModification){var b=this;if(null!=this.updateInProgress){var c=
b.updateInProgress;b.updateInProgress=null;this.sendNotification(Callbacks.deleted,c[Callbacks.deleted],function(){b.sendNotification(Callbacks.added,c[Callbacks.added],function(){b.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){b.dispatchQueries(function(){a(!0)})})})})}else a(!0)}else a(!0)};Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)};Callbacks.CallbacksBackend.prototype.sendNotification=function(a,
b,c){for(var d={},e=0;e<b.length;e++){var k=b[e],h;for(h in this.indexMap){var l=this.indexMap[h],t=this.componentOrders[h];this._searchCallbacksInIndex(l,t,a,k,d);0!=this.pendingQueries.length&&(l=this.queriesIndexMap[h],this._searchQueriesInIndex(l,t,k))}}this.dispatchNotifications(d);null!=c&&c(!0)};Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(a,b,c){for(var d=this.emptyNotificationsMap[a]||[],e=0;e<d.length;e++)d[e](a,b);c()};Callbacks.CallbacksBackend.prototype.dispatchNotifications=
function(a){for(var b in a){var c=this.callbacksMap[b],d=a[b][Callbacks.deleted];if(null!=d)try{c(Callbacks.deleted,d)}catch(v){}for(var e in a[b])if(e!=Callbacks.deleted)try{c(e,a[b][e])}catch(v){}}};Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(a,b,c,d,k){var e=d[1];d=d[0];for(var h=0;h<b.length+1;h++){for(var l=a._||[],m=[],t=0;t<l.length;t++){var u=l[t];null!=this.callbacksMap[u]&&(k[u]=k[u]||{},k[u][c]=k[u][c]||[],k[u][c].push(d),m.push(u))}a._=m;l=b[h];if(null!=a[""+
e[l]])a=a[""+e[l]];else break}};Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(a,b){var c=this.emptyNotificationsMap[a]||[];c.push(b);this.emptyNotificationsMap[a]=c};Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(a,b){var c=this.emptyNotificationsMap[a];null!=c&&(c=t.reject(c,function(d){return d===b}));this.emptyNotificationsMap[a]=c};Callbacks.CallbacksBackend.prototype.subscribe=function(a,b,k,d,m,v){a=this._tokenizeComponents(a,b,k,d);b={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,
b);var e=this;this.engine.normalizeQuad(a,b,!0,function(d){for(var a=new c(d),b=e._indexForPattern(a),a=e.componentOrders[b],b=e.indexMap[b],k=0;k<a.length;k++){var h=d[a[k]];if("_"===h){null==b._&&(b._=[]);e.callbackCounter++;b._.push(e.callbackCounter);e.callbacksMap[e.callbackCounter]=m;e.callbacksInverseMap[m]=e.callbackCounter;break}else k===a.length-1?(b[h]=b[h]||{_:[]},e.callbackCounter++,b[h]._.push(e.callbackCounter),e.callbacksMap[e.callbackCounter]=m,e.callbacksInverseMap[m]=e.callbackCounter):
(b[h]=b[h]||{},b=b[h])}null!=v&&v(!0)})};Callbacks.CallbacksBackend.prototype.unsubscribe=function(a){var b=this.callbacksInverseMap[a];null!=b&&(delete this.callbacksInverseMap[a],delete this.callbacksMap[b])};Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(a,b,c,d){var e={};null==a?e.subject=Callbacks.ANYTHING:0==a.indexOf("_:")?e.subject={token:"blank",value:a}:e.subject={token:"uri",value:a};e.predicate=null==b?Callbacks.ANYTHING:{token:"uri",value:b};e.object=null==c?Callbacks.ANYTHING:
{token:"uri",value:c};e.graph=null==d?Callbacks.ANYTHING:{token:"uri",value:d};return e};Callbacks.CallbacksBackend.prototype._indexForPattern=function(a){a=a.indexKey;for(var b=this.indices,c=0;c<b.length;c++)for(var d=b[c],e=this.componentOrders[d],k=0;k<e.length&&!1!==t.include(a,e[k]);k++)if(k==a.length-1)return d;return"SPOG"};Callbacks.CallbacksBackend.prototype.observeNode=function(){var a,c,k,d;4===arguments.length?(a=arguments[0],c=arguments[1],k=arguments[2],d=arguments[3]):(a=arguments[0],
c=this.engine.lexicon.defaultGraphUri,k=arguments[1],d=arguments[2]);c="CONSTRUCT { <"+a+"> ?p ?o } WHERE { GRAPH <"+c+"> { <"+a+"> ?p ?o } }";var m=this,t={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,t);var w=[];this.engine.execute(c,function(c,e){if(c)d&&d(!1);else{var h=!1,l=function(d,a){if("eventsFlushed"===d&&h){h=!1;try{k(e)}catch(R){}}else if("eventsFlushed"!==d){h=!0;for(var c=0;c<a.length;c++){var l=a[c],n=b.buildRDFResource(l.subject,w,m.engine,t),u=b.buildRDFResource(l.predicate,
w,m.engine,t),l=b.buildRDFResource(l.object,w,m.engine,t);null!=n&&null!=u&&null!=l&&(l=new b.Triple(n,u,l),d===Callbacks.added?e.add(l):d===Callbacks.deleted&&e.remove(l))}}};m.observersMap[k]=l;m.subscribeEmpty(Callbacks.eventsFlushed,l);m.subscribe(a,null,null,null,l,function(){try{k(e)}catch(A){}d&&d(!0)})}})};Callbacks.CallbacksBackend.prototype.stopObservingNode=function(a){return(a=this.observersMap[a])?(this.unsubscribe(a),this.unsubscribeEmpty(Callbacks.eventsFlushed,a),!0):!1};Callbacks.CallbacksBackend.prototype.observeQuery=
function(a,b,l){var d=this.aqt.parseQueryString(a),d=this.aqt.parseSelect(d.units[0]),d=this.aqt.collectBasicTriples(d),e=this,h={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,h);var t=this.queryCounter;this.queryCounter++;this.queriesMap[t]=a;this.queriesInverseMap[a]=t;this.queriesList.push(t);this.queriesCallbacksMap[t]=b;k.eachSeries(d,function(d,a){null==d.graph&&(d.graph=e.engine.lexicon.defaultGraphUriTerm);e.engine.normalizeQuad(d,h,!0,function(d){for(var b=new c(d),k=e._indexForPattern(b),
b=e.componentOrders[k],k=e.queriesIndexMap[k],h=0;h<b.length;h++){var l=d[b[h]];if("string"===typeof l){null==k._&&(k._=[]);k._.push(t);break}else h===b.length-1?(k[l]=k[l]||{_:[]},k[l]._.push(t)):(k[l]=k[l]||{},k=k[l])}a()})},function(){e.engine.execute(a,function(d,a){d?console.log("ERROR in query callback "+a):b(a)});null!=l&&l()})};Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(a){var b=this.queriesInverseMap[a];null!=b&&(delete this.queriesInverseMap[a],delete this.queriesMap[b],
this.queriesList=t.reject(this.queriesList,function(a){return a===b}))};Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(a,b,c){var d=c[1];c=c[0];for(c=0;c<b.length+1;c++){for(var e=a._||[],k=[],h=0;h<e.length;h++){var l=e[h];t.include(this.pendingQueries,l)&&(t.remove(this.pendingQueries,function(d){return d===l}),this.matchedQueries.push(l));null!=this.queriesMap[l]&&k.push(l)}a._=k;e=b[c];if(null!=a[""+d[e]])a=a[""+d[e]];else break}};Callbacks.CallbacksBackend.prototype.dispatchQueries=
function(a){var b=this,c,d,e={};k.eachSeries(this.matchedQueries,function(a,k){null==e[a]?(e[a]=!0,c=b.queriesMap[a],d=b.queriesCallbacksMap[a],b.engine.execute(c,function(a,b){if(!a)try{d(b)}catch(D){}k()})):k()},function(){a()})};Callbacks.CallbacksBackend.added=Callbacks.added;Callbacks.CallbacksBackend.deleted=Callbacks.deleted;Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed;C.exports=Callbacks},{"./abstract_query_tree":40,"./quad_index":51,"./rdf_model":56,"./utils":58}],44:[function(x,
C,B){var t=x("jsonld"),k=function(c,b,a){var e=null;t.normalize(c,{},function(c,k){if(c)a(c);else{var d=function(d){if("blank node"===d.type)return{blank:d.value};if("IRI"===d.type)return{token:"uri",value:d.value};if("literal"===d.type)return null!=d.language?{literal:'"'+d.value+'"@'+d.language}:null!==d.datatype?{literal:'"'+d.value+'"^^<'+d.datatype+">"}:{literal:'"'+d.value+'"'}};e=[];var h=function(a,c,k){e.push({subject:d(a),predicate:d(c),object:d(k),graph:b})},l;for(l in k)for(var t=k[l],
n=0;n<t.length;n++){var y=t[n];h(y.subject,y.predicate,y.object)}a(null,e)}})};B.JSONLDParser={};x=B.JSONLDParser;x.parser={async:!0,parse:function(c,b,a,e){try{"string"===typeof c&&(c=JSON.parse(c)),k(c,b,e)}catch(h){e(h)}}};C.exports={JSONLDParser:x}},{jsonld:30}],45:[function(x,C,B){var t=x("./utils"),k=x("./btree").Tree;Lexicon=function(c){var b=this;this.defaultGraphOid=0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",
prefix:null,suffix:null,value:this.defaultGraphUri};this.oidCounter=1;t.seq(function(a){new k(2,function(c){b.uris=c;a()})},function(a){new k(2,function(c){b.literals=c;a()})},function(a){new k(2,function(c){b.knownGraphs=c;a()})},function(a){new k(2,function(c){b.oidUris=c;a()})},function(a){new k(2,function(c){b.oidLiterals=c;a()})},function(a){new k(2,function(c){b.oidBlanks=c;a()})})(function(){null!=c&&c(b)})};Lexicon.prototype.registerGraph=function(c,b,a){c!=this.defaultGraphOid?this.knownGraphs.insert(c,
b,function(){a()}):a()};Lexicon.prototype.registeredGraphs=function(c,b){var a=[];this.knownGraphs.walk(function(b){!0===c?a.push(b.data):a.push(b.key)},function(){b(a)})};Lexicon.prototype.registerUri=function(c,b){var a=this;c===this.defaultGraphUri?b(this.defaultGraphOid):this.uris.search(c,function(e){if(null==e){var k=a.oidCounter,l="u"+k;a.oidCounter++;t.seq(function(d){a.uris.insert(c,[k,0],function(){d()})},function(d){a.oidUris.insert(l,c,function(){d()})})(function(){b(k)})}else k=e[0],
e[1]+=1,b(k)})};Lexicon.prototype.resolveUri=function(c,b){c===this.defaultGraphUri?b(this.defaultGraphOid):this.uris.search(c,function(a){null!=a?b(a[0]):b(-1)})};Lexicon.prototype.resolveUriCost=function(c,b){c===this.defaultGraphUri?b(0):this.uris.search(c,function(a){null!=a?b(a[1]):b(-1)})};Lexicon.prototype.registerBlank=function(c){var b=this.oidCounter;this.oidCounter++;var a=""+b;this.oidBlanks.insert(a,a,function(){c(b)})};Lexicon.prototype.resolveBlank=function(c,b){var a=this;this.oidBlanks.search(c,
function(c){null!=c?b(c):(c=a.oidCounter,this.oidCounter++,b(""+c))})};Lexicon.prototype.resolveBlankCost=function(c,b){b(0)};Lexicon.prototype.registerLiteral=function(c,b){var a=this;this.literals.search(c,function(e){if(null==e){var k=a.oidCounter,l="l"+k;a.oidCounter++;t.seq(function(d){a.literals.insert(c,[k,0],function(){d()})},function(d){a.oidLiterals.insert(l,c,function(){d()})})(function(){b(k)})}else k=e[0],e[1]+=1,b(k)})};Lexicon.prototype.resolveLiteral=function(c,b){this.literals.search(c,
function(a){null!=a?b(a[0]):b(-1)})};Lexicon.prototype.resolveLiteralCost=function(c,b){this.literals.search(c,function(a){null!=a?b(a[1]):b(-1)})};Lexicon.prototype.parseLiteral=function(c){var b=c.lastIndexOf("@");if(-1!=b&&'"'===c[b-1]&&null!=c.substring(b,c.length).match(/^@[a-zA-Z\-]+$/g)){var a=c.substring(1,b-1);c=c.substring(b+1,c.length);return{token:"literal",value:a,lang:c}}b=c.lastIndexOf("^^");if(-1!=b&&'"'===c[b-1]&&"<"===c[b+2]&&">"===c[c.length-1])return a=c.substring(1,b-1),c=c.substring(b+
3,c.length-1),{token:"literal",value:a,type:c};a=c.substring(1,c.length-1);return{token:"literal",value:a}};Lexicon.prototype.parseUri=function(c){return{token:"uri",value:c}};Lexicon.prototype.retrieve=function(c,b){var a=this;c===this.defaultGraphOid?b({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):t.seq(function(b,k){a.oidUris.search("u"+c,function(b){null!=b?k(null,a.parseUri(b)):k(null,null)})},function(b,k){null==b?a.oidLiterals.search("l"+c,function(b){null!=
b?k(null,a.parseLiteral(b)):k(null,null)}):k(null,b)},function(b,k){null==b?a.oidBlanks.search(""+c,function(a){null!=a?k(null,{token:"blank",value:"_:"+c}):k(null,null)}):k(null,b)})(null,function(a,c){b(c)})};Lexicon.prototype.clear=function(c){var b=this;this.defaultGraphOid=0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};this.oidCounter=1;t.seq(function(a){new k(2,function(c){b.uris=
c;a()})},function(a){new k(2,function(c){b.literals=c;a()})},function(a){new k(2,function(c){b.knownGraphs=c;a()})},function(a){new k(2,function(c){b.oidUris=c;a()})},function(a){new k(2,function(c){b.oidLiterals=c;a()})},function(a){new k(2,function(c){b.oidBlanks=c;a()})})(function(){null!=c&&c()})};Lexicon.prototype.unregister=function(c,b,a){var e=this;t.seq(function(a){e._unregisterTerm(c.subject.token,b.subject,a)},function(a){e._unregisterTerm(c.predicate.token,b.predicate,a)},function(a){e._unregisterTerm(c.object.token,
b.object,a)},function(a){null!=c.graph?e._unregisterTerm(c.graph.token,b.graph,a):a()})(function(){a(!0)})};Lexicon.prototype._unregisterTerm=function(c,b,a){var e=this;if("uri"===c)if(b!=this.defaultGraphOid){var k="u"+b;e.oidUris.search(k,function(c){e.uris.search(c,function(d){var h=d[1];""+d[0]===""+b?0===h?t.seq(function(d){e.oidUris["delete"](k,function(){d()})},function(d){e.uris["delete"](c,function(){d()})},function(d){e.knownGraphs["delete"](b,function(){d()})})(function(){a()}):e.uris.insert(c,
[b,h-1],function(){a()}):a()})})}else a();else"literal"===c?(this.oidCounter++,k="l"+b,e.oidLiterals.search(k,function(c){e.literals.search(c,function(d){var h=d[1];""+d[0]===""+b?0===h?t.seq(function(d){e.oidLiterals["delete"](k,function(){d()})},function(d){e.literals["delete"](c,function(){d()})})(function(){a()}):e.literals.insert(c,[b,h-1],function(){a()}):a()})})):"blank"===c?e.oidBlanks["delete"](""+b,function(){a()}):a()};C.exports={Lexicon:Lexicon}},{"./btree":41,"./utils":58}],46:[function(x,
C,B){if(!x("./utils").isWorker()){var t=x("http"),k=x("https"),c=x("url");NetworkTransport={load:function(b,a,e,h){var l=null==h?3:h;b=c.parse(b,!0,!0);h={host:b.host,hostname:b.hostname,method:"GET",path:b.path,headers:{host:b.hostname,Accept:a}};var d=null;"http:"===b.protocol?(h.port=b.port||80,d=t):"https:"===b.protocol&&(h.port=b.port||443,d=k);b=d.request(h,function(d){var b=d.headers,c="";"2"==(""+d.statusCode)[0]?(d.on("end",function(){e(null,{headers:b,data:c})}),d.on("data",function(d){c+=
d})):"3"==(""+d.statusCode)[0]?0==l?e(Error("Too many redirections")):(d=b.Location||b.location,null!=d?NetworkTransport.load(d,a,e,l-1):e(Error("Redirection without location header"))):e(Error("HTTP error: "+d.statusCode))});b.on("error",e);b.end()}};C.exports={NetworkTransport:NetworkTransport}}},{"./utils":58,http:6,https:10,url:25}],47:[function(x,C,B){C.exports=function(){function t(k,c,b,a){this.message=k;this.expected=c;this.found=b;this.location=a;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&
Error.captureStackTrace(this,t)}(function(k,c){function b(){this.constructor=k}b.prototype=c.prototype;k.prototype=new b})(t,Error);t.buildMessage=function(k,c){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}function a(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+b(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+b(d)})}function e(a){return a.replace(/\\/g,
"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+b(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+b(d)})}var h={literal:function(b){return'"'+a(b.text)+'"'},"class":function(a){var d="",b;for(b=0;b<a.parts.length;b++)d+=a.parts[b]instanceof Array?e(a.parts[b][0])+"-"+e(a.parts[b][1]):e(a.parts[b]);return"["+(a.inverted?"^":"")+d+"]"},
any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){var d=Array(a.length),b;for(b=0;b<a.length;b++){var c=b,e;e=a[b];e=h[e.type](e);d[c]=e}d.sort();if(0<d.length){for(a=b=1;b<d.length;b++)d[b-1]!==d[b]&&(d[a]=d[b],a++);d.length=a}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}(k)+" but "+(c?'"'+a(c)+'"':"end of input")+" found."};
return{SyntaxError:t,parse:function(k,c){function b(d,f){return{type:"literal",text:d,ignoreCase:f}}function a(d,f,a){return{type:"class",parts:d,inverted:f,ignoreCase:a}}function e(d){return{type:"other",description:d}}function h(d){var f=Rb[d],a;if(!f){for(a=d-1;!Rb[a];)a--;f=Rb[a];for(f={line:f.line,column:f.column};a<d;)10===k.charCodeAt(a)?(f.line++,f.column=1):f.column++,a++;Rb[d]=f}return f}function l(d,f){var a=h(d),b=h(f);return{start:{offset:d,line:a.line,column:a.column},end:{offset:f,
line:b.line,column:b.column}}}function d(d){g<Ka||(g>Ka&&(Ka=g,Kc=[]),Kc.push(d))}function m(){var a;q++;var b,c;q++;a=g;b=v();if(b!==f){var e,h,l,z,m,t;q++;e=g;h=n();if(h!==f){l=[];for(c=r();c!==f;)l.push(c),c=r();if(l!==f){c=[];for(z=y();z!==f;)c.push(z),z=y();if(c!==f){z=[];for(l=r();l!==f;)z.push(l),l=r();if(z!==f)if(l=u(),l!==f){m=[];for(z=r();z!==f;)m.push(z),z=r();if(m!==f)if(z=A(),z!==f){m=[];for(t=r();t!==f;)m.push(t),t=r();if(m!==f){var w,D,I,x,O,G,L;q++;m=g;k.substr(g,8)===qd?(t=qd,g+=
8):(t=f,0===q&&d(Pg));if(t!==f){w=[];for(D=P();D!==f;)w.push(D),D=P();if(w!==f)if(123===k.charCodeAt(g)?(D=Ha,g++):(D=f,0===q&&d(Ia)),D!==f){I=[];x=g;40===k.charCodeAt(g)?(O=T,g++):(O=f,0===q&&d(U));if(O!==f){G=[];L=R();if(L!==f)for(;L!==f;)G.push(L),L=R();else G=f;G!==f?(41===k.charCodeAt(g)?(L=V,g++):(L=f,0===q&&d(W)),L!==f?x=O=[O,G,L]:(g=x,x=f)):(g=x,x=f)}else g=x,x=f;for(x===f&&(x=Sa());x!==f;){I.push(x);x=g;40===k.charCodeAt(g)?(O=T,g++):(O=f,0===q&&d(U));if(O!==f){G=[];L=R();if(L!==f)for(;L!==
f;)G.push(L),L=R();else G=f;G!==f?(41===k.charCodeAt(g)?(L=V,g++):(L=f,0===q&&d(W)),L!==f?x=O=[O,G,L]:(g=x,x=f)):(g=x,x=f)}else g=x,x=f;x===f&&(x=Sa())}I!==f?(125===k.charCodeAt(g)?(x=ya,g++):(x=f,0===q&&d(za)),x!==f?m=t=[t,w,D,I,x]:(g=m,m=f)):(g=m,m=f)}else g=m,m=f;else g=m,m=f}else g=m,m=f;m===f&&(m=null);q--;m===f&&0===q&&d(Qg);if(m!==f){e=h;h={named:[],implicit:[]};for(m=0;m<c.length;m++)t=c[m],"default"===t.kind?h.implicit.push(t.graph):h.named.push(t.graph);0===h.named.length&&0===h.implicit.length&&
h.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"select",token:"executableunit"};c.dataset=h;c.projection=e.vars;c.modifier=e.modifier;c.pattern=l;null!=z&&null!=z.limit&&(c.limit=z.limit);null!=z&&null!=z.offset&&(c.offset=z.offset);null!=z&&null!=z.order&&""!=z.order&&(c.order=z.order);null!=z&&null!=z.group&&(c.group=z.group);e=c}else g=e,e=f}else g=e,e=f}else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f}else g=
e,e=f}else g=e,e=f}else g=e,e=f;q--;e===f&&0===q&&d(Rg);c=e;if(c===f){q++;c=g;l=[];for(z=r();z!==f;)l.push(z),z=r();if(l!==f)if(k.substr(g,9)===Sb?(z=Sb,g+=9):(z=f,0===q&&d(rd)),z===f&&(k.substr(g,9)===Tb?(z=Tb,g+=9):(z=f,0===q&&d(sd))),z!==f){l=[];for(z=r();z!==f;)l.push(z),z=r();if(l!==f){q++;l=g;123===k.charCodeAt(g)?(z=Ha,g++):(z=f,0===q&&d(Ia));if(z!==f){e=[];for(z=r();z!==f;)e.push(z),z=r();if(e!==f)if(z=Xa(),z===f&&(z=null),z!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();e!==f?(125===k.charCodeAt(g)?
(h=ya,g++):(h=f,0===q&&d(za)),h!==f?l=z:(g=l,l=f)):(g=l,l=f)}else g=l,l=f;else g=l,l=f}else g=l,l=f;q--;l===f&&0===q&&d(Sg);z=l;if(z!==f){l=[];for(e=r();e!==f;)l.push(e),e=r();if(l!==f){e=[];for(l=y();l!==f;)e.push(l),l=y();if(e!==f){l=[];for(h=r();h!==f;)l.push(h),h=r();if(l!==f)if(h=u(),h!==f){m=[];for(l=r();l!==f;)m.push(l),l=r();if(m!==f)if(l=A(),l!==f){c=z;z=e;e=h;h={named:[],implicit:[]};for(m=0;m<z.length;m++)t=z[m],"default"===t.kind?h.implicit.push(t.graph):h.named.push(t.graph);0===h.named.length&&
0===h.implicit.length&&h.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});z={kind:"construct",token:"executableunit"};z.dataset=h;z.template=c;z.pattern=e;null!=l&&null!=l.limit&&(z.limit=l.limit);null!=l&&null!=l.offset&&(z.offset=l.offset);null!=l&&null!=l.order&&""!=l.order&&(z.order=l.order);c=z}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f}else g=c,c=f}else g=c,c=f}else g=c,c=f}else g=c,c=f;else g=c,c=
f;if(c===f){c=g;l=[];for(z=r();z!==f;)l.push(z),z=r();if(l!==f)if(k.substr(g,9)===Sb?(z=Sb,g+=9):(z=f,0===q&&d(rd)),z===f&&(k.substr(g,9)===Tb?(z=Tb,g+=9):(z=f,0===q&&d(sd))),z!==f){l=[];for(z=r();z!==f;)l.push(z),z=r();if(l!==f){z=[];for(l=y();l!==f;)z.push(l),l=y();if(z!==f){l=[];for(e=r();e!==f;)l.push(e),e=r();if(l!==f)if(k.substr(g,5)===bb?(e=bb,g+=5):(e=f,0===q&&d(Ub)),e===f&&(k.substr(g,5)===cb?(e=cb,g+=5):(e=f,0===q&&d(Vb))),e!==f){l=[];for(h=r();h!==f;)l.push(h),h=r();if(l!==f)if(123===k.charCodeAt(g)?
(h=Ha,g++):(h=f,0===q&&d(Ia)),h!==f){m=[];for(l=r();l!==f;)m.push(l),l=r();if(m!==f)if(l=Aa(),l===f&&(l=null),l!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(125===k.charCodeAt(g)?(h=ya,g++):(h=f,0===q&&d(za)),h!==f){h=[];for(e=r();e!==f;)h.push(e),e=r();if(h!==f)if(e=A(),e!==f){c=z;z=e;e={named:[],implicit:[]};for(h=0;h<c.length;h++)m=c[h],"default"===m.kind?e.implicit.push(m.graph):e.named.push(m.graph);0===e.named.length&&0===e.implicit.length&&e.implicit.push({token:"uri",prefix:null,
suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"construct",token:"executableunit"};c.dataset=e;c.template=l;c.pattern={token:"basicgraphpattern",triplesContext:l.triplesContext};null!=z&&null!=z.limit&&(c.limit=z.limit);null!=z&&null!=z.offset&&(c.offset=z.offset);null!=z&&null!=z.order&&""!=z.order&&(c.order=z.order)}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,
c=f}else g=c,c=f}else g=c,c=f;else g=c,c=f}q--;c===f&&0===q&&d(Tg);if(c===f){q++;c=g;k.substr(g,8)===td?(l=td,g+=8):(l=f,0===q&&d(Ug));if(l!==f){z=[];e=Na();if(e!==f)for(;e!==f;)z.push(e),e=Na();else z=f;z===f&&(42===k.charCodeAt(g)?(z=Ta,g++):(z=f,0===q&&d(Ua)));if(z!==f){e=[];for(h=y();h!==f;)e.push(h),h=y();e!==f?(h=u(),h===f&&(h=null),h!==f?(m=A(),m!==f?c=l=[l,z,e,h,m]:(g=c,c=f)):(g=c,c=f)):(g=c,c=f)}else g=c,c=f}else g=c,c=f;q--;c===f&&0===q&&d(Vg);if(c===f){q++;c=g;l=[];for(z=r();z!==f;)l.push(z),
z=r();if(l!==f)if(k.substr(g,3)===ud?(z=ud,g+=3):(z=f,0===q&&d(Wg)),z===f&&(k.substr(g,3)===vd?(z=vd,g+=3):(z=f,0===q&&d(Xg))),z!==f){z=[];for(l=r();l!==f;)z.push(l),l=r();if(z!==f){l=[];for(e=y();e!==f;)l.push(e),e=y();if(l!==f){e=[];for(z=r();z!==f;)e.push(z),z=r();if(e!==f)if(z=u(),z!==f){c=l;l=z;z={named:[],implicit:[]};for(e=0;e<c.length;e++)h=c[e],"implicit"===h.kind?z.implicit.push(h.graph):z.named.push(h.graph);0===z.named.length&&0===z.implicit.length&&z.implicit.push({token:"uri",prefix:null,
suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"ask",token:"executableunit"};c.dataset=z;c.pattern=l}else g=c,c=f;else g=c,c=f}else g=c,c=f}else g=c,c=f}else g=c,c=f;else g=c,c=f;q--;c===f&&0===q&&d(Yg)}}}c!==f?(q++,l=g,k.substr(g,6)===Wb?(z=Wb,g+=6):(z=f,0===q&&d(wd)),z===f&&(k.substr(g,6)===Xb?(z=Xb,g+=6):(z=f,0===q&&d(xd))),z!==f?(e=Da(),e!==f?l=z=[z,e]:(g=l,l=f)):(g=l,l=f),l===f&&(l=null),l!==f&&(l=null!=l?l[1]:null),q--,l===f&&0===q&&d(Zg),l!==f?a=b=
{token:"query",kind:"query",prologue:b,units:[c],inlineData:l}:(g=a,a=f)):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d($g);q--;a===f&&0===q&&d(ah);a===f&&(q++,a=C(),q--,a===f&&0===q&&d(bh));return a}function v(){var a,b,c,e;q++;a=g;q++;b=g;e=[];for(c=r();c!==f;)e.push(c),c=r();if(e!==f)if(k.substr(g,4)===yd?(c=yd,g+=4):(c=f,0===q&&d(ch)),c===f&&(k.substr(g,4)===zd?(c=zd,g+=4):(c=f,0===q&&d(dh))),c!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?(e=Qb(),e!==f?(b={token:"base"},b.value=e):(g=b,b=f)):
(g=b,b=f)}else g=b,b=f;else g=b,b=f;q--;b===f&&0===q&&d(eh);b===f&&(b=null);if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f){e=[];for(c=w();c!==f;)e.push(c),c=w();e!==f?a=b={token:"prologue",base:b,prefixes:e}:(g=a,a=f)}else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(fh);return a}function w(){var a,b,c,e;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(k.substr(g,6)===Ad?(c=Ad,g+=6):(c=f,0===q&&d(gh)),c===f&&(k.substr(g,6)===Bd?(c=Bd,g+=6):(c=f,0===q&&d(hh))),c!==f){c=[];for(b=r();b!==
f;)c.push(b),b=r();if(c!==f)if(b=Hb(),b!==f){e=[];for(c=r();c!==f;)e.push(c),c=r();e!==f?(c=Qb(),c!==f?(a={token:"prefix"},a.prefix=b,a.local=c):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(ih);return a}function n(){var a,b,c,e,h,l,z,n,m,u,t,v,y,A,D,w;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(k.substr(g,6)===Cd?(c=Cd,g+=6):(c=f,0===q&&d(jh)),c===f&&(k.substr(g,6)===Dd?(c=Dd,g+=6):(c=f,0===q&&d(kh))),c!==f){c=[];for(b=r();b!==f;)c.push(b),
b=r();if(c!==f)if(k.substr(g,8)===qa?(b=qa,g+=8):(b=f,0===q&&d(db)),b===f&&(k.substr(g,8)===ra?(b=ra,g+=8):(b=f,0===q&&d(eb))),b===f&&(k.substr(g,7)===Ed?(b=Ed,g+=7):(b=f,0===q&&d(lh)),b===f&&(k.substr(g,7)===Fd?(b=Fd,g+=7):(b=f,0===q&&d(mh)))),b===f&&(b=null),b!==f){e=[];for(c=r();c!==f;)e.push(c),c=r();if(e!==f){c=[];e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(l=P(),l!==f){z=[];for(n=r();n!==f;)z.push(n),n=r();z!==f?e=h=[h,l,z]:(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=
r();l!==f;)h.push(l),l=r();if(h!==f)if(40===k.charCodeAt(g)?(l=T,g++):(l=f,0===q&&d(U)),l!==f){z=[];for(n=r();n!==f;)z.push(n),n=r();if(z!==f)if(n=Q(),n!==f){m=[];for(u=r();u!==f;)m.push(u),u=r();if(m!==f)if(k.substr(g,2)===fb?(u=fb,g+=2):(u=f,0===q&&d(Yb)),u===f&&(k.substr(g,2)===gb?(u=gb,g+=2):(u=f,0===q&&d(Zb))),u!==f){t=[];for(v=r();v!==f;)t.push(v),v=r();if(t!==f)if(v=P(),v!==f){y=[];for(A=r();A!==f;)y.push(A),A=r();if(y!==f)if(41===k.charCodeAt(g)?(A=V,g++):(A=f,0===q&&d(W)),A!==f){D=[];for(w=
r();w!==f;)D.push(w),w=r();D!==f?e=h=[h,l,z,n,m,u,t,v,y,A,D]:(g=e,e=f)}else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f}if(e!==f)for(;e!==f;){c.push(e);e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(l=P(),l!==f){z=[];for(n=r();n!==f;)z.push(n),n=r();z!==f?e=h=[h,l,z]:(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(40===k.charCodeAt(g)?(l=T,g++):(l=f,0===q&&d(U)),
l!==f){z=[];for(n=r();n!==f;)z.push(n),n=r();if(z!==f)if(n=Q(),n!==f){m=[];for(u=r();u!==f;)m.push(u),u=r();if(m!==f)if(k.substr(g,2)===fb?(u=fb,g+=2):(u=f,0===q&&d(Yb)),u===f&&(k.substr(g,2)===gb?(u=gb,g+=2):(u=f,0===q&&d(Zb))),u!==f){t=[];for(v=r();v!==f;)t.push(v),v=r();if(t!==f)if(v=P(),v!==f){y=[];for(A=r();A!==f;)y.push(A),A=r();if(y!==f)if(41===k.charCodeAt(g)?(A=V,g++):(A=f,0===q&&d(W)),A!==f){D=[];for(w=r();w!==f;)D.push(w),w=r();D!==f?e=h=[h,l,z,n,m,u,t,v,y,A,D]:(g=e,e=f)}else g=e,e=f;else g=
e,e=f}else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f}}else c=f;if(c===f){c=g;e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(42===k.charCodeAt(g)?(h=Ta,g++):(h=f,0===q&&d(Ua)),h!==f){l=[];for(z=r();z!==f;)l.push(z),z=r();l!==f?c=e=[e,h,l]:(g=c,c=f)}else g=c,c=f;else g=c,c=f}if(c!==f){a=b;b=c;c=[];if(3===b.length&&"*"===b[1])b={vars:[{token:"variable",kind:"*"}],modifier:Gd(a)};else{for(e=0;e<b.length;e++)h=b[e],3===h.length?c.push({token:"variable",
kind:"var",value:h[1]}):c.push({token:"variable",kind:"aliased",expression:h[3],alias:h[7]});b={vars:c,modifier:Gd(a)}}a=b}else g=a,a=f}else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(nh);return a}function y(){var a,b,c,e;q++;a=g;k.substr(g,4)===Hd?(b=Hd,g+=4):(b=f,0===q&&d(oh));b===f&&(k.substr(g,4)===Id?(b=Id,g+=4):(b=f,0===q&&d(ph)));if(b!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f){q++;b=g;c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?(e=D(),e!==f?b=
c={graph:e,kind:"default",token:"graphClause"}:(g=b,b=f)):(g=b,b=f);q--;b===f&&0===q&&d(qh);if(b===f){q++;b=g;k.substr(g,5)===ub?(c=ub,g+=5):(c=f,0===q&&d(Lc));c===f&&(k.substr(g,5)===vb?(c=vb,g+=5):(c=f,0===q&&d(Mc)));if(c!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?(e=D(),e!==f?b=c={graph:e,kind:"named",token:"graphCluase"}:(g=b,b=f)):(g=b,b=f)}else g=b,b=f;q--;b===f&&0===q&&d(rh)}if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?a=b:(g=a,a=f)}else g=a,a=f}else g=a,a=f}else g=a,a=f;q--;
a===f&&0===q&&d(sh);return a}function D(){var a;q++;a=na();q--;a===f&&0===q&&d(th);return a}function u(){var a,b,c,e;q++;a=g;k.substr(g,5)===bb?(b=bb,g+=5):(b=f,0===q&&d(Ub));b===f&&(k.substr(g,5)===cb?(b=cb,g+=5):(b=f,0===q&&d(Vb)));b===f&&(b=null);if(b!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(b=Y(),b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?a=b:(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(uh);return a}function A(){var a,b,c,e;q++;a=g;q++;b=g;k.substr(g,
5)===Jd?(c=Jd,g+=5):(c=f,0===q&&d(vh));c===f&&(k.substr(g,5)===Kd?(c=Kd,g+=5):(c=f,0===q&&d(wh)));if(c!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(k.substr(g,2)===$b?(e=$b,g+=2):(e=f,0===q&&d(Ld)),e===f&&(k.substr(g,2)===ac?(e=ac,g+=2):(e=f,0===q&&d(Md))),e!==f){e=[];for(c=r();c!==f;)e.push(c),c=r();if(e!==f){c=[];e=x();if(e!==f)for(;e!==f;)c.push(e),e=x();else c=f;c!==f?b=c:(g=b,b=f)}else g=b,b=f}else g=b,b=f;else g=b,b=f}else g=b,b=f;q--;b===f&&0===q&&d(xh);b===f&&(b=null);if(b!==f){var h,
l;q++;c=g;k.substr(g,6)===Nd?(e=Nd,g+=6):(e=f,0===q&&d(yh));if(e!==f){h=[];l=I();if(l!==f)for(;l!==f;)h.push(l),l=I();else h=f;h!==f?c=e=[e,h]:(g=c,c=f)}else g=c,c=f;q--;c===f&&0===q&&d(zh);c===f&&(c=null);if(c!==f){q++;c=g;k.substr(g,5)===Od?(e=Od,g+=5):(e=f,0===q&&d(Ah));e===f&&(k.substr(g,5)===Pd?(e=Pd,g+=5):(e=f,0===q&&d(Bh)));if(e!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(k.substr(g,2)===$b?(h=$b,g+=2):(h=f,0===q&&d(Ld)),h===f&&(k.substr(g,2)===ac?(h=ac,g+=2):(h=f,0===q&&d(Md))),
h!==f){h=[];for(e=r();e!==f;)h.push(e),e=r();if(h!==f){e=[];h=O();if(h!==f)for(;h!==f;)e.push(h),h=O();else e=f;if(e!==f){h=[];for(l=r();l!==f;)h.push(l),l=r();h!==f?c=e:(g=c,c=f)}else g=c,c=f}else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;q--;c===f&&0===q&&d(Ch);c===f&&(c=null);if(c!==f){q++;e=g;h=L();h!==f?(l=B(),l===f&&(l=null),l!==f?e=h=[h,l]:(g=e,e=f)):(g=e,e=f);e===f&&(e=g,h=B(),h!==f?(l=L(),l===f&&(l=null),l!==f?e=h=[h,l]:(g=e,e=f)):(g=e,e=f));if(e!==f){h={};for(l=0;l<e.length;l++){var z=
e[l];null!=z&&null!=z.limit?h.limit=z.limit:null!=z&&null!=z.offset&&(h.offset=z.offset)}e=h}q--;e===f&&0===q&&d(Dh);e===f&&(e=null);e!==f?(a=b,b=e,e={},null!=b&&(null!=b.limit&&(e.limit=b.limit),null!=b.offset&&(e.offset=b.offset)),null!=a&&(e.group=a),e.order=c,a=e):(g=a,a=f)}else g=a,a=f}else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(Eh);return a}function x(){var a,b,c,e,h,l;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(c=Pa(),c!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();e!==f?a=c:(g=
a,a=f)}else g=a,a=f;else g=a,a=f;if(a===f){a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(c=X(),c!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();e!==f?a=c:(g=a,a=f)}else g=a,a=f;else g=a,a=f;if(a===f){a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(40===k.charCodeAt(g)?(c=T,g++):(c=f,0===q&&d(U)),c!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f)if(b=Q(),b!==f){e=[];for(c=r();c!==f;)e.push(c),c=r();if(e!==f){c=g;k.substr(g,2)===fb?(h=fb,g+=2):(h=f,0===q&&d(Yb));h===f&&(k.substr(g,2)===
gb?(h=gb,g+=2):(h=f,0===q&&d(Zb)));if(h!==f){l=[];for(e=r();e!==f;)l.push(e),e=r();l!==f?(e=P(),e!==f?c=h=[h,l,e]:(g=c,c=f)):(g=c,c=f)}else g=c,c=f;c===f&&(c=null);if(c!==f){h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(41===k.charCodeAt(g)?(l=V,g++):(l=f,0===q&&d(W)),l!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();e!==f?(b=0!=c.length?{token:"aliased_expression",expression:b,alias:c[2]}:b,a=b):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f}else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=
a,a=f;if(a===f){a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(c=P(),c!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();e!==f?a=c:(g=a,a=f)}else g=a,a=f;else g=a,a=f}}}q--;a===f&&0===q&&d(Fh);return a}function I(){var a;q++;a=fa();q--;a===f&&0===q&&d(Gh);return a}function O(){var a,b,c,e,h;q++;a=g;k.substr(g,3)===Qd?(b=Qd,g+=3):(b=f,0===q&&d(Hh));b===f&&(k.substr(g,3)===Rd?(b=Rd,g+=3):(b=f,0===q&&d(Ih)),b===f&&(k.substr(g,4)===Sd?(b=Sd,g+=4):(b=f,0===q&&d(Jh)),b===f&&(k.substr(g,4)===Td?(b=Td,g+=
4):(b=f,0===q&&d(Kh)))));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(e=Hc(),e!==f){c=[];for(h=r();h!==f;)c.push(h),h=r();c!==f?(a=e,a=b={direction:b.toUpperCase(),expression:a}):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f)if(a=g,b=fa(),b===f&&(b=P()),b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?("var"===b.token&&(b={token:"expression",expressionType:"atomic",primaryexpression:"var",value:b}),a=b={direction:"ASC",expression:b}):(g=a,a=f)}else g=a,a=f;q--;a===f&&
0===q&&d(Lh);return a}function L(){var a,b,c,e;q++;a=g;k.substr(g,5)===Ud?(b=Ud,g+=5):(b=f,0===q&&d(Mh));b===f&&(k.substr(g,5)===Vd?(b=Vd,g+=5):(b=f,0===q&&d(Nh)));if(b!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(b=qb(),b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?a=b={limit:parseInt(b.value)}:(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(Oh);return a}function B(){var a,b,c,e;q++;a=g;k.substr(g,6)===Wd?(b=Wd,g+=6):(b=f,0===q&&d(Ph));b===f&&(k.substr(g,6)===
Xd?(b=Xd,g+=6):(b=f,0===q&&d(Qh)));if(b!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(b=qb(),b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?a=b={offset:parseInt(b.value)}:(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(Rh);return a}function R(){var a;q++;a=na();a===f&&(a=ob(),a===f&&(a=Ob(),a===f&&(a=Pb(),a===f&&(k.substr(g,5)===bc?(a=bc,g+=5):(a=f,0===q&&d(Yd))))));q--;a===f&&0===q&&d(Sh);return a}function C(){var a,b,c,e,h,l,z,n;q++;a=g;b=v();if(b!==f){c=[];for(e=
r();e!==f;)c.push(e),e=r();if(c!==f){q++;q++;c=g;k.substr(g,4)===Zd?(e=Zd,g+=4):(e=f,0===q&&d(Th));e===f&&(k.substr(g,4)===$d?(e=$d,g+=4):(e=f,0===q&&d(Uh)));if(e!==f){h=[];for(e=r();e!==f;)h.push(e),e=r();if(h!==f)if(e=na(),e!==f){l=[];for(h=r();h!==f;)l.push(h),h=r();if(l!==f){h=g;k.substr(g,4)===ae?(l=ae,g+=4):(l=f,0===q&&d(Vh));l===f&&(k.substr(g,4)===be?(l=be,g+=4):(l=f,0===q&&d(Wh)));if(l!==f){z=[];for(n=r();n!==f;)z.push(n),n=r();z!==f?(n=ea(),n!==f?h=l=[l,z,n]:(g=h,h=f)):(g=h,h=f)}else g=
h,h=f;h===f&&(h=null);h!==f?(c=h,h={kind:"load",token:"executableunit"},h.sourceGraph=e,null!=c&&(h.destinyGraph=c[2]),c=h):(g=c,c=f)}else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;q--;c===f&&0===q&&d(Xh);e=c;if(e===f){q++;e=g;k.substr(g,5)===ce?(c=ce,g+=5):(c=f,0===q&&d(Yh));c===f&&(k.substr(g,5)===de?(c=de,g+=5):(c=f,0===q&&d(Zh)));if(c!==f){c=[];for(h=r();h!==f;)c.push(h),h=r();if(c!==f)if(k.substr(g,6)===wb?(h=wb,g+=6):(h=f,0===q&&d(Nc)),h===f&&(k.substr(g,6)===xb?(h=xb,g+=6):(h=f,0===q&&
d(Oc))),h===f&&(h=null),h!==f){h=[];for(c=r();c!==f;)h.push(c),c=r();h!==f?(c=Ba(),c!==f?(e={kind:"clear",token:"executableunit"},e.destinyGraph=c):(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f}else g=e,e=f;q--;e===f&&0===q&&d($h);if(e===f){q++;e=g;k.substr(g,4)===ee?(c=ee,g+=4):(c=f,0===q&&d(ai));c===f&&(k.substr(g,4)===fe?(c=fe,g+=4):(c=f,0===q&&d(bi)));if(c!==f){c=[];for(h=r();h!==f;)c.push(h),h=r();if(c!==f)if(k.substr(g,6)===wb?(h=wb,g+=6):(h=f,0===q&&d(Nc)),h===f&&(k.substr(g,6)===xb?(h=xb,
g+=6):(h=f,0===q&&d(Oc))),h===f&&(h=null),h!==f){h=[];for(c=r();c!==f;)h.push(c),c=r();h!==f?(c=Ba(),c!==f?(e={kind:"drop",token:"executableunit"},e.destinyGraph=c):(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f}else g=e,e=f;q--;e===f&&0===q&&d(ci);if(e===f){q++;e=g;k.substr(g,6)===ge?(c=ge,g+=6):(c=f,0===q&&d(di));c===f&&(k.substr(g,6)===he?(c=he,g+=6):(c=f,0===q&&d(ei)));if(c!==f){c=[];for(h=r();h!==f;)c.push(h),h=r();if(c!==f)if(k.substr(g,6)===wb?(h=wb,g+=6):(h=f,0===q&&d(Nc)),h===f&&(k.substr(g,
6)===xb?(h=xb,g+=6):(h=f,0===q&&d(Oc))),h===f&&(h=null),h!==f){h=[];for(c=r();c!==f;)h.push(c),c=r();h!==f?(c=ea(),c!==f?(e={kind:"create",token:"executableunit"},e.destinyGraph=c):(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f}else g=e,e=f;q--;e===f&&0===q&&d(fi);if(e===f){q++;e=g;k.substr(g,6)===cc?(c=cc,g+=6):(c=f,0===q&&d(ie));c===f&&(k.substr(g,6)===dc?(c=dc,g+=6):(c=f,0===q&&d(je)));if(c!==f){c=[];for(h=r();h!==f;)c.push(h),h=r();if(c!==f)if(k.substr(g,4)===ec?(h=ec,g+=4):(h=f,0===q&&d(ke)),
h===f&&(k.substr(g,4)===fc?(h=fc,g+=4):(h=f,0===q&&d(le))),h!==f){h=[];for(c=r();c!==f;)h.push(c),c=r();h!==f?(c=J(),c!==f?(e={kind:"insertdata",token:"executableunit"},e.quads=c):(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f}else g=e,e=f;q--;e===f&&0===q&&d(gi);if(e===f){q++;e=g;k.substr(g,6)===yb?(c=yb,g+=6):(c=f,0===q&&d(Pc));c===f&&(k.substr(g,6)===zb?(c=zb,g+=6):(c=f,0===q&&d(Qc)));if(c!==f){c=[];for(h=r();h!==f;)c.push(h),h=r();c!==f?(k.substr(g,4)===ec?(h=ec,g+=4):(h=f,0===q&&d(ke)),h===f&&
(k.substr(g,4)===fc?(h=fc,g+=4):(h=f,0===q&&d(le))),h!==f?(c=J(),c!==f?(e={kind:"deletedata",token:"executableunit"},e.quads=c):(g=e,e=f)):(g=e,e=f)):(g=e,e=f)}else g=e,e=f;q--;e===f&&0===q&&d(hi);if(e===f){q++;e=g;k.substr(g,6)===yb?(c=yb,g+=6):(c=f,0===q&&d(Pc));c===f&&(k.substr(g,6)===zb?(c=zb,g+=6):(c=f,0===q&&d(Qc)));if(c!==f){c=[];for(h=r();h!==f;)c.push(h),h=r();if(c!==f)if(k.substr(g,5)===bb?(h=bb,g+=5):(h=f,0===q&&d(Ub)),h===f&&(k.substr(g,5)===cb?(h=cb,g+=5):(h=f,0===q&&d(Vb))),h!==f){c=
[];for(h=r();h!==f;)c.push(h),h=r();if(c!==f)if(h=Y(),h!==f){e={kind:"modify"};e.pattern=h;e["with"]=null;e.using=null;c=[];h=h.patterns[0];h=null==h.triplesContext&&null!=h.patterns?h.patterns[0].triplesContext:h.triplesContext;for(l=0;l<h.length;l++)z={},n=h[l],z.subject=n.subject,z.predicate=n.predicate,z.object=n.object,z.graph=n.graph,c.push(z);e["delete"]=c}else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f}else g=e,e=f;q--;e===f&&0===q&&d(ii);if(e===f){var m;q++;h=c=g;k.substr(g,4)===me?(l=
me,g+=4):(l=f,0===q&&d(ji));l===f&&(k.substr(g,4)===ne?(l=ne,g+=4):(l=f,0===q&&d(ki)));if(l!==f){e=[];for(z=r();z!==f;)e.push(z),z=r();e!==f?(z=na(),z!==f?h=l=[l,e,z]:(g=h,h=f)):(g=h,h=f)}else g=h,h=f;h===f&&(h=null);if(h!==f){l=[];for(e=r();e!==f;)l.push(e),e=r();if(l!==f){e=g;q++;l=g;k.substr(g,6)===yb?(z=yb,g+=6):(z=f,0===q&&d(Pc));z===f&&(k.substr(g,6)===zb?(z=zb,g+=6):(z=f,0===q&&d(Qc)));z!==f?(z=H(),z!==f?l=z:(g=l,l=f)):(g=l,l=f);q--;l===f&&0===q&&d(li);z=l;if(z!==f){l=[];for(n=r();n!==f;)l.push(n),
n=r();l!==f?(n=N(),n===f&&(n=null),n!==f?e=z=[z,l,n]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;e===f&&(e=N());if(e!==f){z=[];for(l=r();l!==f;)z.push(l),l=r();if(z!==f){l=[];for(n=E();n!==f;)l.push(n),n=E();if(l!==f){n=[];for(z=r();z!==f;)n.push(z),z=r();if(n!==f)if(k.substr(g,5)===bb?(z=bb,g+=5):(z=f,0===q&&d(Ub)),z===f&&(k.substr(g,5)===cb?(z=cb,g+=5):(z=f,0===q&&d(Vb))),z!==f){n=[];for(z=r();z!==f;)n.push(z),z=r();if(n!==f)if(z=Y(),z!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(c=h,h=l,l={kind:"modify"},
l["with"]=""!=c&&null!=c?c[2]:null,3!==e.length||""!==e[2]&&null!=e[2]?3===e.length&&null!=e[0].length&&null!=e[1].length&&null!=e[2].length?(l["delete"]=e[0],l.insert=e[2]):(l.insert=e,l["delete"]=null):(l["delete"]=e[0],l.insert=null),""!=h&&(l.using=h),l.pattern=z,c=l):(g=c,c=f)}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f}else g=c,c=f}else g=c,c=f}else g=c,c=f}else g=c,c=f;q--;c===f&&0===q&&d(mi);e=c}}}}}}}q--;e===f&&0===q&&d(ni);if(e!==f){c=g;h=[];for(l=r();l!==f;)h.push(l),
l=r();if(h!==f)if(59===k.charCodeAt(g)?(l=Va,g++):(l=f,0===q&&d(Wa)),l!==f){z=[];for(n=r();n!==f;)z.push(n),n=r();z!==f?(n=C(),n===f&&(n=null),n!==f?c=h=[h,l,z,n]:(g=c,c=f)):(g=c,c=f)}else g=c,c=f;else g=c,c=f;c===f&&(c=null);c!==f?(a=c,c={token:"query",kind:"update"},c.prologue=b,b=[e],null!=a&&null!=a.length&&null!=a[3]&&null!=a[3].units&&(b=b.concat(a[3].units)),c.units=b,a=c):(g=a,a=f)}else g=a,a=f}else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(oi);return a}function N(){var a,b;q++;a=g;k.substr(g,
6)===cc?(b=cc,g+=6):(b=f,0===q&&d(ie));b===f&&(k.substr(g,6)===dc?(b=dc,g+=6):(b=f,0===q&&d(je)));b!==f?(b=H(),b!==f?a=b:(g=a,a=f)):(g=a,a=f);q--;a===f&&0===q&&d(pi);return a}function E(){var a,b,c,e,h;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(k.substr(g,5)===oe?(c=oe,g+=5):(c=f,0===q&&d(qi)),c===f&&(k.substr(g,5)===pe?(c=pe,g+=5):(c=f,0===q&&d(ri))),c!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f){b=na();if(b===f)if(b=g,k.substr(g,5)===ub?(c=ub,g+=5):(c=f,0===q&&d(Lc)),c===
f&&(k.substr(g,5)===vb?(c=vb,g+=5):(c=f,0===q&&d(Mc))),c!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();e!==f?(h=na(),h!==f?b=c=[c,e,h]:(g=b,b=f)):(g=b,b=f)}else g=b,b=f;b!==f?(b=null!=b.length?{kind:"named",uri:b[2]}:{kind:"default",uri:b},a=b):(g=a,a=f)}else g=a,a=f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(si);return a}function ea(){var a,b,c;q++;a=g;k.substr(g,5)===Ab?(b=Ab,g+=5):(b=f,0===q&&d(Rc));b===f&&(k.substr(g,5)===Bb?(b=Bb,g+=5):(b=f,0===q&&d(Sc)));if(b!==f){b=[];for(c=r();c!==f;)b.push(c),
c=r();b!==f?(c=na(),c!==f?a=c:(g=a,a=f)):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(ti);return a}function Ba(){var a;q++;a=ea();a===f&&(k.substr(g,7)===qe?(a=qe,g+=7):(a=f,0===q&&d(ui)),a===f&&(k.substr(g,7)===re?(a=re,g+=7):(a=f,0===q&&d(vi))),a!==f&&(a="default"),a===f&&(k.substr(g,5)===ub?(a=ub,g+=5):(a=f,0===q&&d(Lc)),a===f&&(k.substr(g,5)===vb?(a=vb,g+=5):(a=f,0===q&&d(Mc))),a!==f&&(a="named"),a===f&&(k.substr(g,3)===se?(a=se,g+=3):(a=f,0===q&&d(wi)),a===f&&(k.substr(g,3)===te?(a=te,g+=3):(a=
f,0===q&&d(xi))),a!==f&&(a="all"))));q--;a===f&&0===q&&d(yi);return a}function H(){var a,b,c,e;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(123===k.charCodeAt(g)?(c=Ha,g++):(c=f,0===q&&d(Ia)),c!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(b=S(),b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(125===k.charCodeAt(g)?(e=ya,g++):(e=f,0===q&&d(za)),e!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?a=b=b.quadsContext:(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=
a,a=f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(zi);return a}function J(){var a,b,c,e;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(123===k.charCodeAt(g)?(c=Ha,g++):(c=f,0===q&&d(Ia)),c!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(b=S(),b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(125===k.charCodeAt(g)?(e=ya,g++):(e=f,0===q&&d(za)),e!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?a=b=b.quadsContext:(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=
f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Ai);return a}function S(){var a,b,c,e,h,l,r;q++;a=g;b=Aa();b===f&&(b=null);if(b!==f){c=[];e=g;h=wa();h!==f?(46===k.charCodeAt(g)?(l=sa,g++):(l=f,0===q&&d(ta)),l===f&&(l=null),l!==f?(r=Aa(),r===f&&(r=null),r!==f?e=h=[h,l,r]:(g=e,e=f)):(g=e,e=f)):(g=e,e=f);for(;e!==f;)c.push(e),e=g,h=wa(),h!==f?(46===k.charCodeAt(g)?(l=sa,g++):(l=f,0===q&&d(ta)),l===f&&(l=null),l!==f?(r=Aa(),r===f&&(r=null),r!==f?e=h=[h,l,r]:(g=e,e=f)):(g=e,e=f)):(g=e,e=f);if(c!==f){a=
b;b=[];if(null!=a&&null!=a.triplesContext)for(e=0;e<a.triplesContext.length;e++)h=a.triplesContext[e],h.graph=null,b.push(h);if(c&&0<c.length&&0<c[0].length&&(b=b.concat(c[0][0].quadsContext),null!=c[0][2]&&null!=c[0][2].triplesContext))for(e=0;e<c[0][2].triplesContext.length;e++)h=c[0][2].triplesContext[e],h.graph=null,b.push(h);a=b={token:"quads",quadsContext:b}}else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(Bi);return a}function wa(){var a,b,c,e,h;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==
f)if(k.substr(g,5)===Ab?(c=Ab,g+=5):(c=f,0===q&&d(Rc)),c===f&&(k.substr(g,5)===Bb?(c=Bb,g+=5):(c=f,0===q&&d(Sc))),c!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(b=Na(),b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(123===k.charCodeAt(g)?(e=Ha,g++):(e=f,0===q&&d(Ia)),e!==f){e=[];for(c=r();c!==f;)e.push(c),c=r();if(e!==f)if(c=Aa(),c===f&&(c=null),c!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(125===k.charCodeAt(g)?(h=ya,g++):(h=f,0===q&&d(za)),h!==f){e=[];for(h=r();h!==
f;)e.push(h),h=r();if(e!==f){a=b;b=c;c=[];if(null!=b)for(e=0;e<b.triplesContext.length;e++)h=b.triplesContext[e],h.graph=a,c.push(h);a=b={token:"quadsnottriples",quadsContext:c}}else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Ci);return a}function Aa(){var a,b,c,e,h,l,n;q++;a=g;b=Ya();if(b!==f){c=g;e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(46===k.charCodeAt(g)?(h=sa,g++):(h=f,
0===q&&d(ta)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(n=Aa(),n===f&&(n=null),n!==f?c=e=[e,h,l,n]:(g=c,c=f)):(g=c,c=f)}else g=c,c=f;else g=c,c=f;c===f&&(c=null);c!==f?(a=b.triplesContext,null!=c&&"object"===typeof c&&null!=c.length&&null!=c[3]&&null!=c[3].triplesContext&&(a=a.concat(c[3].triplesContext)),a=b={token:"triplestemplate",triplesContext:a}):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Di);return a}function Y(){var a,b,c,e;q++;a=g;123===k.charCodeAt(g)?(b=Ha,g++):(b=f,0===q&&d(Ia));
if(b!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f){var h;q++;e=g;h=n();h!==f?(b=u(),b!==f?(c=A(),c!==f?(e=h,h={kind:"select",token:"subselect"},h.projection=e.vars,h.modifier=e.modifier,h.pattern=b,null!=c&&null!=c.limit&&(h.limit=c.limit),null!=c&&null!=c.offset&&(h.offset=c.offset),null!=c&&null!=c.order&&""!=c.order&&(h.order=c.order),null!=c&&null!=c.group&&(h.group=c.group),e=h):(g=e,e=f)):(g=e,e=f)):(g=e,e=f);q--;e===f&&0===q&&d(Ei);b=e;if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();
c!==f?(125===k.charCodeAt(g)?(e=ya,g++):(e=f,0===q&&d(za)),e!==f?a=b:(g=a,a=f)):(g=a,a=f)}else g=a,a=f}else g=a,a=f}else g=a,a=f;if(a===f)if(a=g,123===k.charCodeAt(g)?(b=Ha,g++):(b=f,0===q&&d(Ia)),b!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f){var l,z,m,t,v;q++;c=g;b=da();b===f&&(b=null);if(b!==f){h=[];for(e=r();e!==f;)h.push(e),e=r();if(h!==f){e=[];h=g;l=ja();if(l!==f){z=[];for(m=r();m!==f;)z.push(m),m=r();if(z!==f)if(46===k.charCodeAt(g)?(m=sa,g++):(m=f,0===q&&d(ta)),m===f&&(m=null),m!==
f){t=[];for(v=r();v!==f;)t.push(v),v=r();t!==f?(v=da(),v===f&&(v=null),v!==f?h=l=[l,z,m,t,v]:(g=h,h=f)):(g=h,h=f)}else g=h,h=f;else g=h,h=f}else g=h,h=f;for(;h!==f;)if(e.push(h),h=g,l=ja(),l!==f){z=[];for(m=r();m!==f;)z.push(m),m=r();if(z!==f)if(46===k.charCodeAt(g)?(m=sa,g++):(m=f,0===q&&d(ta)),m===f&&(m=null),m!==f){t=[];for(v=r();v!==f;)t.push(v),v=r();t!==f?(v=da(),v===f&&(v=null),v!==f?h=l=[l,z,m,t,v]:(g=h,h=f)):(g=h,h=f)}else g=h,h=f;else g=h,h=f}else g=h,h=f;if(e!==f){h=e;c=[];null!=b&&b!=
[]&&c.push(b);for(b=0;b<h.length;b++)for(e=0;e<h[b].length;e++)null!=h[b][e]&&null!=h[b][e].token&&c.push(h[b][e]);h=[];l=[];z=[];m=[];for(b=0;b<c.length;b++)if("triplespattern"!==c[b].token&&"filter"!==c[b].token&&"bind"!==c[b].token){if(0!=l.length||0!=z.length){t=[];for(e=0;e<l.length;e++)t=t.concat(l[e].triplesContext);0<t.length&&h.push({token:"basicgraphpattern",triplesContext:t});l=[]}h.push(c[b])}else"triplespattern"===c[b].token?l.push(c[b]):"bind"===c[b].token?m.push(c[b]):z.push(c[b]);
if(0!=l.length||0!=z.length){t=[];for(e=0;e<l.length;e++)t=t.concat(l[e].triplesContext);0<t.length&&h.push({token:"basicgraphpattern",triplesContext:t})}c=b={token:"groupgraphpattern",patterns:h,filters:z,binds:m}}else g=c,c=f}else g=c,c=f}else g=c,c=f;q--;c===f&&0===q&&d(Fi);b=c;if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?(125===k.charCodeAt(g)?(e=ya,g++):(e=f,0===q&&d(za)),e!==f?a=b:(g=a,a=f)):(g=a,a=f)}else g=a,a=f}else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(Gi);return a}function da(){var a,
b,c,e,h,l;q++;a=g;q++;c=g;e=[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f)if(b=K(),b!==f){h=[];for(e=r();e!==f;)h.push(e),e=r();if(h!==f)if(e=sb(),e!==f){c=b;b=e.triplesContext;if(e.pairs)for(h=0;h<e.pairs.length;h++)l=e.pairs[h],null!=l[1].length&&(l[1]=l[1][0]),c.token&&"triplesnodecollection"===c.token?(l={subject:c.chainSubject[0],predicate:l[0],object:l[1]},"path"===l.predicate.token&&"element"===l.predicate.kind&&(l.predicate=l.predicate.value),b.push(l),b=b.concat(c.triplesContext)):(l={subject:c,
predicate:l[0],object:l[1]},"path"===l.predicate.token&&"element"===l.predicate.kind&&(l.predicate=l.predicate.value),b.push(l));e={token:"triplessamesubject"};e.triplesContext=b;e.chainSubject=c;c=e}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f;if(c===f){c=g;e=[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f)if(b=tb(),b!==f){h=[];for(e=r();e!==f;)h.push(e),e=r();if(h!==f){q++;var n,m,u,t,v,y,A,D,w;q++;l=g;n=xa();n===f&&(n=Ea());if(n!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(h=Ib(),
h!==f){e=[];m=g;u=[];for(t=r();t!==f;)u.push(t),t=r();if(u!==f)if(59===k.charCodeAt(g)?(t=Va,g++):(t=f,0===q&&d(Wa)),t!==f){v=[];for(y=r();y!==f;)v.push(y),y=r();if(v!==f){y=g;A=xa();A===f&&(A=Ea());if(A!==f){D=[];for(w=r();w!==f;)D.push(w),w=r();D!==f?(w=oa(),w!==f?y=A=[A,D,w]:(g=y,y=f)):(g=y,y=f)}else g=y,y=f;y===f&&(y=null);y!==f?m=u=[u,t,v,y]:(g=m,m=f)}else g=m,m=f}else g=m,m=f;else g=m,m=f;for(;m!==f;){e.push(m);m=g;u=[];for(t=r();t!==f;)u.push(t),t=r();if(u!==f)if(59===k.charCodeAt(g)?(t=Va,
g++):(t=f,0===q&&d(Wa)),t!==f){v=[];for(y=r();y!==f;)v.push(y),y=r();if(v!==f){y=g;A=xa();A===f&&(A=Ea());if(A!==f){D=[];for(w=r();w!==f;)D.push(w),w=r();D!==f?(w=oa(),w!==f?y=A=[A,D,w]:(g=y,y=f)):(g=y,y=f)}else g=y,y=f;y===f&&(y=null);y!==f?m=u=[u,t,v,y]:(g=m,m=f)}else g=m,m=f}else g=m,m=f;else g=m,m=f}if(e!==f){u=n;t=h;h={token:"propertylist"};l=[];n=[];for(m=0;m<t.length;m++)null!=t[m].triplesContext?(l=l.concat(t[m].triplesContext),"triplesnodecollection"===t[m].token&&null!=t[m].chainSubject.length?
n.push([u,t[m].chainSubject[0]]):n.push([u,t[m].chainSubject])):n.push([u,t[m]]);for(m=0;m<e.length;m++)for(t=e[m][3],u=t[0],t=t[2]||[],v=0;v<t.length;v++)null!=t[v].triplesContext?(l=l.concat(t[v].triplesContext),n.push([u,t[v].chainSubject])):n.push([u,t[v]]);h.pairs=n;h.triplesContext=l;l=h}else g=l,l=f}else g=l,l=f;else g=l,l=f}else g=l,l=f;q--;l===f&&0===q&&d(Hi);e=l;e===f&&(e=null);q--;e===f&&0===q&&d(Ii);if(e!==f){c=b;h=e;b=c.triplesContext;e=c.chainSubject;if(null!=h&&null!=h.pairs)for(l=
0;l<h.pairs.length;l++)if(n=h.pairs[l],null!=n[1].length&&(n[1]=n[1][0]),"triplesnodecollection"===c.token)for(m=0;m<e.length;m++)u=e[m],null!=u.triplesContext?b.concat(u.triplesContext):(u={subject:e[m],predicate:n[0],object:n[1]},b.push(u));else u={subject:e,predicate:n[0],object:n[1]},b.push(u);c={token:"triplessamesubject"};c.triplesContext=b;c.chainSubject=e}else g=c,c=f}else g=c,c=f}else g=c,c=f;else g=c,c=f}q--;c===f&&0===q&&d(Ji);b=c;if(b!==f){c=g;e=[];for(h=r();h!==f;)e.push(h),h=r();e!==
f?(46===k.charCodeAt(g)?(h=sa,g++):(h=f,0===q&&d(ta)),h!==f?(l=da(),l===f&&(l=null),l!==f?c=e=[e,h,l]:(g=c,c=f)):(g=c,c=f)):(g=c,c=f);c===f&&(c=null);c!==f?(a=b.triplesContext,null!=c&&"object"===typeof c&&null!=c&&null!=c.length&&null!=c[2]&&null!=c[2].triplesContext&&(a=a.concat(c[2].triplesContext)),a=b={token:"triplespattern",triplesContext:a}):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Ki);return a}function ja(){var a;q++;var b,c,e,h,l,n,m;q++;b=g;c=Y();if(c!==f){a=[];e=g;h=[];for(l=r();l!==
f;)h.push(l),l=r();if(h!==f)if(k.substr(g,5)===gc?(l=gc,g+=5):(l=f,0===q&&d(ue)),l===f&&(k.substr(g,5)===hc?(l=hc,g+=5):(l=f,0===q&&d(ve))),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Y(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;for(;e!==f;){a.push(e);e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(k.substr(g,5)===gc?(l=gc,g+=5):(l=f,0===q&&d(ue)),l===f&&(k.substr(g,5)===hc?(l=hc,g+=5):(l=f,0===q&&d(ve))),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?
(m=Y(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f}if(a!==f){if(0!==a.length){b={token:"graphunionpattern",value:[c]};for(c=0;c<a.length;c++)c==a.length-1?b.value.push(a[c][3]):(b.value.push(a[c][3]),b={token:"graphunionpattern",value:[b]});c=b}b=c}else g=b,b=f}else g=b,b=f;q--;b===f&&0===q&&d(Li);a=b;if(a===f){q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(k.substr(g,8)===we?(c=we,g+=8):(c=f,0===q&&d(Mi)),c===f&&(k.substr(g,8)===xe?(c=xe,g+=8):(c=f,0===q&&d(Ni))),
c!==f){b=[];for(c=r();c!==f;)b.push(c),c=r();b!==f?(c=Y(),c!==f?a=b={token:"optionalgraphpattern",value:c}:(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Oi);if(a===f){q++;a=g;k.substr(g,5)===ye?(b=ye,g+=5):(b=f,0===q&&d(Pi));b===f&&(k.substr(g,5)===ze?(b=ze,g+=5):(b=f,0===q&&d(Qi)));if(b!==f){b=[];for(c=r();c!==f;)b.push(c),c=r();b!==f?(c=Y(),c!==f?a=b={token:"minusgraphpattern",status:"todo",value:c}:(g=a,a=f)):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Ri);if(a===f){q++;a=g;
b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(k.substr(g,5)===Ab?(c=Ab,g+=5):(c=f,0===q&&d(Rc)),c===f&&(k.substr(g,5)===Bb?(c=Bb,g+=5):(c=f,0===q&&d(Sc))),c!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(b=Na(),b!==f){e=[];for(c=r();c!==f;)e.push(c),c=r();if(e!==f)if(c=Y(),c!==f){a=b;b=c;for(c=0;c<b.patterns.length;c++)for(e=b.patterns[c],h=0;h<e.triplesContext.length;h++)e.triplesContext[h].graph=a;b.token="groupgraphpattern";a=b}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=
a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Si);if(a===f&&(q++,a=g,k.substr(g,7)===Ae?(b=Ae,g+=7):(b=f,0===q&&d(Ti)),b!==f?(b=Na(),b!==f?(c=Y(),c!==f?a=b={token:"servicegraphpattern",status:"todo",value:[b,c]}:(g=a,a=f)):(g=a,a=f)):(g=a,a=f),q--,a===f&&0===q&&d(Ui),a===f)){q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(k.substr(g,6)===Be?(c=Be,g+=6):(c=f,0===q&&d(Vi)),c===f&&(k.substr(g,6)===Ce?(c=Ce,g+=6):(c=f,0===q&&d(Wi))),c!==f){b=[];for(c=r();c!==f;)b.push(c),c=r();b!==f?(c=fa(),c!==f?
a=b={token:"filter",value:c}:(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Xi);if(a===f){q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(k.substr(g,4)===De?(c=De,g+=4):(c=f,0===q&&d(Yi)),c===f&&(k.substr(g,4)===Ee?(c=Ee,g+=4):(c=f,0===q&&d(Zi))),c!==f){b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(40===k.charCodeAt(g)?(c=T,g++):(c=f,0===q&&d(U)),c!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(b=Q(),b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(k.substr(g,
2)===gb?(e=gb,g+=2):(e=f,0===q&&d(Zb)),e===f&&(k.substr(g,2)===fb?(e=fb,g+=2):(e=f,0===q&&d(Yb))),e!==f){e=[];for(c=r();c!==f;)e.push(c),c=r();if(e!==f)if(c=P(),c!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();e!==f?(41===k.charCodeAt(g)?(h=V,g++):(h=f,0===q&&d(W)),h!==f?a=b={token:"bind",expression:b,as:c}:(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d($i);if(a===f){q++;a=g;b=[];
for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(k.substr(g,6)===Wb?(c=Wb,g+=6):(c=f,0===q&&d(wd)),c===f&&(k.substr(g,6)===Xb?(c=Xb,g+=6):(c=f,0===q&&d(xd))),c!==f){b=[];for(c=r();c!==f;)b.push(c),c=r();b!==f?(c=Da(),c!==f?a=c:(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(aj)}}}}}}q--;a===f&&0===q&&d(bj);return a}function fa(){var a;q++;a=Hc();a===f&&(a=Pa(),a===f&&(a=X()));q--;a===f&&0===q&&d(cj);return a}function Da(){var a;q++;var b,c,e;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),
c=r();if(b!==f)if(c=P(),c!==f){b=[];for(e=r();e!==f;)b.push(e),e=r();if(b!==f)if(123===k.charCodeAt(g)?(e=Ha,g++):(e=f,0===q&&d(Ia)),e!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f){b=[];for(e=ka();e!==f;)b.push(e),e=ka();b!==f?(125===k.charCodeAt(g)?(e=ya,g++):(e=f,0===q&&d(za)),e!==f?a=b={token:"inlineData",values:[{"var":c,value:b}]}:(g=a,a=f)):(g=a,a=f)}else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(dj);if(a===f){var h,l,n,m,u,t,v;q++;a=g;c=[];for(e=
r();e!==f;)c.push(e),e=r();if(c!==f){e=Sa();if(e===f)if(e=g,40===k.charCodeAt(g)?(h=T,g++):(h=f,0===q&&d(U)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();if(l!==f){n=[];for(c=P();c!==f;)n.push(c),c=P();if(n!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();c!==f?(41===k.charCodeAt(g)?(b=V,g++):(b=f,0===q&&d(W)),b!==f?e=h=[h,l,n,c,b]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f}else g=e,e=f}else g=e,e=f;if(e!==f){h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(123===k.charCodeAt(g)?(l=Ha,g++):(l=f,0===q&&d(Ia)),l!==
f){n=[];for(c=r();c!==f;)n.push(c),c=r();if(n!==f){c=[];b=g;e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(40===k.charCodeAt(g)?(h=T,g++):(h=f,0===q&&d(U)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();if(l!==f){n=[];for(m=ka();m!==f;)n.push(m),m=ka();if(n!==f){m=[];for(u=r();u!==f;)m.push(u),u=r();if(m!==f)if(41===k.charCodeAt(g)?(u=V,g++):(u=f,0===q&&d(W)),u!==f){t=[];for(v=r();v!==f;)t.push(v),v=r();t!==f?b=e=[e,h,l,n,m,u,t]:(g=b,b=f)}else g=b,b=f;else g=b,b=f}else g=b,b=f}else g=b,b=f}else g=
b,b=f;else g=b,b=f;for(b===f&&(b=Sa());b!==f;){c.push(b);b=g;e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(40===k.charCodeAt(g)?(h=T,g++):(h=f,0===q&&d(U)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();if(l!==f){n=[];for(m=ka();m!==f;)n.push(m),m=ka();if(n!==f){m=[];for(u=r();u!==f;)m.push(u),u=r();if(m!==f)if(41===k.charCodeAt(g)?(u=V,g++):(u=f,0===q&&d(W)),u!==f){t=[];for(v=r();v!==f;)t.push(v),v=r();t!==f?b=e=[e,h,l,n,m,u,t]:(g=b,b=f)}else g=b,b=f;else g=b,b=f}else g=b,b=f}else g=b,b=f}else g=
b,b=f;else g=b,b=f;b===f&&(b=Sa())}if(c!==f){b=[];for(e=r();e!==f;)b.push(e),e=r();b!==f?(125===k.charCodeAt(g)?(e=ya,g++):(e=f,0===q&&d(za)),e!==f?a=c={token:"inlineData",values:[],todo:!0}:(g=a,a=f)):(g=a,a=f)}else g=a,a=f}else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(ej)}q--;a===f&&0===q&&d(fj);return a}function ka(){var a,b,c,e;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(c=Qb(),c===f&&(c=ob(),c===f&&(c=Ob(),c===f&&(c=Pb(),c===f&&(k.substr(g,
5)===bc?(c=bc,g+=5):(c=f,0===q&&d(Yd)))))),c!==f){b=[];for(e=r();e!==f;)b.push(e),e=r();b!==f?a=c:(g=a,a=f)}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(gj);return a}function X(){var a,b,c,e;q++;a=g;b=na();if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?(e=Qa(),e!==f?(a={token:"expression",expressionType:"irireforfunction"},a.iriref=b,a.args=e.value):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(hj);return a}function Qa(){var a,b,c,e,h,l,n,m;q++;b=Sa();b!==f&&(b={token:"args",value:[]});
a=b;if(a===f)if(a=g,40===k.charCodeAt(g)?(b=T,g++):(b=f,0===q&&d(U)),b!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(k.substr(g,8)===qa?(b=qa,g+=8):(b=f,0===q&&d(db)),b===f&&(k.substr(g,8)===ra?(b=ra,g+=8):(b=f,0===q&&d(eb))),b===f&&(b=null),b!==f){e=[];for(c=r();c!==f;)e.push(c),c=r();if(e!==f)if(c=Q(),c!==f){h=[];for(e=r();e!==f;)h.push(e),e=r();if(h!==f){e=[];h=g;44===k.charCodeAt(g)?(l=la,g++):(l=f,0===q&&d(ma));if(l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Q(),m!==f?h=l=[l,
n,m]:(g=h,h=f)):(g=h,h=f)}else g=h,h=f;for(;h!==f;)if(e.push(h),h=g,44===k.charCodeAt(g)?(l=la,g++):(l=f,0===q&&d(ma)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Q(),m!==f?h=l=[l,n,m]:(g=h,h=f)):(g=h,h=f)}else g=h,h=f;if(e!==f)if(41===k.charCodeAt(g)?(h=V,g++):(h=f,0===q&&d(W)),h!==f){a=b;b=c;c=[];for(h=0;h<e.length;h++)c.push(e[h][2]);e={token:"args"};e.value=[b].concat(c);null!=a&&"DISTINCT"===a.toUpperCase()?e.distinct=!0:e.distinct=!1;a=e}else g=a,a=f;else g=a,a=f}else g=a,a=f}else g=
a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(ij);return a}function Ga(){var a,b,c,e,h,l,n;q++;b=Sa();b!==f&&(b={token:"args",value:[]});a=b;if(a===f)if(a=g,40===k.charCodeAt(g)?(b=T,g++):(b=f,0===q&&d(U)),b!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(b=na(),b===f&&(b=Q()),b!==f){e=[];for(c=r();c!==f;)e.push(c),c=r();if(e!==f){c=[];e=g;44===k.charCodeAt(g)?(h=la,g++):(h=f,0===q&&d(ma));if(h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(n=na(),n===f&&
(n=Q()),n!==f?e=h=[h,l,n]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;for(;e!==f;)if(c.push(e),e=g,44===k.charCodeAt(g)?(h=la,g++):(h=f,0===q&&d(ma)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(n=na(),n===f&&(n=Q()),n!==f?e=h=[h,l,n]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;if(c!==f)if(41===k.charCodeAt(g)?(e=V,g++):(e=f,0===q&&d(W)),e!==f){a=b;b=[];for(e=0;e<c.length;e++)b.push(c[e][2]);c={token:"args"};c.value=[a].concat(b);a=c}else g=a,a=f;else g=a,a=f}else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=
f;q--;a===f&&0===q&&d(jj);return a}function Xa(){var a,b,c,e,h,l,n;q++;a=g;b=Ya();if(b!==f){c=g;e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(46===k.charCodeAt(g)?(h=sa,g++):(h=f,0===q&&d(ta)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(n=Xa(),n===f&&(n=null),n!==f?c=e=[e,h,l,n]:(g=c,c=f)):(g=c,c=f)}else g=c,c=f;else g=c,c=f;c===f&&(c=null);c!==f?(a=b.triplesContext,null!=c&&"object"===typeof c&&null!=c.length&&null!=c[3]&&null!=c[3].triplesContext&&(a=a.concat(c[3].triplesContext)),a=
b={token:"triplestemplate",triplesContext:a}):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(kj);return a}function Ya(){var a,b,c,e;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(c=K(),c!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f)if(b=ga(),b!==f){a=b.triplesContext;if(b.pairs)for(e=0;e<b.pairs.length;e++){var k=b.pairs[e];null!=k[1].length&&(k[1]=k[1][0]);c.token&&"triplesnodecollection"===c.token?(k={subject:c.chainSubject[0],predicate:k[0],object:k[1]},a.push(k),a=a.concat(c.triplesContext)):
(k={subject:c,predicate:k[0],object:k[1]},a.push(k))}b={token:"triplessamesubject"};b.triplesContext=a;b.chainSubject=c;a=b}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f;if(a===f){a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(c=pa(),c!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f)if(q++,b=ga(),b===f&&(b=null),q--,b===f&&0===q&&d(lj),b!==f){e=b;a=c.triplesContext;b=c.chainSubject;if(e.pairs)for(k=0;k<e.pairs.length;k++){var h=e.pairs[k];null!=h[1].length&&(h[1]=h[1][0]);if("triplesnodecollection"===
c.token)for(var l=0;l<b.length;l++){var n=b[l];null!=n.triplesContext?a.concat(n.triplesContext):(n={subject:b[l],predicate:h[0],object:h[1]},a.push(n))}else n={subject:b,predicate:h[0],object:h[1]},a.push(n)}c={token:"triplessamesubject"};c.triplesContext=a;c.chainSubject=b;a=c}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}q--;a===f&&0===q&&d(mj);return a}function ga(){var a,b,c,e,h,l,n,m,u,t,v,y;q++;a=g;b=Za();if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(e=oa(),e!==f){c=[];
h=g;l=[];for(n=r();n!==f;)l.push(n),n=r();if(l!==f)if(59===k.charCodeAt(g)?(n=Va,g++):(n=f,0===q&&d(Wa)),n!==f){m=[];for(u=r();u!==f;)m.push(u),u=r();if(m!==f){u=g;t=Za();if(t!==f){v=[];for(y=r();y!==f;)v.push(y),y=r();v!==f?(y=oa(),y!==f?u=t=[t,v,y]:(g=u,u=f)):(g=u,u=f)}else g=u,u=f;u===f&&(u=null);u!==f?h=l=[l,n,m,u]:(g=h,h=f)}else g=h,h=f}else g=h,h=f;else g=h,h=f;for(;h!==f;){c.push(h);h=g;l=[];for(n=r();n!==f;)l.push(n),n=r();if(l!==f)if(59===k.charCodeAt(g)?(n=Va,g++):(n=f,0===q&&d(Wa)),n!==
f){m=[];for(u=r();u!==f;)m.push(u),u=r();if(m!==f){u=g;t=Za();if(t!==f){v=[];for(y=r();y!==f;)v.push(y),y=r();v!==f?(y=oa(),y!==f?u=t=[t,v,y]:(g=u,u=f)):(g=u,u=f)}else g=u,u=f;u===f&&(u=null);u!==f?h=l=[l,n,m,u]:(g=h,h=f)}else g=h,h=f}else g=h,h=f;else g=h,h=f}if(c!==f){l=b;n=e;e={token:"propertylist"};a=[];b=[];for(h=0;h<n.length;h++)null!=n[h].triplesContext?(a=a.concat(n[h].triplesContext),"triplesnodecollection"===n[h].token&&null!=n[h].chainSubject.length?b.push([l,n[h].chainSubject[0]]):b.push([l,
n[h].chainSubject])):b.push([l,n[h]]);for(h=0;h<c.length;h++)for(n=c[h][3],l=n[0],n=n[2]||[],m=0;m<n.length;m++)null!=n[m].triplesContext?(a=a.concat(n[m].triplesContext),b.push([l,n[m].chainSubject])):b.push([l,n[m]]);e.pairs=b;e.triplesContext=a;a=e}else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(nj);return a}function Ib(){var a,b,c,e,h,l,n;q++;a=g;b=kb();if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f){e=[];c=g;44===k.charCodeAt(g)?(h=la,g++):(h=f,0===q&&d(ma));
if(h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(n=kb(),n!==f?c=h=[h,l,n]:(g=c,c=f)):(g=c,c=f)}else g=c,c=f;for(;c!==f;)if(e.push(c),c=g,44===k.charCodeAt(g)?(h=la,g++):(h=f,0===q&&d(ma)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(n=kb(),n!==f?c=h=[h,l,n]:(g=c,c=f)):(g=c,c=f)}else g=c,c=f;if(e!==f){a=e;e=[];e.push(b);for(b=0;b<a.length;b++)for(c=0;c<a[b].length;c++)"object"==typeof a[b][c]&&null!=a[b][c].token&&e.push(a[b][c]);a=e}else g=a,a=f}else g=a,a=f}else g=a,a=f;q--;a===f&&0===
q&&d(oj);return a}function oa(){var a,b,c,e,h,l,n;q++;a=g;b=Ra();if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f){e=[];c=g;44===k.charCodeAt(g)?(h=la,g++):(h=f,0===q&&d(ma));if(h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(n=Ra(),n!==f?c=h=[h,l,n]:(g=c,c=f)):(g=c,c=f)}else g=c,c=f;for(;c!==f;)if(e.push(c),c=g,44===k.charCodeAt(g)?(h=la,g++):(h=f,0===q&&d(ma)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(n=Ra(),n!==f?c=h=[h,l,n]:(g=c,c=f)):(g=c,c=f)}else g=c,c=f;if(e!==f){a=e;
e=[];e.push(b);for(b=0;b<a.length;b++)for(c=0;c<a[b].length;c++)"object"==typeof a[b][c]&&null!=a[b][c].token&&e.push(a[b][c]);a=e}else g=a,a=f}else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(pj);return a}function kb(){var a;q++;a=M();q--;a===f&&0===q&&d(qj);return a}function Ra(){var a;q++;a=Z();q--;a===f&&0===q&&d(rj);return a}function Za(){var a;q++;a=Na();a===f&&(97===k.charCodeAt(g)?(a=ic,g++):(a=f,0===q&&d(jc)),a!==f&&(a=Fe()));q--;a===f&&0===q&&d(sj);return a}function sb(){var a,b,c,e,h,l,n,
m,u,t,v;q++;a=g;b=xa();b===f&&(b=Ea());if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(e=Ib(),e!==f){c=[];h=g;l=[];for(n=r();n!==f;)l.push(n),n=r();if(l!==f)if(59===k.charCodeAt(g)?(n=Va,g++):(n=f,0===q&&d(Wa)),n!==f){m=[];for(u=r();u!==f;)m.push(u),u=r();m!==f?(u=g,t=xa(),t===f&&(t=Ea()),t!==f?(v=oa(),v!==f?u=t=[t,v]:(g=u,u=f)):(g=u,u=f),u===f&&(u=null),u!==f?h=l=[l,n,m,u]:(g=h,h=f)):(g=h,h=f)}else g=h,h=f;else g=h,h=f;for(;h!==f;){c.push(h);h=g;l=[];for(n=r();n!==f;)l.push(n),n=r();
if(l!==f)if(59===k.charCodeAt(g)?(n=Va,g++):(n=f,0===q&&d(Wa)),n!==f){m=[];for(u=r();u!==f;)m.push(u),u=r();m!==f?(u=g,t=xa(),t===f&&(t=Ea()),t!==f?(v=oa(),v!==f?u=t=[t,v]:(g=u,u=f)):(g=u,u=f),u===f&&(u=null),u!==f?h=l=[l,n,m,u]:(g=h,h=f)):(g=h,h=f)}else g=h,h=f;else g=h,h=f}if(c!==f){l=b;n=e;e={token:"propertylist"};a=[];b=[];for(h=0;h<n.length;h++)null!=n[h].triplesContext?(a=a.concat(n[h].triplesContext),"triplesnodecollection"===n[h].token&&null!=n[h].chainSubject.length?b.push([l,n[h].chainSubject[0]]):
b.push([l,n[h].chainSubject])):b.push([l,n[h]]);for(h=0;h<c.length;h++)for(n=c[h][3],l=n[0],n=n[1]||[],m=0;m<n.length;m++)null!=n[m].triplesContext?(a=a.concat(n[m].triplesContext),b.push([l,n[m].chainSubject])):b.push([l,n[m]]);e.pairs=b;e.triplesContext=a;a=e}else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(tj);return a}function xa(){var a;q++;a=rb();q--;a===f&&0===q&&d(uj);return a}function Ea(){var a;q++;a=P();q--;a===f&&0===q&&d(vj);return a}function rb(){var a;q++;var b,
c,e,h,l;q++;b=g;c=pb();if(c!==f){a=[];e=g;124===k.charCodeAt(g)?(h=kc,g++):(h=f,0===q&&d(lc));h!==f?(l=pb(),l!==f?e=h=[h,l]:(g=e,e=f)):(g=e,e=f);for(;e!==f;)a.push(e),e=g,124===k.charCodeAt(g)?(h=kc,g++):(h=f,0===q&&d(lc)),h!==f?(l=pb(),l!==f?e=h=[h,l]:(g=e,e=f)):(g=e,e=f);if(a!==f){if(null!=a&&0!==a.length){b=[];for(c=0;c<a.length;c++)b.push(a[1]);a={token:"path",kind:"alternative"};a.value=b;c=a}b=c}else g=b,b=f}else g=b,b=f;q--;b===f&&0===q&&d(wj);a=b;q--;a===f&&0===q&&d(xj);return a}function pb(){var a,
b,c,e,h,l;q++;a=g;b=aa();if(b!==f){c=[];e=g;47===k.charCodeAt(g)?(h=lb,g++):(h=f,0===q&&d(mb));h!==f?(l=aa(),l!==f?e=h=[h,l]:(g=e,e=f)):(g=e,e=f);for(;e!==f;)c.push(e),e=g,47===k.charCodeAt(g)?(h=lb,g++):(h=f,0===q&&d(mb)),h!==f?(l=aa(),l!==f?e=h=[h,l]:(g=e,e=f)):(g=e,e=f);if(c!==f){if(null!=c&&0!==c.length){a=[b];for(b=0;b<c.length;b++)a.push(c[b][1]);c={token:"path",kind:"sequence"};c.value=a;b=c}a=b}else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(yj);return a}function F(){var a,b,c;q++;a=g;var e;
q++;b=na();if(b===f&&(97===k.charCodeAt(g)?(c=ic,g++):(c=f,0===q&&d(jc)),c!==f&&(c=Fe()),b=c,b===f)){b=g;33===k.charCodeAt(g)?(c=Tc,g++):(c=f,0===q&&d(Uc));if(c!==f){var h,l,n,r,m,u,t;e=$a();if(e===f)if(e=g,40===k.charCodeAt(g)?(h=T,g++):(h=f,0===q&&d(U)),h!==f){l=g;n=$a();if(n!==f){r=[];m=g;124===k.charCodeAt(g)?(u=kc,g++):(u=f,0===q&&d(lc));u!==f?(t=$a(),t!==f?m=u=[u,t]:(g=m,m=f)):(g=m,m=f);for(;m!==f;)r.push(m),m=g,124===k.charCodeAt(g)?(u=kc,g++):(u=f,0===q&&d(lc)),u!==f?(t=$a(),t!==f?m=u=[u,
t]:(g=m,m=f)):(g=m,m=f);r!==f?l=n=[n,r]:(g=l,l=f)}else g=l,l=f;l===f&&(l=null);l!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?e=h=[h,l,n]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;e!==f?b=c=[c,e]:(g=b,b=f)}else g=b,b=f;b===f&&(b=g,40===k.charCodeAt(g)?(c=T,g++):(c=f,0===q&&d(U)),c!==f?(e=rb(),e!==f?(41===k.charCodeAt(g)?(c=V,g++):(c=f,0===q&&d(W)),c!==f?b=e:(g=b,b=f)):(g=b,b=f)):(g=b,b=f))}q--;b===f&&0===q&&d(zj);if(b!==f)if(q++,42===k.charCodeAt(g)?(c=Ta,g++):(c=f,0===q&&d(Ua)),c===f&&(63===
k.charCodeAt(g)?(c=Vc,g++):(c=f,0===q&&d(Wc)),c===f&&(43===k.charCodeAt(g)?(c=hb,g++):(c=f,0===q&&d(ib)),c===f&&(c=g,123===k.charCodeAt(g)?(e=Ha,g++):(e=f,0===q&&d(Ia)),e!==f?(h=g,l=Kb(),l!==f?(n=g,44===k.charCodeAt(g)?(r=la,g++):(r=f,0===q&&d(ma)),r!==f?(125===k.charCodeAt(g)?(m=ya,g++):(m=f,0===q&&d(za)),m===f&&(m=g,u=Kb(),u!==f?(125===k.charCodeAt(g)?(t=ya,g++):(t=f,0===q&&d(za)),t!==f?m=u=[u,t]:(g=m,m=f)):(g=m,m=f)),m!==f?n=r=[r,m]:(g=n,n=f)):(g=n,n=f),n===f&&(125===k.charCodeAt(g)?(n=ya,g++):
(n=f,0===q&&d(za))),n!==f?h=l=[l,n]:(g=h,h=f)):(g=h,h=f),h===f&&(h=g,44===k.charCodeAt(g)?(l=la,g++):(l=f,0===q&&d(ma)),l!==f?(n=Kb(),n!==f?(125===k.charCodeAt(g)?(r=ya,g++):(r=f,0===q&&d(za)),r!==f?h=l=[l,n,r]:(g=h,h=f)):(g=h,h=f)):(g=h,h=f)),h!==f?c=e=[e,h]:(g=c,c=f)):(g=c,c=f)))),q--,c===f&&0===q&&d(Aj),c===f&&(c=null),c!==f){a=b;b=c;if(a.token&&"path"!=a.token&&""==b)b=a;else if(a.token&&a.token!=v&&""!=b){var v={token:"path",kind:"element"};v.value=a;v.modifier=b;b=v}else a.modifier=b,b=a;a=
b}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Bj);return a}function aa(){var a,b;q++;a=F();a===f&&(a=g,94===k.charCodeAt(g)?(b=Ge,g++):(b=f,0===q&&d(He)),b!==f?(b=F(),b!==f?(a={token:"path",kind:"inversePath"},a.value=b):(g=a,a=f)):(g=a,a=f));q--;a===f&&0===q&&d(Cj);return a}function $a(){var a,b,c;q++;a=na();a===f&&(97===k.charCodeAt(g)?(a=ic,g++):(a=f,0===q&&d(jc)),a===f&&(a=g,94===k.charCodeAt(g)?(b=Ge,g++):(b=f,0===q&&d(He)),b!==f?(c=na(),c===f&&(97===k.charCodeAt(g)?(c=ic,g++):(c=f,0===q&&
d(jc))),c!==f?a=b=[b,c]:(g=a,a=f)):(g=a,a=f)));q--;a===f&&0===q&&d(Dj);return a}function Kb(){var a;q++;a=qb();q--;a===f&&0===q&&d(Ej);return a}function tb(){var a;q++;var b,c,e;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(40===k.charCodeAt(g)?(c=T,g++):(c=f,0===q&&d(U)),c!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f){b=[];c=M();if(c!==f)for(;c!==f;)b.push(c),c=M();else b=f;if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(41===k.charCodeAt(g)?(e=V,g++):(e=f,0===q&&d(W)),
e!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?a=b:(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f}else g=a,a=f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Fj);if(a!==f){b=[];c=[];var h;for(e=0;e<a.length;e++)ua++,null==a[e].chainSubject&&null==a[e].triplesContext?h=a[e]:(h=a[e].chainSubject,b=b.concat(a[e].triplesContext)),h={subject:{token:"blank",value:"_:"+ua},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:h},0==e&&c.push(h.subject),
b.push(h),h=e===a.length-1?{subject:{token:"blank",value:"_:"+ua},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+ua},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(ua+1)}},b.push(h);a={token:"triplesnodecollection",triplesContext:b,
chainSubject:c}}if(a===f){q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(91===k.charCodeAt(g)?(c=Xc,g++):(c=f,0===q&&d(Yc)),c!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(b=sb(),b!==f)if(93===k.charCodeAt(g)?(c=Zc,g++):(c=f,0===q&&d($c)),c!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f){a=b;ua++;b={token:"blank",value:"_:"+ua};c=[];for(e=0;e<a.pairs.length;e++){h=a.pairs[e];var l={};l.subject=b;l.predicate=h[0];null!=h[1].length&&(h[1]=h[1][0]);l.object=h[1];c.push(l)}a=
b={token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(c),chainSubject:b}}else g=a,a=f}else g=a,a=f;else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Gj)}q--;a===f&&0===q&&d(Hj);return a}function pa(){var a;q++;var b,c,e;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(40===k.charCodeAt(g)?(c=T,g++):(c=f,0===q&&d(U)),c!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f){b=[];c=Z();if(c!==f)for(;c!==f;)b.push(c),c=Z();else b=f;if(b!==
f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(41===k.charCodeAt(g)?(e=V,g++):(e=f,0===q&&d(W)),e!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?a=b:(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f}else g=a,a=f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Ij);if(a!==f){b=[];c=[];var h;for(e=0;e<a.length;e++)ua++,null==a[e].chainSubject&&null==a[e].triplesContext?h=a[e]:(h=a[e].chainSubject,b=b.concat(h.triplesContext)),h={subject:{token:"blank",value:"_:"+ua},predicate:{token:"uri",prefix:null,
suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:h},0==e&&c.push(h.subject),b.push(h),h=e===a.length-1?{subject:{token:"blank",value:"_:"+ua},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+ua},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},
object:{token:"blank",value:"_:"+(ua+1)}},b.push(h);a={token:"triplesnodecollection",triplesContext:b,chainSubject:c}}if(a===f){q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(91===k.charCodeAt(g)?(c=Xc,g++):(c=f,0===q&&d(Yc)),c!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();if(c!==f)if(b=ga(),b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(93===k.charCodeAt(g)?(e=Zc,g++):(e=f,0===q&&d($c)),e!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f){a=b;ua++;b={token:"blank",value:"_:"+
ua};c=[];for(e=0;e<a.pairs.length;e++){h=a.pairs[e];var l={};l.subject=b;l.predicate=h[0];null!=h[1].length&&(h[1]=h[1][0]);l.object=h[1];c.push(l)}a=b={token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(c),chainSubject:b}}else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Jj)}q--;a===f&&0===q&&d(Kj);return a}function M(){var a,b,c,e,h;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(c=K(),c!==
f){e=[];for(h=r();h!==f;)e.push(h),h=r();e!==f?a=b=[b,c,e]:(g=a,a=f)}else g=a,a=f;else g=a,a=f;if(a===f){a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(c=tb(),c!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();e!==f?a=b=[b,c,e]:(g=a,a=f)}else g=a,a=f;else g=a,a=f}a!==f&&(a=a[1]);q--;a===f&&0===q&&d(Lj);return a}function Z(){var a,b,c,e,h;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(c=K(),c!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();e!==f?a=b=[b,c,e]:(g=a,a=f)}else g=a,a=f;else g=a,a=
f;if(a===f){a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(c=pa(),c!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();e!==f?a=b=[b,c,e]:(g=a,a=f)}else g=a,a=f;else g=a,a=f}a!==f&&(a=a[1]);q--;a===f&&0===q&&d(Mj);return a}function K(){var a;q++;a=P();if(a===f){q++;a=na();if(a===f&&(a=ob(),a===f&&(a=Ob(),a===f&&(a=Pb(),a===f)))){q++;var b;q++;a=g;k.substr(g,2)===Ie?(b=Ie,g+=2):(b=f,0===q&&d(Nj));b!==f?(b=Je(),b!==f?a=b:(g=a,a=f)):(g=a,a=f);q--;a===f&&0===q&&d(Oj);a!==f&&(a={token:"blank",value:a});
if(a===f){var c,e;q++;a=g;91===k.charCodeAt(g)?(b=Xc,g++):(b=f,0===q&&d(Yc));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?(93===k.charCodeAt(g)?(e=Zc,g++):(e=f,0===q&&d($c)),e!==f?a=b=[b,c,e]:(g=a,a=f)):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Pj);a!==f&&(ua++,a={token:"blank",value:"_:"+ua})}q--;a===f&&0===q&&d(Qj);a===f&&(a=Sa())}q--;a===f&&0===q&&d(Rj)}q--;a===f&&0===q&&d(Sj);return a}function Na(){var a;q++;a=P();a===f&&(a=na());q--;a===f&&0===q&&d(Tj);return a}function P(){var a,b,
c,e;q++;a=g;b=[];for(c=r();c!==f;)b.push(c),c=r();if(b!==f)if(q++,c=g,63===k.charCodeAt(g)?(b=Vc,g++):(b=f,0===q&&d(Wc)),b!==f?(b=Ke(),b!==f?c=b:(g=c,c=f)):(g=c,c=f),q--,c===f&&0===q&&d(Uj),c===f&&(q++,c=g,36===k.charCodeAt(g)?(b=Le,g++):(b=f,0===q&&d(Me)),b!==f?(b=Ke(),b!==f?c=b:(g=c,c=f)):(g=c,c=f),q--,c===f&&0===q&&d(Vj)),c!==f){b=[];for(e=r();e!==f;)b.push(e),e=r();b!==f?(a={token:"var"},a.value=c):(g=a,a=f)}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Wj);return a}function Q(){var a;q++;var b,
c,e,h,l,n,m;q++;b=g;c=Ca();if(c!==f){a=[];e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(k.substr(g,2)===mc?(l=mc,g+=2):(l=f,0===q&&d(Ne)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Ca(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;for(;e!==f;){a.push(e);e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(k.substr(g,2)===mc?(l=mc,g+=2):(l=f,0===q&&d(Ne)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Ca(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=
e,e=f;else g=e,e=f}if(a!==f){if(0!==a.length){b={token:"expression",expressionType:"conditionalor"};c=[c];for(e=0;e<a.length;e++)c.push(a[e][3]);b.operands=c;c=b}b=c}else g=b,b=f}else g=b,b=f;q--;b===f&&0===q&&d(Xj);a=b;q--;a===f&&0===q&&d(Yj);return a}function Ca(){var a,b,c,e,h,l,n,m;q++;a=g;b=Fa();if(b!==f){c=[];e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(k.substr(g,2)===nc?(l=nc,g+=2):(l=f,0===q&&d(Oe)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Fa(),m!==f?e=h=[h,l,n,m]:(g=
e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;for(;e!==f;){c.push(e);e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(k.substr(g,2)===nc?(l=nc,g+=2):(l=f,0===q&&d(Oe)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Fa(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f}if(c!==f){if(0!==c.length){a={token:"expression",expressionType:"conditionaland"};b=[b];for(e=0;e<c.length;e++)b.push(c[e][3]);a.operands=b;b=a}a=b}else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(Zj);return a}
function Fa(){var a;q++;var b,c,e,h,l,n,m,u,t,v,y,A;q++;b=g;c=va();if(c!==f){a=[];e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(61===k.charCodeAt(g)?(l=oc,g++):(l=f,0===q&&d(pc)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=va(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(k.substr(g,2)===qc?(l=qc,g+=2):(l=f,0===q&&d(Pe)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=va(),m!==f?e=h=[h,l,
n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(60===k.charCodeAt(g)?(l=ad,g++):(l=f,0===q&&d(bd)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=va(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(62===k.charCodeAt(g)?(l=cd,g++):(l=f,0===q&&d(dd)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=va(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=
e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(k.substr(g,2)===rc?(l=rc,g+=2):(l=f,0===q&&d(Qe)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=va(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(k.substr(g,2)===sc?(l=sc,g+=2):(l=f,0===q&&d(Re)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=va(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=
e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(73===k.charCodeAt(g)?(l=tc,g++):(l=f,0===q&&d(uc)),l===f&&(105===k.charCodeAt(g)?(l=vc,g++):(l=f,0===q&&d(wc))),l!==f)if(78===k.charCodeAt(g)?(n=Cb,g++):(n=f,0===q&&d(Db)),n===f&&(110===k.charCodeAt(g)?(n=Eb,g++):(n=f,0===q&&d(Fb))),n!==f){m=[];for(u=r();u!==f;)m.push(u),u=r();m!==f?(u=Ga(),u!==f?e=h=[h,l,n,m,u]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==
f)if(78===k.charCodeAt(g)?(l=Cb,g++):(l=f,0===q&&d(Db)),l===f&&(110===k.charCodeAt(g)?(l=Eb,g++):(l=f,0===q&&d(Fb))),l!==f)if(79===k.charCodeAt(g)?(n=Se,g++):(n=f,0===q&&d(Te)),n===f&&(111===k.charCodeAt(g)?(n=Ue,g++):(n=f,0===q&&d(Ve))),n!==f)if(84===k.charCodeAt(g)?(m=We,g++):(m=f,0===q&&d(Xe)),m===f&&(116===k.charCodeAt(g)?(m=Ye,g++):(m=f,0===q&&d(Ze))),m!==f){u=[];for(t=r();t!==f;)u.push(t),t=r();if(u!==f)if(73===k.charCodeAt(g)?(t=tc,g++):(t=f,0===q&&d(uc)),t===f&&(105===k.charCodeAt(g)?(t=vc,
g++):(t=f,0===q&&d(wc))),t!==f)if(78===k.charCodeAt(g)?(v=Cb,g++):(v=f,0===q&&d(Db)),v===f&&(110===k.charCodeAt(g)?(v=Eb,g++):(v=f,0===q&&d(Fb))),v!==f){y=[];for(A=r();A!==f;)y.push(A),A=r();y!==f?(A=Ga(),A!==f?e=h=[h,l,n,m,u,t,v,y,A]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f;else g=e,e=f;else g=e,e=f}}}}}}}for(;e!==f;){a.push(e);e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(61===k.charCodeAt(g)?(l=oc,g++):(l=f,0===q&&d(pc)),l!==f){n=[];for(m=r();m!==
f;)n.push(m),m=r();n!==f?(m=va(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(k.substr(g,2)===qc?(l=qc,g+=2):(l=f,0===q&&d(Pe)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=va(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(60===k.charCodeAt(g)?(l=ad,g++):(l=f,0===q&&d(bd)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==
f?(m=va(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(62===k.charCodeAt(g)?(l=cd,g++):(l=f,0===q&&d(dd)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=va(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(k.substr(g,2)===rc?(l=rc,g+=2):(l=f,0===q&&d(Qe)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=va(),m!==f?e=h=
[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(k.substr(g,2)===sc?(l=sc,g+=2):(l=f,0===q&&d(Re)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=va(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(73===k.charCodeAt(g)?(l=tc,g++):(l=f,0===q&&d(uc)),l===f&&(105===k.charCodeAt(g)?(l=vc,g++):(l=f,0===q&&d(wc))),l!==f)if(78===k.charCodeAt(g)?
(n=Cb,g++):(n=f,0===q&&d(Db)),n===f&&(110===k.charCodeAt(g)?(n=Eb,g++):(n=f,0===q&&d(Fb))),n!==f){m=[];for(u=r();u!==f;)m.push(u),u=r();m!==f?(u=Ga(),u!==f?e=h=[h,l,n,m,u]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(78===k.charCodeAt(g)?(l=Cb,g++):(l=f,0===q&&d(Db)),l===f&&(110===k.charCodeAt(g)?(l=Eb,g++):(l=f,0===q&&d(Fb))),l!==f)if(79===k.charCodeAt(g)?(n=Se,g++):(n=f,0===q&&d(Te)),n===f&&(111===k.charCodeAt(g)?(n=
Ue,g++):(n=f,0===q&&d(Ve))),n!==f)if(84===k.charCodeAt(g)?(m=We,g++):(m=f,0===q&&d(Xe)),m===f&&(116===k.charCodeAt(g)?(m=Ye,g++):(m=f,0===q&&d(Ze))),m!==f){u=[];for(t=r();t!==f;)u.push(t),t=r();if(u!==f)if(73===k.charCodeAt(g)?(t=tc,g++):(t=f,0===q&&d(uc)),t===f&&(105===k.charCodeAt(g)?(t=vc,g++):(t=f,0===q&&d(wc))),t!==f)if(78===k.charCodeAt(g)?(v=Cb,g++):(v=f,0===q&&d(Db)),v===f&&(110===k.charCodeAt(g)?(v=Eb,g++):(v=f,0===q&&d(Fb))),v!==f){y=[];for(A=r();A!==f;)y.push(A),A=r();y!==f?(A=Ga(),A!==
f?e=h=[h,l,n,m,u,t,v,y,A]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f;else g=e,e=f;else g=e,e=f}}}}}}}}if(a!==f){b=c;if(0===a.length)c=b;else if("i"===a[0][1]||"I"===a[0][1]||"n"===a[0][1]||"N"===a[0][1]){c={};"i"===a[0][1]||"I"===a[0][1]?(e="=",c.expressionType="conditionalor"):(e="!=",c.expressionType="conditionaland");h=[];for(l=0;l<a[0].length;l++)if("args"===a[0][l].token){h=a[0][l].value;break}c.token="expression";c.operands=[];for(a=0;a<h.length;a++)l=
{token:"expression",expressionType:"relationalexpression"},l.operator=e,l.op1=b,l.op2=h[a],c.operands.push(l)}else c={expressionType:"relationalexpression"},c.operator=a[0][1],c.op1=b,c.op2=a[0][3],c.token="expression";b=c}else g=b,b=f}else g=b,b=f;q--;b===f&&0===q&&d(ak);a=b;q--;a===f&&0===q&&d(bk);return a}function va(){var a;q++;var b,c,e,h,l,n,m,u,t;q++;b=g;c=jb();if(c!==f){a=[];e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(43===k.charCodeAt(g)?(l=hb,g++):(l=f,0===q&&d(ib)),l!==f){n=[];
for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=jb(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(45===k.charCodeAt(g)?(l=La,g++):(l=f,0===q&&d(Ma)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=jb(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f)if(e=g,h=Gb(),h===f&&(h=Gb()),h!==f){l=g;n=[];for(m=r();m!==f;)n.push(m),m=r();if(n!==f)if(42===k.charCodeAt(g)?(m=Ta,g++):(m=f,0===q&&d(Ua)),
m!==f){u=[];for(t=r();t!==f;)u.push(t),t=r();u!==f?(t=Oa(),t!==f?l=n=[n,m,u,t]:(g=l,l=f)):(g=l,l=f)}else g=l,l=f;else g=l,l=f;if(l===f){l=g;n=[];for(m=r();m!==f;)n.push(m),m=r();if(n!==f)if(47===k.charCodeAt(g)?(m=lb,g++):(m=f,0===q&&d(mb)),m!==f){u=[];for(t=r();t!==f;)u.push(t),t=r();u!==f?(t=Oa(),t!==f?l=n=[n,m,u,t]:(g=l,l=f)):(g=l,l=f)}else g=l,l=f;else g=l,l=f}l===f&&(l=null);l!==f?e=h=[h,l]:(g=e,e=f)}else g=e,e=f}for(;e!==f;){a.push(e);e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(43===
k.charCodeAt(g)?(l=hb,g++):(l=f,0===q&&d(ib)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=jb(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(45===k.charCodeAt(g)?(l=La,g++):(l=f,0===q&&d(Ma)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=jb(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f)if(e=g,h=Gb(),h===f&&(h=Gb()),h!==f){l=g;n=[];for(m=r();m!==f;)n.push(m),m=r();
if(n!==f)if(42===k.charCodeAt(g)?(m=Ta,g++):(m=f,0===q&&d(Ua)),m!==f){u=[];for(t=r();t!==f;)u.push(t),t=r();u!==f?(t=Oa(),t!==f?l=n=[n,m,u,t]:(g=l,l=f)):(g=l,l=f)}else g=l,l=f;else g=l,l=f;if(l===f){l=g;n=[];for(m=r();m!==f;)n.push(m),m=r();if(n!==f)if(47===k.charCodeAt(g)?(m=lb,g++):(m=f,0===q&&d(mb)),m!==f){u=[];for(t=r();t!==f;)u.push(t),t=r();u!==f?(t=Oa(),t!==f?l=n=[n,m,u,t]:(g=l,l=f)):(g=l,l=f)}else g=l,l=f;else g=l,l=f}l===f&&(l=null);l!==f?e=h=[h,l]:(g=e,e=f)}else g=e,e=f}}if(a!==f){if(0!==
a.length){b={token:"expression",expressionType:"additiveexpression"};b.summand=c;b.summands=[];for(c=0;c<a.length;c++)h=a[c],e={},4==h.length&&"string"===typeof h[1]?(e.operator=h[1],e.expression=h[3]):(h={},l=e[0],n=e[1][3],0>l.value?(e.operator="-",l.value=-l.value):e.operator="+",h.token="expression",h.expressionType="multiplicativeexpression",h.operator=l,h.factors=[{operator:null,expression:n}],e.expression=h),b.summands.push(e);c=b}b=c}else g=b,b=f}else g=b,b=f;q--;b===f&&0===q&&d(ck);a=b;q--;
a===f&&0===q&&d(dk);return a}function jb(){var a,b,c,e,h,l,n,m;q++;a=g;b=Oa();if(b!==f){c=[];e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(42===k.charCodeAt(g)?(l=Ta,g++):(l=f,0===q&&d(Ua)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Oa(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(47===k.charCodeAt(g)?(l=lb,g++):(l=f,0===q&&d(mb)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Oa(),m!==
f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f}for(;e!==f;){c.push(e);e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(42===k.charCodeAt(g)?(l=Ta,g++):(l=f,0===q&&d(Ua)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Oa(),m!==f?e=h=[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f;if(e===f){e=g;h=[];for(l=r();l!==f;)h.push(l),l=r();if(h!==f)if(47===k.charCodeAt(g)?(l=lb,g++):(l=f,0===q&&d(mb)),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Oa(),m!==f?e=h=
[h,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f}}if(c!==f){if(0!==c.length){a={token:"expression",expressionType:"multiplicativeexpression"};a.factor=b;a.factors=[];for(b=0;b<c.length;b++)e=c[b],h={},h.operator=e[1],h.expression=e[3],a.factors.push(h);b=a}a=b}else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(ek);return a}function Oa(){var a,b,c;q++;a=g;33===k.charCodeAt(g)?(b=Tc,g++):(b=f,0===q&&d(Uc));if(b!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();c!==f?(b=nb(),b!==f?(a={token:"expression",
expressionType:"unaryexpression",unaryexpression:"!"},a.expression=b):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;if(a===f){a=g;43===k.charCodeAt(g)?(b=hb,g++):(b=f,0===q&&d(ib));if(b!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();c!==f?(b=nb(),b!==f?(a={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"},a.expression=b):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;if(a===f){a=g;45===k.charCodeAt(g)?(b=La,g++):(b=f,0===q&&d(Ma));if(b!==f){c=[];for(b=r();b!==f;)c.push(b),b=r();c!==f?(b=nb(),b!==f?(a={token:"expression",
expressionType:"unaryexpression",unaryexpression:"-"},a.expression=b):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;a===f&&(a=nb())}}q--;a===f&&0===q&&d(fk);return a}function nb(){var a;q++;a=Hc();if(a===f&&(a=Pa(),a===f)){var b,c,e;q++;b=g;a=na();if(a!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?(e=Qa(),e===f&&(e=null),e!==f?(b=e,c={token:"expression",expressionType:"irireforfunction"},c.iriref=a,c.args=null!=b?b.value:b,b=c):(g=b,b=f)):(g=b,b=f)}else g=b,b=f;q--;b===f&&0===q&&d(gk);a=b;if(a===f&&(a=ob(),
a!==f&&(b={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"},b.value=a,a=b),a===f&&(a=Ob(),a!==f&&(b={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"},b.value=a,a=b),a===f&&(a=Pb(),a!==f&&(b={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"},b.value=a,a=b),a===f)))){var h,l,n,m,u,t,v,y,A;q++;c=g;k.substr(g,5)===$e?(a=$e,g+=5):(a=f,0===q&&d(hk));a===f&&(k.substr(g,5)===af?(a=af,g+=5):(a=f,0===q&&d(ik)));if(a!==f){a=
[];for(b=r();b!==f;)a.push(b),b=r();if(a!==f)if(40===k.charCodeAt(g)?(b=T,g++):(b=f,0===q&&d(U)),b!==f){b=[];for(a=r();a!==f;)b.push(a),a=r();if(b!==f)if(k.substr(g,8)===qa?(a=qa,g+=8):(a=f,0===q&&d(db)),a===f&&(k.substr(g,8)===ra?(a=ra,g+=8):(a=f,0===q&&d(eb))),a===f&&(a=null),a!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f)if(42===k.charCodeAt(g)?(b=Ta,g++):(b=f,0===q&&d(Ua)),b===f&&(b=Q()),b!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(41===k.charCodeAt(g)?(h=V,g++):(h=f,0===q&&
d(W)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(c={token:"expression",expressionType:"aggregate",aggregateType:"count"},c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b):(g=c,c=f)}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;if(c===f){c=g;k.substr(g,12)===bf?(a=bf,g+=12):(a=f,0===q&&d(jk));a===f&&(k.substr(g,12)===cf?(a=cf,g+=12):(a=f,0===q&&d(kk)));if(a!==f){a=[];for(b=r();b!==f;)a.push(b),b=r();if(a!==f)if(40===
k.charCodeAt(g)?(b=T,g++):(b=f,0===q&&d(U)),b!==f){b=[];for(a=r();a!==f;)b.push(a),a=r();if(b!==f)if(k.substr(g,8)===qa?(a=qa,g+=8):(a=f,0===q&&d(db)),a===f&&(k.substr(g,8)===ra?(a=ra,g+=8):(a=f,0===q&&d(eb))),a===f&&(a=null),a!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f)if(b=Q(),b!==f){e=g;59===k.charCodeAt(g)?(h=Va,g++):(h=f,0===q&&d(Wa));if(h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();if(l!==f)if(k.substr(g,9)===df?(n=df,g+=9):(n=f,0===q&&d(lk)),n!==f){m=[];for(u=r();u!==f;)m.push(u),u=
r();if(m!==f)if(61===k.charCodeAt(g)?(u=oc,g++):(u=f,0===q&&d(pc)),u!==f){t=[];for(v=r();v!==f;)t.push(v),v=r();if(t!==f)if(v=od(),v!==f){y=[];for(A=r();A!==f;)y.push(A),A=r();y!==f?e=h=[h,l,n,m,u,t,v,y]:(g=e,e=f)}else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f}else g=e,e=f;else g=e,e=f}else g=e,e=f;e===f&&(e=null);if(e!==f)if(41===k.charCodeAt(g)?(h=V,g++):(h=f,0===q&&d(W)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(c={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"},
c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c.separator=e):(g=c,c=f)}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;if(c===f){c=g;k.substr(g,3)===ef?(a=ef,g+=3):(a=f,0===q&&d(mk));a===f&&(k.substr(g,3)===ff?(a=ff,g+=3):(a=f,0===q&&d(nk)));if(a!==f){a=[];for(b=r();b!==f;)a.push(b),b=r();if(a!==f)if(40===k.charCodeAt(g)?(b=T,g++):(b=f,0===q&&d(U)),b!==f){b=[];for(a=r();a!==f;)b.push(a),a=r();if(b!==f)if(k.substr(g,8)===
qa?(a=qa,g+=8):(a=f,0===q&&d(db)),a===f&&(k.substr(g,8)===ra?(a=ra,g+=8):(a=f,0===q&&d(eb))),a===f&&(a=null),a!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f)if(b=Q(),b!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(41===k.charCodeAt(g)?(h=V,g++):(h=f,0===q&&d(W)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(c={token:"expression",expressionType:"aggregate",aggregateType:"sum"},c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b):(g=c,c=f)}else g=c,c=f;else g=c,c=f}else g=c,c=
f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;if(c===f){c=g;k.substr(g,3)===gf?(a=gf,g+=3):(a=f,0===q&&d(ok));a===f&&(k.substr(g,3)===hf?(a=hf,g+=3):(a=f,0===q&&d(pk)));if(a!==f){a=[];for(b=r();b!==f;)a.push(b),b=r();if(a!==f)if(40===k.charCodeAt(g)?(b=T,g++):(b=f,0===q&&d(U)),b!==f){b=[];for(a=r();a!==f;)b.push(a),a=r();if(b!==f)if(k.substr(g,8)===qa?(a=qa,g+=8):(a=f,0===q&&d(db)),a===f&&(k.substr(g,8)===ra?(a=ra,g+=8):(a=f,0===q&&d(eb))),a===f&&(a=null),a!==f){e=
[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f)if(b=Q(),b!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(41===k.charCodeAt(g)?(h=V,g++):(h=f,0===q&&d(W)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(c={token:"expression",expressionType:"aggregate",aggregateType:"min"},c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b):(g=c,c=f)}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;if(c===f){c=g;k.substr(g,3)===jf?(a=jf,
g+=3):(a=f,0===q&&d(qk));a===f&&(k.substr(g,3)===kf?(a=kf,g+=3):(a=f,0===q&&d(rk)));if(a!==f){a=[];for(b=r();b!==f;)a.push(b),b=r();if(a!==f)if(40===k.charCodeAt(g)?(b=T,g++):(b=f,0===q&&d(U)),b!==f){b=[];for(a=r();a!==f;)b.push(a),a=r();if(b!==f)if(k.substr(g,8)===qa?(a=qa,g+=8):(a=f,0===q&&d(db)),a===f&&(k.substr(g,8)===ra?(a=ra,g+=8):(a=f,0===q&&d(eb))),a===f&&(a=null),a!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f)if(b=Q(),b!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(41===k.charCodeAt(g)?
(h=V,g++):(h=f,0===q&&d(W)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(c={token:"expression",expressionType:"aggregate",aggregateType:"max"},c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b):(g=c,c=f)}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;if(c===f)if(c=g,k.substr(g,3)===lf?(a=lf,g+=3):(a=f,0===q&&d(sk)),a===f&&(k.substr(g,3)===mf?(a=mf,g+=3):(a=f,0===q&&d(tk))),a!==f){a=[];for(b=r();b!==f;)a.push(b),b=r();
if(a!==f)if(40===k.charCodeAt(g)?(b=T,g++):(b=f,0===q&&d(U)),b!==f){b=[];for(a=r();a!==f;)b.push(a),a=r();if(b!==f)if(k.substr(g,8)===qa?(a=qa,g+=8):(a=f,0===q&&d(db)),a===f&&(k.substr(g,8)===ra?(a=ra,g+=8):(a=f,0===q&&d(eb))),a===f&&(a=null),a!==f){e=[];for(b=r();b!==f;)e.push(b),b=r();if(e!==f)if(b=Q(),b!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(41===k.charCodeAt(g)?(h=V,g++):(h=f,0===q&&d(W)),h!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(c={token:"expression",expressionType:"aggregate",
aggregateType:"avg"},c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b):(g=c,c=f)}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f;else g=c,c=f}else g=c,c=f}}}}q--;c===f&&0===q&&d(uk);a=c;a===f&&(a=P(),a!==f&&(b={token:"expression",expressionType:"atomic",primaryexpression:"var"},b.value=a,a=b))}}q--;a===f&&0===q&&d(vk);return a}function Hc(){var a,b,c,e;q++;a=g;40===k.charCodeAt(g)?(b=T,g++):(b=f,0===q&&d(U));if(b!==f){c=[];for(b=r();b!==f;)c.push(b),
b=r();if(c!==f)if(b=Q(),b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?(41===k.charCodeAt(g)?(e=V,g++):(e=f,0===q&&d(W)),e!==f?a=b:(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;q--;a===f&&0===q&&d(wk);return a}function Pa(){var a,b,c,e,h,l,n,m;q++;a=g;k.substr(g,3)===nf?(b=nf,g+=3):(b=f,0===q&&d(xk));b===f&&(k.substr(g,3)===of?(b=of,g+=3):(b=f,0===q&&d(yk)));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=
r();b!==f;)h.push(b),b=r();if(h!==f)if(b=Q(),b!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?(a={token:"expression",expressionType:"builtincall",builtincall:"str"},a.args=[b]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,4)===pf?(b=pf,g+=4):(b=f,0===q&&d(zk));b===f&&(k.substr(g,4)===qf?(b=qf,g+=4):(b=f,0===q&&d(Ak)));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===
k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=r();b!==f;)h.push(b),b=r();if(h!==f)if(b=Q(),b!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?(a={token:"expression",expressionType:"builtincall",builtincall:"lang"},a.args=[b]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,11)===rf?(b=rf,g+=11):(b=f,0===q&&d(Bk));b===f&&(k.substr(g,11)===sf?(b=sf,g+=11):(b=f,0===q&&
d(Ck)));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=r();b!==f;)h.push(b),b=r();if(h!==f)if(b=Q(),b!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();if(l!==f)if(44===k.charCodeAt(g)?(n=la,g++):(n=f,0===q&&d(ma)),n!==f){m=[];for(e=r();e!==f;)m.push(e),e=r();if(m!==f)if(e=Q(),e!==f){c=[];for(n=r();n!==f;)c.push(n),n=r();c!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?(a={token:"expression",expressionType:"builtincall",
builtincall:"langmatches"},a.args=[b,e]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,8)===tf?(b=tf,g+=8):(b=f,0===q&&d(Dk));b===f&&(k.substr(g,8)===uf?(b=uf,g+=8):(b=f,0===q&&d(Ek)));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=r();b!==f;)h.push(b),b=r();if(h!==f)if(b=Q(),b!==f){l=[];for(n=r();n!==f;)l.push(n),
n=r();l!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?(a={token:"expression",expressionType:"builtincall",builtincall:"datatype"},a.args=[b]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,5)===vf?(b=vf,g+=5):(b=f,0===q&&d(Fk));b===f&&(k.substr(g,5)===wf?(b=wf,g+=5):(b=f,0===q&&d(Gk)));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=r();b!==f;)h.push(b),
b=r();if(h!==f)if(b=P(),b!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?(a={token:"expression",expressionType:"builtincall",builtincall:"bound"},a.args=[b]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,3)===xf?(b=xf,g+=3):(b=f,0===q&&d(Hk));b===f&&(k.substr(g,3)===yf?(b=yf,g+=3):(b=f,0===q&&d(Ik)));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===k.charCodeAt(g)?
(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=r();b!==f;)h.push(b),b=r();if(h!==f)if(b=Q(),b!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?(a={token:"expression",expressionType:"builtincall",builtincall:"iri"},a.args=[b]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,3)===zf?(b=zf,g+=3):(b=f,0===q&&d(Jk));b===f&&(k.substr(g,3)===Af?(b=Af,g+=3):(b=f,0===q&&d(Kk)));if(b!==f){c=
[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=r();b!==f;)h.push(b),b=r();if(h!==f)if(b=Q(),b!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?(a={token:"expression",expressionType:"builtincall",builtincall:"uri"},a.args=[b]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,5)===Bf?(b=Bf,g+=5):(b=f,0===q&&d(Lk));b===
f&&(k.substr(g,5)===Cf?(b=Cf,g+=5):(b=f,0===q&&d(Mk)));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f){e=g;40===k.charCodeAt(g)?(h=T,g++):(h=f,0===q&&d(U));if(h!==f){b=[];for(l=r();l!==f;)b.push(l),l=r();if(b!==f)if(l=Q(),l!==f){n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(41===k.charCodeAt(g)?(m=V,g++):(m=f,0===q&&d(W)),m!==f?e=h=[h,b,l,n,m]:(g=e,e=f)):(g=e,e=f)}else g=e,e=f;else g=e,e=f}else g=e,e=f;e===f&&(e=Sa());e!==f?(b=e,a={token:"expression",expressionType:"builtincall",builtincall:"bnode"},
a.args=5===b.length?[b[2]]:null):(g=a,a=f)}else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,8)===Df?(b=Df,g+=8):(b=f,0===q&&d(Nk));b===f&&(k.substr(g,8)===Ef?(b=Ef,g+=8):(b=f,0===q&&d(Ok)));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();c!==f?(e=Ga(),e!==f?(b={token:"expression",expressionType:"builtincall",builtincall:"coalesce"},b.args=e,a=b):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;if(a===f){a=g;k.substr(g,2)===Ff?(b=Ff,g+=2):(b=f,0===q&&d(Pk));b===f&&(k.substr(g,2)===Gf?(b=Gf,g+=2):(b=f,0===q&&d(Qk)));
if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=r();b!==f;)h.push(b),b=r();if(h!==f)if(b=Q(),b!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();if(l!==f)if(44===k.charCodeAt(g)?(n=la,g++):(n=f,0===q&&d(ma)),n!==f){m=[];for(e=r();e!==f;)m.push(e),e=r();if(m!==f)if(e=Q(),e!==f){c=[];for(n=r();n!==f;)c.push(n),n=r();if(c!==f)if(44===k.charCodeAt(g)?(n=la,g++):(n=f,0===q&&d(ma)),n!==f){n=[];for(c=r();c!==f;)n.push(c),c=r();if(n!==
f)if(c=Q(),c!==f){n=[];for(l=r();l!==f;)n.push(l),l=r();n!==f?(41===k.charCodeAt(g)?(l=V,g++):(l=f,0===q&&d(W)),l!==f?(a={token:"expression",expressionType:"builtincall",builtincall:"if"},a.args=[b,e,c]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,9)===Hf?(b=Hf,g+=9):(b=f,0===q&&d(Rk));b===f&&(k.substr(g,9)===If?(b=If,g+=9):(b=f,
0===q&&d(Sk)),b===f&&(k.substr(g,9)===Jf?(b=Jf,g+=9):(b=f,0===q&&d(Tk))));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=r();b!==f;)h.push(b),b=r();if(h!==f)if(b=Q(),b!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?(a={token:"expression",expressionType:"builtincall",builtincall:"isliteral"},a.args=[b]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;
else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,7)===Kf?(b=Kf,g+=7):(b=f,0===q&&d(Uk));b===f&&(k.substr(g,7)===Lf?(b=Lf,g+=7):(b=f,0===q&&d(Vk)),b===f&&(k.substr(g,7)===Mf?(b=Mf,g+=7):(b=f,0===q&&d(Wk))));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=r();b!==f;)h.push(b),b=r();if(h!==f)if(b=Q(),b!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();l!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?(a={token:"expression",
expressionType:"builtincall",builtincall:"isblank"},a.args=[b]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,8)===Nf?(b=Nf,g+=8):(b=f,0===q&&d(Xk));b===f&&(k.substr(g,8)===Of?(b=Of,g+=8):(b=f,0===q&&d(Yk)));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=r();b!==f;)h.push(b),b=r();if(h!==f)if(b=Q(),b!==f){l=[];for(n=r();n!==f;)l.push(n),n=r();if(l!==f)if(44===
k.charCodeAt(g)?(n=la,g++):(n=f,0===q&&d(ma)),n!==f){m=[];for(e=r();e!==f;)m.push(e),e=r();if(m!==f)if(e=Q(),e!==f){c=[];for(n=r();n!==f;)c.push(n),n=r();c!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?(a={token:"expression",expressionType:"builtincall",builtincall:"sameterm"},a.args=[b,e]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,5)===Pf?(b=Pf,g+=5):(b=f,0===q&&
d(Zk));b===f&&(k.substr(g,5)===Qf?(b=Qf,g+=5):(b=f,0===q&&d($k)),b===f&&(k.substr(g,5)===Rf?(b=Rf,g+=5):(b=f,0===q&&d(al)),b===f&&(k.substr(g,5)===Sf?(b=Sf,g+=5):(b=f,0===q&&d(bl)),b===f&&(k.substr(g,5)===Tf?(b=Tf,g+=5):(b=f,0===q&&d(cl)),b===f&&(k.substr(g,5)===Uf?(b=Uf,g+=5):(b=f,0===q&&d(dl)))))));if(b!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(40===k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){h=[];for(b=r();b!==f;)h.push(b),b=r();if(h!==f)if(b=Q(),b!==f){l=[];for(n=r();n!==f;)l.push(n),
n=r();l!==f?(41===k.charCodeAt(g)?(n=V,g++):(n=f,0===q&&d(W)),n!==f?(a={token:"expression",expressionType:"builtincall",builtincall:"isuri"},a.args=[b]):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f;if(a===f){a=g;k.substr(g,7)===Vf?(b=Vf,g+=7):(b=f,0===q&&d(el));b===f&&(k.substr(g,7)===Wf?(b=Wf,g+=7):(b=f,0===q&&d(fl)));if(b!==f){c=[];Xf.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(Yf));if(e!==f)for(;e!==f;)c.push(e),Xf.test(k.charAt(g))?(e=k.charAt(g),
g++):(e=f,0===q&&d(Yf));else c=f;if(c!==f){e=[];for(h=r();h!==f;)e.push(h),h=r();if(e!==f)if(40===k.charCodeAt(g)?(h=T,g++):(h=f,0===q&&d(U)),h!==f){b=[];l=g;n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Q(),m!==f?(44===k.charCodeAt(g)?(e=la,g++):(e=f,0===q&&d(ma)),e!==f?l=n=[n,m,e]:(g=l,l=f)):(g=l,l=f)):(g=l,l=f);for(;l!==f;){b.push(l);l=g;n=[];for(m=r();m!==f;)n.push(m),m=r();n!==f?(m=Q(),m!==f?(44===k.charCodeAt(g)?(e=la,g++):(e=f,0===q&&d(ma)),e!==f?l=n=[n,m,e]:(g=l,l=f)):(g=l,l=f)):(g=l,l=f)}if(b!==
f){l=[];for(n=r();n!==f;)l.push(n),n=r();if(l!==f)if(n=Q(),n!==f){m=[];for(e=r();e!==f;)m.push(e),e=r();if(m!==f)if(41===k.charCodeAt(g)?(e=V,g++):(e=f,0===q&&d(W)),e!==f){a=n;e={token:"expression",expressionType:"custom"};e.name=c.join("");c=[];for(n=0;n<b.length;n++)c.push(b[n][1]);c.push(a);e.args=c;a=e}else g=a,a=f;else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f}else g=a,a=f;else g=a,a=f}else g=a,a=f}else g=a,a=f;if(a===f){q++;b=g;k.substr(g,5)===Zf?(a=Zf,g+=5):(a=f,0===q&&d(gl));a===f&&(k.substr(g,
5)===$f?(a=$f,g+=5):(a=f,0===q&&d(hl)));if(a!==f){a=[];for(e=r();e!==f;)a.push(e),e=r();if(a!==f)if(40===k.charCodeAt(g)?(e=T,g++):(e=f,0===q&&d(U)),e!==f){e=[];for(a=r();a!==f;)e.push(a),a=r();if(e!==f)if(a=Q(),a!==f){e=[];for(c=r();c!==f;)e.push(c),c=r();if(e!==f)if(44===k.charCodeAt(g)?(c=la,g++):(c=f,0===q&&d(ma)),c!==f){c=[];for(e=r();e!==f;)c.push(e),e=r();if(c!==f)if(e=Q(),e!==f){n=[];for(c=r();c!==f;)n.push(c),c=r();if(n!==f){c=g;44===k.charCodeAt(g)?(n=la,g++):(n=f,0===q&&d(ma));if(n!==f){l=
[];for(m=r();m!==f;)l.push(m),m=r();l!==f?(m=Q(),m!==f?c=n=[n,l,m]:(g=c,c=f)):(g=c,c=f)}else g=c,c=f;c===f&&(c=null);if(c!==f){n=[];for(l=r();l!==f;)n.push(l),l=r();n!==f?(41===k.charCodeAt(g)?(l=V,g++):(l=f,0===q&&d(W)),l!==f?(b=c,c={token:"expression",expressionType:"regex"},c.text=a,c.pattern=e,null!=b&&(c.flags=b[2]),b=c):(g=b,b=f)):(g=b,b=f)}else g=b,b=f}else g=b,b=f}else g=b,b=f;else g=b,b=f}else g=b,b=f;else g=b,b=f}else g=b,b=f;else g=b,b=f}else g=b,b=f;else g=b,b=f}else g=b,b=f;q--;b===f&&
0===q&&d(il);a=b;if(a===f){q++;b=g;k.substr(g,6)===xc?(a=xc,g+=6):(a=f,0===q&&d(ag));a===f&&(k.substr(g,6)===yc?(a=yc,g+=6):(a=f,0===q&&d(bg)));if(a!==f){e=[];for(a=r();a!==f;)e.push(a),a=r();e!==f?(a=Y(),a!==f?(b={token:"expression",expressionType:"builtincall",builtincall:"exists"},b.args=[a]):(g=b,b=f)):(g=b,b=f)}else g=b,b=f;q--;b===f&&0===q&&d(jl);a=b;if(a===f){q++;b=g;k.substr(g,3)===cg?(a=cg,g+=3):(a=f,0===q&&d(kl));a===f&&(k.substr(g,3)===dg?(a=dg,g+=3):(a=f,0===q&&d(ll)));if(a!==f){a=[];
for(e=r();e!==f;)a.push(e),e=r();if(a!==f)if(k.substr(g,6)===xc?(e=xc,g+=6):(e=f,0===q&&d(ag)),e===f&&(k.substr(g,6)===yc?(e=yc,g+=6):(e=f,0===q&&d(bg))),e!==f){e=[];for(a=r();a!==f;)e.push(a),a=r();e!==f?(a=Y(),a!==f?(b={token:"expression",expressionType:"builtincall",builtincall:"notexists"},b.args=[a]):(g=b,b=f)):(g=b,b=f)}else g=b,b=f;else g=b,b=f}else g=b,b=f;q--;b===f&&0===q&&d(ml);a=b}}}}}}}}}}}}}}}}}q--;a===f&&0===q&&d(nl);return a}function ob(){var a,b,c,e,h;q++;a=g;b=od();if(b!==f){var l,
n,m,r;q++;c=g;64===k.charCodeAt(g)?(e=eg,g++):(e=f,0===q&&d(fg));if(e!==f){h=[];gg.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(hg));if(e!==f)for(;e!==f;)h.push(e),gg.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(hg));else h=f;if(h!==f){e=[];l=g;45===k.charCodeAt(g)?(n=La,g++):(n=f,0===q&&d(Ma));if(n!==f){m=[];zc.test(k.charAt(g))?(r=k.charAt(g),g++):(r=f,0===q&&d(Ac));if(r!==f)for(;r!==f;)m.push(r),zc.test(k.charAt(g))?(r=k.charAt(g),g++):(r=f,0===q&&d(Ac));else m=f;m!==f?l=n=[n,m]:
(g=l,l=f)}else g=l,l=f;for(;l!==f;)if(e.push(l),l=g,45===k.charCodeAt(g)?(n=La,g++):(n=f,0===q&&d(Ma)),n!==f){m=[];zc.test(k.charAt(g))?(r=k.charAt(g),g++):(r=f,0===q&&d(Ac));if(r!==f)for(;r!==f;)m.push(r),zc.test(k.charAt(g))?(r=k.charAt(g),g++):(r=f,0===q&&d(Ac));else m=f;m!==f?l=n=[n,m]:(g=l,l=f)}else g=l,l=f;e!==f?(c=h,c=e=0===e.length?("@"+c.join("")).toLowerCase():("@"+c.join("")+"-"+e[0][1].join("")).toLowerCase()):(g=c,c=f)}else g=c,c=f}else g=c,c=f;q--;c===f&&0===q&&d(ol);c===f&&(c=g,k.substr(g,
2)===ig?(e=ig,g+=2):(e=f,0===q&&d(pl)),e!==f?(h=na(),h!==f?c=e=[e,h]:(g=c,c=f)):(g=c,c=f));c===f&&(c=null);c!==f?(a=b,b=c,"string"===typeof b&&0<b.length?b={token:"literal",value:a.value,lang:b.slice(1),type:null}:null!=b&&"object"===typeof b?(b.shift(),b={token:"literal",value:a.value,lang:null,type:b[0]}):b={token:"literal",value:a.value,lang:null,type:null},a=b):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(ql);return a}function Ob(){var a;q++;q++;a=Jb();a===f&&(a=Ic(),a===f&&(a=qb()));q--;a===f&&
0===q&&d(rl);if(a===f){q++;var b;q++;a=g;43===k.charCodeAt(g)?(b=hb,g++):(b=f,0===q&&d(ib));b!==f?(b=Jb(),b!==f?a=b=jg(b):(g=a,a=f)):(g=a,a=f);q--;a===f&&0===q&&d(sl);a===f&&(q++,a=g,43===k.charCodeAt(g)?(b=hb,g++):(b=f,0===q&&d(ib)),b!==f?(b=Ic(),b!==f?a=b=jg(b):(g=a,a=f)):(g=a,a=f),q--,a===f&&0===q&&d(tl),a===f&&(q++,a=g,43===k.charCodeAt(g)?(b=hb,g++):(b=f,0===q&&d(ib)),b!==f?(b=qb(),b!==f?(b.value="+"+b.value,a=b):(g=a,a=f)):(g=a,a=f),q--,a===f&&0===q&&d(ul)));q--;a===f&&0===q&&d(vl);a===f&&(a=
Gb())}q--;a===f&&0===q&&d(wl);return a}function Gb(){var a;q++;var b;q++;a=g;45===k.charCodeAt(g)?(b=La,g++):(b=f,0===q&&d(Ma));b!==f?(b=Jb(),b!==f?a=b=ed(b):(g=a,a=f)):(g=a,a=f);q--;a===f&&0===q&&d(xl);a===f&&(q++,a=g,45===k.charCodeAt(g)?(b=La,g++):(b=f,0===q&&d(Ma)),b!==f?(b=Ic(),b!==f?a=b=ed(b):(g=a,a=f)):(g=a,a=f),q--,a===f&&0===q&&d(yl),a===f&&(q++,a=g,45===k.charCodeAt(g)?(b=La,g++):(b=f,0===q&&d(Ma)),b!==f?(b=qb(),b!==f?a=b=ed(b):(g=a,a=f)):(g=a,a=f),q--,a===f&&0===q&&d(zl)));q--;a===f&&0===
q&&d(Al);return a}function Pb(){var a;q++;k.substr(g,4)===kg?(a=kg,g+=4):(a=f,0===q&&d(Bl));a===f&&(k.substr(g,4)===lg?(a=lg,g+=4):(a=f,0===q&&d(Cl)));a!==f&&(a={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0});a===f&&(k.substr(g,5)===mg?(a=mg,g+=5):(a=f,0===q&&d(Dl)),a===f&&(k.substr(g,5)===ng?(a=ng,g+=5):(a=f,0===q&&d(El))),a!==f&&(a={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}));q--;a===f&&0===q&&d(Fl);return a}function od(){var a;
q++;var b,c;q++;a=g;k.substr(g,3)===Bc?(b=Bc,g+=3):(b=f,0===q&&d(og));if(b!==f){b=[];pg.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(qg));for(c===f&&(c=ab());c!==f;)b.push(c),pg.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(qg)),c===f&&(c=ab());b!==f?(k.substr(g,3)===Bc?(c=Bc,g+=3):(c=f,0===q&&d(og)),c!==f?a=b=Ja(b):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Gl);a!==f&&(a=Cc(a));if(a===f){q++;a=g;k.substr(g,3)===Dc?(b=Dc,g+=3):(b=f,0===q&&d(rg));if(b!==f){b=[];sg.test(k.charAt(g))?
(c=k.charAt(g),g++):(c=f,0===q&&d(tg));for(c===f&&(c=ab());c!==f;)b.push(c),sg.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(tg)),c===f&&(c=ab());b!==f?(k.substr(g,3)===Dc?(c=Dc,g+=3):(c=f,0===q&&d(rg)),c!==f?a=b=Ja(b):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Hl);a!==f&&(a=Cc(a));if(a===f){q++;a=g;39===k.charCodeAt(g)?(b=fd,g++):(b=f,0===q&&d(gd));if(b!==f){b=[];ug.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(vg));for(c===f&&(c=ab());c!==f;)b.push(c),ug.test(k.charAt(g))?
(c=k.charAt(g),g++):(c=f,0===q&&d(vg)),c===f&&(c=ab());b!==f?(39===k.charCodeAt(g)?(c=fd,g++):(c=f,0===q&&d(gd)),c!==f?a=b=Ja(b):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Il);a!==f&&(a=Cc(a));if(a===f){q++;a=g;34===k.charCodeAt(g)?(b=wg,g++):(b=f,0===q&&d(xg));if(b!==f){b=[];yg.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(zg));for(c===f&&(c=ab());c!==f;)b.push(c),yg.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(zg)),c===f&&(c=ab());b!==f?(34===k.charCodeAt(g)?(c=wg,g++):(c=
f,0===q&&d(xg)),c!==f?a=b=Ja(b):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Jl);a!==f&&(a=Cc(a))}}}q--;a===f&&0===q&&d(Kl);return a}function na(){var a;q++;a=Qb();a!==f&&(a={token:"uri",prefix:null,suffix:null,value:a});if(a===f){q++;var b,c;q++;a=g;b=Hb();b!==f?(c=Je(),c!==f?a=b=[b,c]:(g=a,a=f)):(g=a,a=f);q--;a===f&&0===q&&d(Ll);a!==f&&(a={token:"uri",prefix:a[0],suffix:a[1],value:null});a===f&&(a=Hb(),a!==f&&(a={token:"uri",prefix:a,suffix:"",value:null}));q--;a===f&&0===q&&d(Ml)}q--;
a===f&&0===q&&d(Nl);return a}function Qb(){var a,b,c;q++;a=g;60===k.charCodeAt(g)?(b=ad,g++):(b=f,0===q&&d(bd));if(b!==f){b=[];Ag.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(Bg));for(;c!==f;)b.push(c),Ag.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(Bg));b!==f?(62===k.charCodeAt(g)?(c=cd,g++):(c=f,0===q&&d(dd)),c!==f?a=b=b.join(""):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Ol);return a}function Hb(){var a,b,c;q++;a=g;var e,h;q++;b=g;c=pd();if(c!==f){e=[];h=Ec();h===f&&(46===
k.charCodeAt(g)?(h=sa,g++):(h=f,0===q&&d(ta)));for(;h!==f;)e.push(h),h=Ec(),h===f&&(46===k.charCodeAt(g)?(h=sa,g++):(h=f,0===q&&d(ta)));if(e!==f){if("."==e[e.length-1])throw Error("Wrong PN_PREFIX, cannot finish with '.'");b=c+=e.join("")}else g=b,b=f}else g=b,b=f;q--;b===f&&0===q&&d(Pl);b===f&&(b=null);b!==f?(58===k.charCodeAt(g)?(c=Mb,g++):(c=f,0===q&&d(Nb)),c!==f?a=b:(g=a,a=f)):(g=a,a=f);q--;a===f&&0===q&&d(Ql);return a}function qb(){var a,b;q++;a=[];ba.test(k.charAt(g))?(b=k.charAt(g),g++):(b=
f,0===q&&d(ca));if(b!==f)for(;b!==f;)a.push(b),ba.test(k.charAt(g))?(b=k.charAt(g),g++):(b=f,0===q&&d(ca));else a=f;a!==f&&(b={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"},b.value=Ja(a),a=b);q--;a===f&&0===q&&d(Rl);return a}function Ic(){var a,b,c,e,h;q++;a=g;b=[];ba.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(ca));if(c!==f)for(;c!==f;)b.push(c),ba.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(ca));else b=f;if(b!==f)if(46===k.charCodeAt(g)?(c=sa,g++):(c=
f,0===q&&d(ta)),c!==f){e=[];ba.test(k.charAt(g))?(h=k.charAt(g),g++):(h=f,0===q&&d(ca));for(;h!==f;)e.push(h),ba.test(k.charAt(g))?(h=k.charAt(g),g++):(h=f,0===q&&d(ca));e!==f?(a={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"},a.value=Ja([b,c,e])):(g=a,a=f)}else g=a,a=f;else g=a,a=f;if(a===f)if(a=g,46===k.charCodeAt(g)?(b=sa,g++):(b=f,0===q&&d(ta)),b!==f){c=[];ba.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(ca));if(e!==f)for(;e!==f;)c.push(e),ba.test(k.charAt(g))?
(e=k.charAt(g),g++):(e=f,0===q&&d(ca));else c=f;c!==f?(e={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"},e.value=Ja([b,c]),a=e):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Sl);return a}function Jb(){var a,b,c,e,h;q++;a=g;b=[];ba.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(ca));if(c!==f)for(;c!==f;)b.push(c),ba.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(ca));else b=f;if(b!==f)if(46===k.charCodeAt(g)?(c=sa,g++):(c=f,0===q&&d(ta)),c!==f){e=[];ba.test(k.charAt(g))?
(h=k.charAt(g),g++):(h=f,0===q&&d(ca));for(;h!==f;)e.push(h),ba.test(k.charAt(g))?(h=k.charAt(g),g++):(h=f,0===q&&d(ca));e!==f?(h=Jc(),h!==f?(a={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"},a.value=Ja([b,c,e,h])):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;else g=a,a=f;if(a===f){a=g;46===k.charCodeAt(g)?(b=sa,g++):(b=f,0===q&&d(ta));if(b!==f){c=[];ba.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(ca));if(e!==f)for(;e!==f;)c.push(e),ba.test(k.charAt(g))?(e=k.charAt(g),g++):
(e=f,0===q&&d(ca));else c=f;c!==f?(e=Jc(),e!==f?(h={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"},h.value=Ja([b,c,e]),a=h):(g=a,a=f)):(g=a,a=f)}else g=a,a=f;if(a===f){a=g;b=[];ba.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(ca));if(c!==f)for(;c!==f;)b.push(c),ba.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(ca));else b=f;b!==f?(c=Jc(),c!==f?(e={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"},e.value=Ja([b,c]),a=e):(g=a,a=f)):(g=a,
a=f)}}q--;a===f&&0===q&&d(Tl);return a}function Jc(){var a,b,c,e,h;q++;a=g;Ul.test(k.charAt(g))?(b=k.charAt(g),g++):(b=f,0===q&&d(Vl));if(b!==f)if(Wl.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d(Xl)),c===f&&(c=null),c!==f){e=[];ba.test(k.charAt(g))?(h=k.charAt(g),g++):(h=f,0===q&&d(ca));if(h!==f)for(;h!==f;)e.push(h),ba.test(k.charAt(g))?(h=k.charAt(g),g++):(h=f,0===q&&d(ca));else e=f;e!==f?a=b=Ja([b,c,e]):(g=a,a=f)}else g=a,a=f;else g=a,a=f;q--;a===f&&0===q&&d(Yl);return a}function ab(){var a,
b,c;q++;a=g;92===k.charCodeAt(g)?(b=Cg,g++):(b=f,0===q&&d(Dg));b!==f?(Zl.test(k.charAt(g))?(c=k.charAt(g),g++):(c=f,0===q&&d($l)),c!==f?a=b=[b,c]:(g=a,a=f)):(g=a,a=f);q--;a===f&&0===q&&d(am);return a}function Sa(){var a,b,c;q++;a=g;40===k.charCodeAt(g)?(b=T,g++):(b=f,0===q&&d(U));if(b!==f){b=[];for(c=r();c!==f;)b.push(c),c=r();b!==f?(41===k.charCodeAt(g)?(c=V,g++):(c=f,0===q&&d(W)),c!==f?a=b={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:
(g=a,a=f)):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(bm);return a}function r(){var a;q++;cm.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(dm));if(a===f&&(em.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(fm)),a===f&&(gm.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(hm)),a===f&&(im.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(jm)),a===f)))){var b,c,e;q++;a=g;35===k.charCodeAt(g)?(b=Eg,g++):(b=f,0===q&&d(Fg));if(b!==f){c=[];Gg.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===
q&&d(Hg));for(;e!==f;)c.push(e),Gg.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(Hg));c!==f?a=b=[b,c]:(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(km)}q--;a===f&&0===q&&d(lm);return a}function pd(){var a;q++;mm.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(nm));a===f&&(om.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(pm)),a===f&&(qm.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(rm)),a===f&&(sm.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(tm)),a===f&&(um.test(k.charAt(g))?
(a=k.charAt(g),g++):(a=f,0===q&&d(vm)),a===f&&(wm.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(xm)),a===f&&(ym.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(zm)),a===f&&(Am.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(Bm)),a===f&&(Cm.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(Dm)),a===f&&(Em.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(Fm)),a===f&&(Gm.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(Hm)),a===f&&(Im.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,
0===q&&d(Jm)),a===f&&(Km.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(Lm)),a===f&&(Mm.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(Nm)))))))))))))));q--;a===f&&0===q&&d(Om);return a}function Lb(){var a;q++;a=pd();a===f&&(95===k.charCodeAt(g)?(a=Ig,g++):(a=f,0===q&&d(Jg)));q--;a===f&&0===q&&d(Pm);return a}function Ke(){var a,b,c,e;q++;a=g;b=Lb();b===f&&(ba.test(k.charAt(g))?(b=k.charAt(g),g++):(b=f,0===q&&d(ca)));if(b!==f){c=[];e=Lb();e===f&&(ba.test(k.charAt(g))?(e=k.charAt(g),g++):
(e=f,0===q&&d(ca)),e===f&&(hd.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(id)),e===f&&(jd.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(kd)),e===f&&(ld.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(md))))));for(;e!==f;)c.push(e),e=Lb(),e===f&&(ba.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(ca)),e===f&&(hd.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(id)),e===f&&(jd.test(k.charAt(g))?(e=k.charAt(g),g++):(e=f,0===q&&d(kd)),e===f&&(ld.test(k.charAt(g))?(e=k.charAt(g),
g++):(e=f,0===q&&d(md))))));c!==f?a=b+=c.join(""):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Qm);return a}function Ec(){var a;q++;a=Lb();a===f&&(45===k.charCodeAt(g)?(a=La,g++):(a=f,0===q&&d(Ma)),a===f&&(ba.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(ca)),a===f&&(hd.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(id)),a===f&&(jd.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(kd)),a===f&&(ld.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(md)))))));q--;a===f&&0===q&&d(Rm);return a}
function Je(){var a,b,c,e;q++;a=g;b=Lb();b===f&&(ba.test(k.charAt(g))?(b=k.charAt(g),g++):(b=f,0===q&&d(ca)),b===f&&(58===k.charCodeAt(g)?(b=Mb,g++):(b=f,0===q&&d(Nb)),b===f&&(b=nd())));if(b!==f){c=[];e=Ec();e===f&&(46===k.charCodeAt(g)?(e=sa,g++):(e=f,0===q&&d(ta)),e===f&&(58===k.charCodeAt(g)?(e=Mb,g++):(e=f,0===q&&d(Nb)),e===f&&(e=nd())));for(;e!==f;)c.push(e),e=Ec(),e===f&&(46===k.charCodeAt(g)?(e=sa,g++):(e=f,0===q&&d(ta)),e===f&&(58===k.charCodeAt(g)?(e=Mb,g++):(e=f,0===q&&d(Nb)),e===f&&(e=
nd())));c!==f?a=b+=(c||[]).join(""):(g=a,a=f)}else g=a,a=f;q--;a===f&&0===q&&d(Sm);return a}function nd(){var a;q++;var b,c,e;q++;a=g;37===k.charCodeAt(g)?(b=Kg,g++):(b=f,0===q&&d(Lg));b!==f?(c=Mg(),c!==f?(e=Mg(),e!==f?a=b=[b,c,e]:(g=a,a=f)):(g=a,a=f)):(g=a,a=f);a!==f&&(a=a.join(""));q--;a===f&&0===q&&d(Tm);a===f&&(q++,a=g,92===k.charCodeAt(g)?(b=Cg,g++):(b=f,0===q&&d(Dg)),b!==f?(95===k.charCodeAt(g)?(b=Ig,g++):(b=f,0===q&&d(Jg)),b===f&&(126===k.charCodeAt(g)?(b=Um,g++):(b=f,0===q&&d(Vm)),b===f&&
(46===k.charCodeAt(g)?(b=sa,g++):(b=f,0===q&&d(ta)),b===f&&(45===k.charCodeAt(g)?(b=La,g++):(b=f,0===q&&d(Ma)),b===f&&(33===k.charCodeAt(g)?(b=Tc,g++):(b=f,0===q&&d(Uc)),b===f&&(36===k.charCodeAt(g)?(b=Le,g++):(b=f,0===q&&d(Me)),b===f&&(38===k.charCodeAt(g)?(b=Wm,g++):(b=f,0===q&&d(Xm)),b===f&&(39===k.charCodeAt(g)?(b=fd,g++):(b=f,0===q&&d(gd)),b===f&&(40===k.charCodeAt(g)?(b=T,g++):(b=f,0===q&&d(U)),b===f&&(41===k.charCodeAt(g)?(b=V,g++):(b=f,0===q&&d(W)),b===f&&(42===k.charCodeAt(g)?(b=Ta,g++):
(b=f,0===q&&d(Ua)),b===f&&(43===k.charCodeAt(g)?(b=hb,g++):(b=f,0===q&&d(ib)),b===f&&(44===k.charCodeAt(g)?(b=la,g++):(b=f,0===q&&d(ma)),b===f&&(59===k.charCodeAt(g)?(b=Va,g++):(b=f,0===q&&d(Wa)),b===f&&(58===k.charCodeAt(g)?(b=Mb,g++):(b=f,0===q&&d(Nb)),b===f&&(61===k.charCodeAt(g)?(b=oc,g++):(b=f,0===q&&d(pc)),b===f&&(47===k.charCodeAt(g)?(b=lb,g++):(b=f,0===q&&d(mb)),b===f&&(63===k.charCodeAt(g)?(b=Vc,g++):(b=f,0===q&&d(Wc)),b===f&&(35===k.charCodeAt(g)?(b=Eg,g++):(b=f,0===q&&d(Fg)),b===f&&(64===
k.charCodeAt(g)?(b=eg,g++):(b=f,0===q&&d(fg)),b===f&&(37===k.charCodeAt(g)?(b=Kg,g++):(b=f,0===q&&d(Lg)))))))))))))))))))))),b!==f?a="\\"+b:(g=a,a=f)):(g=a,a=f),q--,a===f&&0===q&&d(Ym));q--;a===f&&0===q&&d(Zm);return a}function Mg(){var a;q++;ba.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(ca));a===f&&($m.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(an)),a===f&&(bn.test(k.charAt(g))?(a=k.charAt(g),g++):(a=f,0===q&&d(cn))));q--;a===f&&0===q&&d(dn);return a}c=void 0!==c?c:{};var f={},
Ng={DOCUMENT:m},Og=m,ah=e("[1] QueryUnit"),$g=e("[2] Query"),fh=e("[3] Prologue"),eh=e("[4] BaseDecl"),yd="BASE",ch=b("BASE",!1),zd="base",dh=b("base",!1),ih=e("[5] PrefixDecl"),Ad="PREFIX",gh=b("PREFIX",!1),Bd="prefix",hh=b("prefix",!1),Rg=e("[6] SelectQuery"),Ei=e("[7] SubSelect"),nh=e("[8] SelectClause"),Cd="SELECT",jh=b("SELECT",!1),Dd="select",kh=b("select",!1),qa="DISTINCT",db=b("DISTINCT",!1),ra="distinct",eb=b("distinct",!1),Ed="REDUCED",lh=b("REDUCED",!1),Fd="reduced",mh=b("reduced",!1),
T="(",U=b("(",!1),fb="AS",Yb=b("AS",!1),gb="as",Zb=b("as",!1),V=")",W=b(")",!1),Ta="*",Ua=b("*",!1),Tg=e("[9] ConstructQuery"),Sb="CONSTRUCT",rd=b("CONSTRUCT",!1),Tb="construct",sd=b("construct",!1),bb="WHERE",Ub=b("WHERE",!1),cb="where",Vb=b("where",!1),Ha="{",Ia=b("{",!1),ya="}",za=b("}",!1),Vg=e("[10] DescribeQuery"),td="DESCRIBE",Ug=b("DESCRIBE",!1),Yg=e("[11] AskQuery"),ud="ASK",Wg=b("ASK",!1),vd="ask",Xg=b("ask",!1),sh=e("[12] DatasetClause"),Hd="FROM",oh=b("FROM",!1),Id="from",ph=b("from",
!1),qh=e("[13] DefaultGraphClause"),rh=e("[14] NamedGraphClause"),ub="NAMED",Lc=b("NAMED",!1),vb="named",Mc=b("named",!1),th=e("[15] SourceSelector"),uh=e("[16] WhereClause"),Eh=e("[17] SolutionModifier"),xh=e("[18] GroupClause"),Jd="GROUP",vh=b("GROUP",!1),Kd="group",wh=b("group",!1),$b="BY",Ld=b("BY",!1),ac="by",Md=b("by",!1),Fh=e("[19] GroupCondition"),zh=e("[20] HavingClause"),Nd="HAVING",yh=b("HAVING",!1),Gh=e("[21] HavingCondition"),Ch=e("[22] OrderClause"),Od="ORDER",Ah=b("ORDER",!1),Pd="order",
Bh=b("order",!1),Lh=e("[23] OrderCondition"),Qd="ASC",Hh=b("ASC",!1),Rd="asc",Ih=b("asc",!1),Sd="DESC",Jh=b("DESC",!1),Td="desc",Kh=b("desc",!1),Dh=e("[24] LimitOffsetClauses"),Oh=e("[25] LimitClause"),Ud="LIMIT",Mh=b("LIMIT",!1),Vd="limit",Nh=b("limit",!1),Rh=e("[26] OffsetClause"),Wd="OFFSET",Ph=b("OFFSET",!1),Xd="offset",Qh=b("offset",!1),Qg=e("[27] BindingsClause"),qd="BINDINGS",Pg=b("BINDINGS",!1),Sh=e("[28] BindingValue"),bc="UNDEF",Yd=b("UNDEF",!1),Zg=e("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),
Wb="VALUES",wd=b("VALUES",!1),Xb="values",xd=b("values",!1),bh=e("[29] UpdateUnit"),oi=e("[30] Update"),Va=";",Wa=b(";",!1),ni=e("[31] Update1"),Xh=e("[32] Load"),Zd="LOAD",Th=b("LOAD",!1),$d="load",Uh=b("load",!1),ae="INTO",Vh=b("INTO",!1),be="into",Wh=b("into",!1),$h=e("[33] Clear"),ce="CLEAR",Yh=b("CLEAR",!1),de="clear",Zh=b("clear",!1),wb="SILENT",Nc=b("SILENT",!1),xb="silent",Oc=b("silent",!1),ci=e("[34] Drop"),ee="DROP",ai=b("DROP",!1),fe="drop",bi=b("drop",!1),fi=e("[35] Create"),ge="CREATE",
di=b("CREATE",!1),he="create",ei=b("create",!1),gi=e("[36] InsertData"),cc="INSERT",ie=b("INSERT",!1),dc="insert",je=b("insert",!1),ec="DATA",ke=b("DATA",!1),fc="data",le=b("data",!1),hi=e("[37] DeleteData"),yb="DELETE",Pc=b("DELETE",!1),zb="delete",Qc=b("delete",!1),ii=e("[38] DeleteWhere"),mi=e("[39] Modify"),me="WITH",ji=b("WITH",!1),ne="with",ki=b("with",!1),li=e("[40] DeleteClause"),pi=e("[41] InsertClause"),si=e("[42] UsingClause"),oe="USING",qi=b("USING",!1),pe="using",ri=b("using",!1),ti=
e("[43] GraphRef"),Ab="GRAPH",Rc=b("GRAPH",!1),Bb="graph",Sc=b("graph",!1),yi=e("[44] GraphRefAll"),qe="DEFAULT",ui=b("DEFAULT",!1),re="default",vi=b("default",!1),se="ALL",wi=b("ALL",!1),te="all",xi=b("all",!1),zi=e("[45] QuadPattern"),Ai=e("[46] QuadData"),Bi=e("[47] Quads"),sa=".",ta=b(".",!1),Ci=e("[48] QuadsNotTriples"),Di=e("[49] TriplesTemplate"),Gi=e("[50] GroupGraphPattern"),Fi=e("[51] GroupGraphPatternSub"),Ki=e("[54] TriplesBlock"),bj=e("[53] GraphPatternNotTriples"),Oi=e("[54] OptionalGraphPattern"),
we="OPTIONAL",Mi=b("OPTIONAL",!1),xe="optional",Ni=b("optional",!1),Si=e("[55] GraphGraphPattern"),Ui=e("[56] ServiceGraphPattern"),Ae="SERVICE",Ti=b("SERVICE",!1),Ri=e("[57] MinusGraphPattern"),ye="MINUS",Pi=b("MINUS",!1),ze="minus",Qi=b("minus",!1),Li=e("[58] GroupOrUnionGraphPattern"),gc="UNION",ue=b("UNION",!1),hc="union",ve=b("union",!1),Xi=e("[59] Filter"),Be="FILTER",Vi=b("FILTER",!1),Ce="filter",Wi=b("filter",!1),$i=e("[60] Bind"),De="BIND",Yi=b("BIND",!1),Ee="bind",Zi=b("bind",!1),cj=e("[60] Constraint"),
aj=e("[61] InlineData"),fj=e("[62] DataBlock"),dj=e("[63] InlineDataOneVar"),ej=e("[64] InlineDataFull"),gj=e("[65] DataBlockValue"),hj=e("[61] FunctionCall"),ij=e("[62] ArgList"),la=",",ma=b(",",!1),jj=e("[63] ExpressionList"),Sg=e("[64] ConstructTemplate"),kj=e("[65] ConstructTriples"),mj=e("[66] TriplesSameSubject"),Hi=e("[83] PropertyListPathNotEmpty"),nj=e("[67] PropertyListNotEmpty"),lj=e("[68] PropertyList"),oj=e("[86] ObjectListPath"),pj=e("[69] ObjectList"),qj=e("[87] ObjectPath"),rj=e("[70] Object"),
sj=e("[71] Verb"),ic="a",jc=b("a",!1),Fe=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},Ji=e("[72] TriplesSameSubjectPath"),tj=e("[73] PropertyListNotEmptyPath"),Ii=e("[74] PropertyListPath"),uj=e("[75]"),vj=e("[76] VerbSimple"),xj=e("[77] Path"),wj=e("[78] PathAlternative"),kc="|",lc=b("|",!1),yj=e("[79] PathSequence"),lb="/",mb=b("/",!1),Bj=e("[88] PathElt"),Cj=e("[81] PathEltOrInverse"),Ge="^",He=b("^",!1),Aj=e("[82] PathMod"),Vc=
"?",Wc=b("?",!1),hb="+",ib=b("+",!1),zj=e("[83] PathPrimary"),Tc="!",Uc=b("!",!1),Dj=e("[85] PathOneInPropertySet"),Ej=e("[86] Integer"),Hj=e("[100] TriplesNodePath"),Kj=e("[87] TriplesNode"),Gj=e("[101] BlankNodePropertyListPath"),Xc="[",Yc=b("[",!1),Zc="]",$c=b("]",!1),Jj=e("[88] BlankNodePropertyList"),Fj=e("[103] CollectionPath"),Ij=e("[89] Collection"),Lj=e("[105] GraphNodePath"),Mj=e("[90] GraphNode"),Sj=e("[91] VarOrTerm"),Tj=e("[92] VarOrIRIref"),Wj=e("[93] Var"),Rj=e("[94] GraphTerm"),Yj=
e("[95] Expression"),Xj=e("[96] ConditionalOrExpression"),mc="||",Ne=b("||",!1),Zj=e("[97] ConditionalAndExpression"),nc="&&",Oe=b("&&",!1),bk=e("[98] ValueLogical"),ak=e("[99] RelationalExpression"),oc="=",pc=b("=",!1),qc="!=",Pe=b("!=",!1),ad="<",bd=b("<",!1),cd=">",dd=b(">",!1),rc="<=",Qe=b("<=",!1),sc=">=",Re=b(">=",!1),tc="I",uc=b("I",!1),vc="i",wc=b("i",!1),Cb="N",Db=b("N",!1),Eb="n",Fb=b("n",!1),Se="O",Te=b("O",!1),Ue="o",Ve=b("o",!1),We="T",Xe=b("T",!1),Ye="t",Ze=b("t",!1),dk=e("[100] NumericExpression"),
ck=e("[101] AdditiveExpression"),La="-",Ma=b("-",!1),ek=e("[102] MultiplicativeExpression"),fk=e("[103] UnaryExpression"),vk=e("[104] PrimaryExpression"),wk=e("[105] BrackettedExpression"),nl=e("[106] BuiltInCall"),nf="STR",xk=b("STR",!1),of="str",yk=b("str",!1),pf="LANG",zk=b("LANG",!1),qf="lang",Ak=b("lang",!1),rf="LANGMATCHES",Bk=b("LANGMATCHES",!1),sf="langmatches",Ck=b("langmatches",!1),tf="DATATYPE",Dk=b("DATATYPE",!1),uf="datatype",Ek=b("datatype",!1),vf="BOUND",Fk=b("BOUND",!1),wf="bound",
Gk=b("bound",!1),xf="IRI",Hk=b("IRI",!1),yf="iri",Ik=b("iri",!1),zf="URI",Jk=b("URI",!1),Af="uri",Kk=b("uri",!1),Bf="BNODE",Lk=b("BNODE",!1),Cf="bnode",Mk=b("bnode",!1),Df="COALESCE",Nk=b("COALESCE",!1),Ef="coalesce",Ok=b("coalesce",!1),Ff="IF",Pk=b("IF",!1),Gf="if",Qk=b("if",!1),Hf="ISLITERAL",Rk=b("ISLITERAL",!1),If="isliteral",Sk=b("isliteral",!1),Jf="isLITERAL",Tk=b("isLITERAL",!1),Kf="ISBLANK",Uk=b("ISBLANK",!1),Lf="isblank",Vk=b("isblank",!1),Mf="isBLANK",Wk=b("isBLANK",!1),Nf="SAMETERM",Xk=
b("SAMETERM",!1),Of="sameterm",Yk=b("sameterm",!1),Pf="ISURI",Zk=b("ISURI",!1),Qf="isuri",$k=b("isuri",!1),Rf="isURI",al=b("isURI",!1),Sf="ISIRI",bl=b("ISIRI",!1),Tf="isiri",cl=b("isiri",!1),Uf="isIRI",dl=b("isIRI",!1),Vf="custom:",el=b("custom:",!1),Wf="CUSTOM:",fl=b("CUSTOM:",!1),Xf=/^[a-zA-Z0-9_]/,Yf=a([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),il=e("[107] RegexExpression"),Zf="REGEX",gl=b("REGEX",!1),$f="regex",hl=b("regex",!1),jl=e("[108] ExistsFunc"),xc="EXISTS",ag=b("EXISTS",!1),yc="exists",
bg=b("exists",!1),ml=e("[109] NotExistsFunc"),cg="NOT",kl=b("NOT",!1),dg="not",ll=b("not",!1),uk=e("[110] Aggregate"),$e="COUNT",hk=b("COUNT",!1),af="count",ik=b("count",!1),bf="GROUP_CONCAT",jk=b("GROUP_CONCAT",!1),cf="group_concat",kk=b("group_concat",!1),df="SEPARATOR",lk=b("SEPARATOR",!1),ef="SUM",mk=b("SUM",!1),ff="sum",nk=b("sum",!1),gf="MIN",ok=b("MIN",!1),hf="min",pk=b("min",!1),jf="MAX",qk=b("MAX",!1),kf="max",rk=b("max",!1),lf="AVG",sk=b("AVG",!1),mf="avg",tk=b("avg",!1),gk=e("[117] IRIrefOrFunction"),
ql=e("[112] RDFLiteral"),ig="^^",pl=b("^^",!1),wl=e("[113] NumericLiteral"),rl=e("[114] NumericLiteralUnsigned"),vl=e("[115] NumericLiteralPositive"),Al=e("[116] NumericLiteralNegative"),Fl=e("[117] BooleanLiteral"),kg="TRUE",Bl=b("TRUE",!1),lg="true",Cl=b("true",!1),mg="FALSE",Dl=b("FALSE",!1),ng="false",El=b("false",!1),Kl=e("[118] String"),Cc=function(a){return{token:"string",value:a}},Nl=e("[119] IRIref"),Ml=e("[120] PrefixedName"),Qj=e("[121] BlankNode"),Ol=e("[122] IRI_REF"),Ag=/^[^<>"{}|\^`\\]/,
Bg=a('<>"{}|^`\\'.split(""),!0,!1),Ql=e("[123] PNAME_NS"),Mb=":",Nb=b(":",!1),Ll=e("[124] PNAME_LN"),Oj=e("[125] BLANK_NODE_LABEL"),Ie="_:",Nj=b("_:",!1),Uj=e("[126] VAR1"),Vj=e("[127] VAR2"),Le="$",Me=b("$",!1),ol=e("[128] LANGTAG"),eg="@",fg=b("@",!1),gg=/^[a-zA-Z]/,hg=a([["a","z"],["A","Z"]],!1,!1),zc=/^[a-zA-Z0-9]/,Ac=a([["a","z"],["A","Z"],["0","9"]],!1,!1),Rl=e("[129] INTEGER"),ba=/^[0-9]/,ca=a([["0","9"]],!1,!1),Sl=e("[130] DECIMAL"),Tl=e("[131] DOUBLE"),ul=e("[132] INTEGER_POSITIVE"),tl=e("[133] DECIMAL_POSITIVE"),
jg=function(a){a.value="+"+a.value;return a},sl=e("[134] DOUBLE_POSITIVE"),zl=e("[135] INTEGER_NEGATIVE"),ed=function(a){a.value="-"+a.value;return a},yl=e("[136] DECIMAL_NEGATIVE"),xl=e("[137] DOUBLE_NEGATIVE"),Yl=e("[138] EXPONENT"),Ul=/^[eE]/,Vl=a(["e","E"],!1,!1),Wl=/^[+\-]/,Xl=a(["+","-"],!1,!1),Il=e("[139] STRING_LITERAL1"),fd="'",gd=b("'",!1),ug=/^[^'\\\n\r]/,vg=a(["'","\\","\n","\r"],!0,!1),Jl=e("[140] STRING_LITERAL2"),wg='"',xg=b('"',!1),yg=/^[^"\\\n\r]/,zg=a(['"',"\\","\n","\r"],!0,!1),
Gl=e("[141] STRING_LITERAL_LONG1"),Bc="'''",og=b("'''",!1),pg=/^[^'\\]/,qg=a(["'","\\"],!0,!1),Hl=e("[142] STRING_LITERAL_LONG2"),Dc='"""',rg=b('"""',!1),sg=/^[^"\\]/,tg=a(['"',"\\"],!0,!1),am=e("[143] ECHAR"),Cg="\\",Dg=b("\\",!1),Zl=/^[tbnrf"']/,$l=a("tbnrf\"'".split(""),!1,!1),bm=e("[144] NIL"),lm=e("[145] WS"),cm=/^[ ]/,dm=a([" "],!1,!1),em=/^[\t]/,fm=a(["\t"],!1,!1),gm=/^[\r]/,hm=a(["\r"],!1,!1),im=/^[\n]/,jm=a(["\n"],!1,!1),km=e(" COMMENT"),Eg="#",Fg=b("#",!1),Gg=/^[^\n\r]/,Hg=a(["\n","\r"],
!0,!1),Pj=e("[146] ANON"),Om=e("[147] PN_CHARS_BASE"),mm=/^[A-Z]/,nm=a([["A","Z"]],!1,!1),om=/^[a-z]/,pm=a([["a","z"]],!1,!1),qm=/^[\xC0-\xD6]/,rm=a([["\u00c0","\u00d6"]],!1,!1),sm=/^[\xD8-\xF6]/,tm=a([["\u00d8","\u00f6"]],!1,!1),um=/^[\xF8-\u02FF]/,vm=a([["\u00f8","\u02ff"]],!1,!1),wm=/^[\u0370-\u037D]/,xm=a([["\u0370","\u037d"]],!1,!1),ym=/^[\u037F-\u1FFF]/,zm=a([["\u037f","\u1fff"]],!1,!1),Am=/^[\u200C-\u200D]/,Bm=a([["\u200c","\u200d"]],!1,!1),Cm=/^[\u2070-\u218F]/,Dm=a([["\u2070","\u218f"]],
!1,!1),Em=/^[\u2C00-\u2FEF]/,Fm=a([["\u2c00","\u2fef"]],!1,!1),Gm=/^[\u3001-\uD7FF]/,Hm=a([["\u3001","\ud7ff"]],!1,!1),Im=/^[\uF900-\uFDCF]/,Jm=a([["\uf900","\ufdcf"]],!1,!1),Km=/^[\uFDF0-\uFFFD]/,Lm=a([["\ufdf0","\ufffd"]],!1,!1),Mm=/^[\u1000-\uEFFF]/,Nm=a([["\u1000","\uefff"]],!1,!1),Pm=e("[148] PN_CHARS_U"),Ig="_",Jg=b("_",!1),Qm=e("[149] VARNAME"),hd=/^[\xB7]/,id=a(["\u00b7"],!1,!1),jd=/^[\u0300-\u036F]/,kd=a([["\u0300","\u036f"]],!1,!1),ld=/^[\u203F-\u2040]/,md=a([["\u203f","\u2040"]],!1,!1),
Rm=e("[150] PN_CHARS"),Pl=e("[151] PN_PREFIX"),Sm=e("[152] PN_LOCAL"),Zm=e("[170] PLX"),Tm=e("[171] PERCENT"),Kg="%",Lg=b("%",!1),dn=e("[172] HEX"),$m=/^[A-F]/,an=a([["A","F"]],!1,!1),bn=/^[a-f]/,cn=a([["a","f"]],!1,!1),Ym=e("[173] PN_LOCAL_ESC"),Um="~",Vm=b("~",!1),Wm="&",Xm=b("&",!1),g=0,Rb=[{line:1,column:1}],Ka=0,Kc=[],q=0,Fc;if("startRule"in c){if(!(c.startRule in Ng))throw Error("Can't start parsing from rule \""+c.startRule+'".');Og=Ng[c.startRule]}var Ja=function(a){for(var b="",c=0;c<a.length;c++)b=
"string"===typeof a[c]?b+a[c]:b+a[c].join("");return b},ua=0,Gd=function(a){var b="";if(null==a)return null;for(var c=0;c<a.length;c++)b+=a[c];return b.toUpperCase()};Fc=Og();if(Fc!==f&&g===k.length)return Fc;Fc!==f&&g<k.length&&d({type:"end"});throw function(a,b,c){return new t(t.buildMessage(a,b),a,b,c)}(Kc,Ka<k.length?k.charAt(Ka):null,Ka<k.length?l(Ka,Ka+1):l(Ka,Ka));}}}()},{}],48:[function(x,C,B){x("./btree");var t=x("./utils"),k=x("./lexicon").Lexicon;PersistentLexicon=function(c,b){var a=this;
t.registerIndexedDB(a);this.defaultGraphOid=0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};this.oidCounter=1;a.dbName=b||"rdfstorejs";var e=a.indexedDB.open(this.dbName+"_lexicon",1);e.onerror=function(a){c(null,Error("Error opening IndexedDB: "+a.target.errorCode))};e.onsuccess=function(b){a.db=b.target.result;c(a)};e.onupgradeneeded=function(b){a.db=b.target.result;a.db.createObjectStore("knownGraphs",
{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0});a.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}};PersistentLexicon.prototype.registerGraph=function(c,b,a){if(c!=this.defaultGraphOid){var e=this.db.transaction(["knownGraphs"],"readwrite");e.onerror=function(b){a(null,Error(b.target.statusCode))};var h=e.objectStore("knownGraphs");h.get(b).onsuccess=function(e){e.target.result?a(!0):h.add({oid:c,uriToken:b}).onsuccess=function(b){a(!0)}}}else a()};
PersistentLexicon.prototype.registeredGraphs=function(c,b){var a=[],e=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();e.onsuccess=function(e){(e=e.target.result)?(!0===c?a.push(e.value.uriToken):a.push(e.value.oid),e["continue"]()):b(a)};e.onerror=function(a){b(null,Error("Error retrieving data from the cursor: "+a.target.errorCode))}};PersistentLexicon.prototype.registerUri=function(c,b){if(c===this.defaultGraphUri)b(this.defaultGraphOid);else{var a=this.db.transaction(["components"],
"readwrite").objectStore("components"),e=a.index("value").get("_u:"+c);e.onsuccess=function(e){if(e=e.target.result){e.counter++;var h=e.id;e=a.put(e);e.onsuccess=function(a){b(h)};e.onerror=function(a){b(null,Error("Error updating the URI data"+a.target.errorCode))}}else e=a.add({value:"_u:"+c,counter:0,uri:!0}),e.onsuccess=function(a){b(a.target.result)},e.onerror=function(a){b(null,Error("Error inserting the URI data"+a.target.errorCode))}};e.onerror=function(a){b(null,Error("Error retrieving the URI data"+
a.target.errorCode))}}};PersistentLexicon.prototype.resolveUri=function(c,b){if(c===this.defaultGraphUri)b(this.defaultGraphOid);else{var a=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+c);a.onsuccess=function(a){null!=a.target.result?b(a.target.result.id):b(-1)};a.onerror=function(a){b(null,Error("Error retrieving uri data "+a.target.errorCode))}}};PersistentLexicon.prototype.resolveUriCost=function(c,b){if(c===this.defaultGraphUri)b(0);else{var a=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+
c);a.onsuccess=function(a){null!=a.target.result?b(a.target.result.cost):b(-1)};a.onerror=function(a){b(null,Error("Error retrieving uri data "+a.target.errorCode))}}};PersistentLexicon.prototype.registerBlank=function(c){var b=guid(),b=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+b,counter:0,label:!0});b.onsuccess=function(a){c(a.target.result)};b.onerror=function(a){c(null,Error("Error inserting the URI data"+a.target.errorCode))}};PersistentLexicon.prototype.resolveBlankCost=
function(c,b){b(0)};PersistentLexicon.prototype.registerLiteral=function(c,b){var a=this.db.transaction(["components"],"readwrite").objectStore("components"),e=a.index("value").get("_l:"+c);e.onsuccess=function(e){if(e=e.target.result){e.counter++;var h=e.id;e=a.put(e);e.onsuccess=function(a){b(h)};e.onerror=function(a){b(null,Error("Error updating the literal data"+a.target.errorCode))}}else e=a.add({value:"_l:"+c,counter:0,literal:!0}),e.onsuccess=function(a){b(a.target.result)},e.onerror=function(a){b(null,
Error("Error inserting the literal data"+a.target.errorCode))}};e.onerror=function(a){b(null,Error("Error retrieving the literal data"+a.target.errorCode))}};PersistentLexicon.prototype.resolveLiteral=function(c,b){var a=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+c);a.onsuccess=function(a){null!=a.target.result?b(a.target.result.id):b(-1)};a.onerror=function(a){b(null,Error("Error retrieving literal data "+a.target.errorCode))}};PersistentLexicon.prototype.resolveLiteralCost=
function(c,b){var a=that.db.transaction(["components"]).objectStore("components").index("components").get(c);a.onsuccess=function(a){null!=a.target.result?b(a.target.result.cost):b(-1)};a.onerror=function(a){b(null,Error("Error retrieving literal data "+a.target.errorCode))}};PersistentLexicon.prototype.parseLiteral=function(c){return k.prototype.parseLiteral(c)};PersistentLexicon.prototype.parseUri=function(c){return k.prototype.parseUri(c)};PersistentLexicon.prototype.retrieve=function(c,b){var a=
this,e;c===this.defaultGraphOid?b({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):(e=a.db.transaction(["components"]),e=e.objectStore("components").get(c),e.onsuccess=function(c){null!=c.target.result?null!=c.target.result.label?b({token:"blank",value:"_:"+c.target.result.id}):null!=c.target.result.uri?b(a.parseUri(c.target.result.value.slice(3,c.target.result.value.length))):null!=c.target.result.literal?b(a.parseLiteral(c.target.result.value.slice(3,c.target.result.value.length))):
(console.log(c.target.result),b(null,Error("Unknown type of component "+c.target.result))):b(null,null)},e.onerror=function(a){b(null,Error("Error searching in blanks data "+a.target.errorCode))})};PersistentLexicon.prototype.clear=function(c){this.defaultGraphOid=0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var b,a=function(){null!=c&&c()};b=this.db.transaction(["components"],
"readwrite").objectStore("components").clear();b.onsuccess=a;b.onerror=a};PersistentLexicon.prototype.unregister=function(c,b,a){var e=this;t.seq(function(a){e._unregisterTerm(c.subject.token,b.subject,a)},function(a){e._unregisterTerm(c.predicate.token,b.predicate,a)},function(a){e._unregisterTerm(c.object.token,b.object,a)},function(a){null!=c.graph?e._unregisterTerm(c.graph.token,b.graph,a):a()})(function(){a(!0)})};PersistentLexicon.prototype._unregisterTerm=function(c,b,a){var e=this.db.transaction(["components",
"knownGraphs"],"readwrite");"uri"===c?b!=this.defaultGraphOid?(c=e.objectStore("components")["delete"](b),c.onsuccess=function(){e.objectStore("knownGraphs")["delete"](b).onsuccess=function(){a()}}()):a():(c=e.objectStore("components")["delete"](b),c.onsuccess=function(){a()})};C.exports={PersistentLexicon:PersistentLexicon}},{"./btree":41,"./lexicon":45,"./utils":58}],49:[function(x,C,B){var t=x("./utils");PersistentQuadBackend=function(k,c){var b=this;if(0!==arguments){t.registerIndexedDB(b);this.indexMap=
{};this.indices="S P O G SP SO SG PO PG OG SPO SPG SOG POG SPOG".split(" ");this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object",
"graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]};this.componentOrdersMap={};for(var a in this.componentOrders){var e=this.componentOrders[a].slice(0,a.length).sort().join(".");this.componentOrdersMap[e]=a}b.dbName=k.name||"rdfstorejs";a=b.indexedDB.open(this.dbName+"_db",1);a.onerror=function(a){c(null,
Error("Error opening IndexedDB: "+a.target.errorCode))};a.onsuccess=function(a){b.db=a.target.result;c(b)};a.onupgradeneeded=function(a){var c=a.target.result.createObjectStore(b.dbName,{keyPath:"SPOG"});t.each(b.indices,function(a){"SPOG"!==a&&c.createIndex(a,a,{unique:!1})})}}};PersistentQuadBackend.prototype.index=function(k,c){var b=this;t.each(this.indices,function(a){k[a]=b._genMinIndexKey(k,a)});var a=b.db.transaction([b.dbName],"readwrite");a.oncomplete=function(a){};a.onerror=function(a){c(null,
Error(a.target.statusCode))};a.objectStore(b.dbName).add(k).onsuccess=function(a){c(!0)}};PersistentQuadBackend.prototype.range=function(k,c){var b=this.db.transaction([this.dbName]).objectStore(this.dbName),a=this._indexForPattern(k),e=this._genMinIndexKey(k,a),h=this._genMaxIndexKey(k,a),e=this.IDBKeyRange.bound(e,h,!1,!1),l=[];("SPOG"===a?b:b.index(a)).openCursor(e).onsuccess=function(a){(a=a.target.result)?(l.push(a.value),a["continue"]()):c(l)}};PersistentQuadBackend.prototype.search=function(k,
c){var b=this.db.transaction([this.dbName]).objectStore(this.dbName),a=this._genMinIndexKey(k,"SPOG"),b=b.get(a);b.onerror=function(a){c(null,Error(a.target.statusCode))};b.onsuccess=function(a){c(null!=a.target.result)}};PersistentQuadBackend.prototype["delete"]=function(k,c){var b=this._genMinIndexKey(k,"SPOG"),b=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName)["delete"](b);b.onsuccess=function(){c(!0)};b.onerror=function(a){c(null,Error(a.target.statusCode))}};PersistentQuadBackend.prototype._genMinIndexKey=
function(k,c){return t.map(this.componentOrders[c],function(b){return"string"===typeof k[b]||null==k[b]?"0":k[b]}).join(".")};PersistentQuadBackend.prototype._genMaxIndexKey=function(k,c){for(var b=this.componentOrders[c],a=[],e=0;e<b.length;e++){var h=k[b[e]];a[e]="string"===typeof h?"z":h}return t.map(a,function(a){return""+a}).join(".")};PersistentQuadBackend.prototype._indexForPattern=function(k){k=k.indexKey.sort().join(".");var c=this.componentOrdersMap[k];if(null==c)throw Error("Error, cannot find index for indexKey "+
k);return c};PersistentQuadBackend.prototype.clear=function(k){var c;c=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).clear();c.onsuccess=function(){k()};c.onerror=function(){k()}};C.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":58}],50:[function(x,C,B){var t=x("./quad_index").QuadIndex,k=x("./utils");QuadBackend=function(c,b){this.indexMap={};this.treeOrder=c.treeOrder;this.indices=c.index||QuadBackend.allIndices;this.componentOrders=QuadBackend.componentOrders;
var a=this;k.eachSeries(this.indices,function(b,c){new t({order:a.treeOrder,componentOrder:a.componentOrders[b]},function(e){a.indexMap[b]=e;c()})},function(){b(a)})};QuadBackend.allIndices="SPOG GP OGS POG GSP OS".split(" ");QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject",
"predicate","graph"]};QuadBackend.prototype._indexForPattern=function(c){c=c.indexKey;for(var b=0;b<QuadBackend.allIndices.length;b++)for(var a=QuadBackend.allIndices[b],e=QuadBackend.componentOrders[a],h=0;h<e.length&&!1!==k.include(c,e[h]);h++)if(h==c.length-1)return a;return"SPOG"};QuadBackend.prototype.index=function(c,b){var a=this;k.eachSeries(this.indices,function(b,h){a.indexMap[b].insert(c,function(){h()})},function(){b(!0)})};QuadBackend.prototype.range=function(c,b){var a=this._indexForPattern(c),
a=this.indexMap[a];null!=a&&a.range(c,function(a){b(a)})};QuadBackend.prototype.search=function(c,b){var a=this.indexMap.SPOG;null!=a&&a.search(c,function(a){b(null!=a)})};QuadBackend.prototype["delete"]=function(c,b){var a=this;k.eachSeries(this.indices,function(b,h){a.indexMap[b]["delete"](c,function(){h()})},function(){b(!0)})};QuadBackend.prototype.clear=function(c){var b=this;k.eachSeries(this.indices,function(a,c){new t({order:b.treeOrder,componentOrder:b.componentOrders[a]},function(e){b.indexMap[a]=
e;c()})},function(){c(!0)})};C.exports.QuadBackend=QuadBackend},{"./quad_index":51,"./utils":58}],51:[function(x,C,B){var t=x("./btree").Tree,k=x("./utils"),c=x("./utils");NodeKey=function(b,a){this.subject=b.subject;this.predicate=b.predicate;this.object=b.object;this.graph=b.graph;this.order=a};NodeKey.prototype.comparator=function(b){for(var a=0;a<this.order.length;a++){var c=this.order[a];if(null==b[c])break;else{if(this[c]<b[c])return-1;if(this[c]>b[c])return 1}}return 0};Pattern=function(b){this.subject=
b.subject;this.predicate=b.predicate;this.object=b.object;this.graph=b.graph;this.indexKey=[];this.keyComponents={};var a=[],c=[],h=this;k.forEach(["subject","predicate","object","graph"],function(b){"string"===typeof h[b]?(c.push(b),h.keyComponents[b]=null):(a.push(b),h.keyComponents[b]=h[b],h.indexKey.push(b))});this.order=a.concat(c);this.key=new NodeKey(this.keyComponents,this.order)};QuadIndex=function(b,a){0!=arguments&&(this.componentOrder=b.componentOrder,t.call(this,b.order,function(b){b.comparator=
function(a,c){for(var d=0;d<b.componentOrder.length;d++){var e=b.componentOrder[d],h=a[e],e=c[e];if(h<e)return-1;if(h>e)return 1}return 0};b.rangeComparator=function(a,c){for(var d=0;d<b.componentOrder.length;d++){var e=b.componentOrder[d];if(null==c[e]||null==a[e])break;else{if(a[e]<c[e])return-1;if(a[e]>c[e])return 1}}return 0};a(b)}))};QuadIndex.prototype=k.create(t.prototype,{constructor:t});QuadIndex.prototype.insert=function(b,a){t.prototype.insert.call(this,b,null,function(b){a(b)})};QuadIndex.prototype.search=
function(b,a){t.prototype.search.call(this,b,function(b){a(b)},!0)};QuadIndex.prototype.range=function(b,a){this._rangeTraverse(this,this.root,b,a)};QuadIndex.prototype._rangeTraverse=function(b,a,e,h){var l=e.key,d=[],k=[a];c.whilst(function(){return 0<k.length},function(a){for(var e=k.shift(),h=0;h<e.numberActives&&-1===b.rangeComparator(e.keys[h].key,l);)h++;if(!0===e.isLeaf){for(var m=h;m<e.numberActives&&0===b.rangeComparator(e.keys[m].key,l);)d.push(e.keys[m].key),m++;a()}else b._diskRead(e.children[h],
function(n){k.push(n);var m=h;c.whilst(function(){return m<e.numberActives&&0===b.rangeComparator(e.keys[m].key,l)},function(a){d.push(e.keys[m].key);m++;b._diskRead(e.children[m],function(b){k.push(b);a()})},function(){a()})})},function(){h(d)})};C.exports={QuadIndex:QuadIndex,Pattern:Pattern,NodeKey:NodeKey}},{"./btree":41,"./utils":58}],52:[function(x,C,B){function t(a,b,c){this.name="BindExpressionError";this.bind=b;this.error=c;this.message=a}var k=x("./abstract_query_tree").AbstractQueryTree,
c=x("./abstract_query_tree").NonSupportedSparqlFeatureError,b=x("./utils"),a=x("./quad_index"),e=x("./query_plan").QueryPlan,h=x("./query_filters").QueryFilters,l=x("./rdf_model"),d=x("./rdf_loader").RDFLoader,m=x("./graph_callbacks").CallbacksBackend,v=x("./utils"),w=x("./utils");t.prototype=Error();t.constructor=t;QueryEngine=function(a){0!=arguments.length&&(this.backend=a.backend,this.lexicon=a.lexicon,this.eventsOnBatchLoad=a.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=
new k,this.rdfLoader=new d(a.communication),this.callbacksBackend=new m(this),this.customFns=a.customFns||{})};QueryEngine.prototype.setCustomFunctions=function(a){this.customFns=a};QueryEngine.prototype.registerNsInEnvironment=function(a,b){var c=[];null!=a&&null!=a.prefixes&&(c=a.prefixes);var d={},e;for(e in this.defaultPrefixes)d[e]=this.defaultPrefixes[e];for(e=0;e<c.length;e++){var h=c[e];"prefix"===h.token&&(d[h.prefix]=h.local)}b.namespaces=d;b.base=null!=a&&a.base&&"object"===typeof a.base?
a.base.value:null};QueryEngine.prototype.applyModifier=function(a,b){if("DISTINCT"==a){for(var c={},d=[],e=0;e<b.length;e++){var h=b[e],l="",k;for(k in h){var n=h[k];null==n?l=l+k+"null":"literal"==n.token?(null!=n.value&&(l+=n.value),null!=n.lang&&(l+=n.lang),null!=n.type&&(l+=n.type)):l=n.value?l+k+n.value:l+k+n}null==c[l]&&(d.push(h),c[l]=!0)}return d}return b};QueryEngine.prototype.applyLimitOffset=function(a,b,c){if(null==b&&null==a)return c;null==a&&(a=0);b=null==b?c.length:a+b;return c.slice(a,
b)};QueryEngine.prototype.applySingleOrderBy=function(a,b,c,d,e){var l=[],k=this;v.eachSeries(a,function(a,e){h.collect(a.expression,[b],c,d,k,function(a){l.push(a[0].value);e()})},function(){e({binding:b,value:l})})};QueryEngine.prototype.applyOrderBy=function(a,b,c,d,e){var h=this,l=[];null!=a&&0<a.length?v.eachSeries(b,function(b,e){h.applySingleOrderBy(a,b,c,d,function(a){l.push(a);e()})},function(){l.sort(function(b,c){return h.compareFilteredBindings(b,c,a,d)});for(var b=[],c=0;c<l.length;c++)b.push(l[c].binding);
e(b)}):e(b)};QueryEngine.prototype.compareFilteredBindings=function(a,b,c,d){for(var e=0;;){if(e==a.value.length)return 0;var l=c[e].direction;if(null==a.value[e]&&null==b.value[e])e++;else{if(null==a.value[e])a={value:!1};else if(null==b.value[e])a={value:!0};else if("blank"===a.value[e].token&&"blank"===b.value[e].token){e++;continue}else if("blank"===a.value[e].token)a={value:!1};else if("blank"===b.value[e].token)a={value:!0};else if("uri"===a.value[e].token&&"uri"===b.value[e].token)if(1==h.runEqualityFunction(a.value[e],
b.value[e],[],this,d).value){e++;continue}else a=h.runTotalGtFunction(a.value[e],b.value[e],[]);else if("uri"===a.value[e].token)a={value:!1};else if("uri"===b.value[e].token)a={value:!0};else if("literal"===a.value[e].token&&"literal"===b.value[e].token&&null==a.value[e].type&&null==b.value[e].type)if(1==h.runEqualityFunction(a.value[e],b.value[e],[],this,d).value){e++;continue}else a=h.runTotalGtFunction(a.value[e],b.value[e],[]);else if("literal"===a.value[e].token&&null==a.value[e].type)a={value:!1};
else if("literal"===b.value[e].token&&null==b.value[e].type)a={value:!0};else if(1==h.runEqualityFunction(a.value[e],b.value[e],[],this,d).value){e++;continue}else a=h.runTotalGtFunction(a.value[e],b.value[e],[]);return 1==a.value?"ASC"===l?1:-1:"ASC"===l?-1:1}}};QueryEngine.prototype.removeDefaultGraphBindings=function(a,b){for(var c=[],d={},e=0;e<b.named.length;e++)d[b.named[e].oid]=!0;for(e=0;e<b.implicit.length;e++)null==d[b.implicit[e].oid]&&c.push(b.implicit[e].oid);c=[];for(e=0;e<a.length;e++){var h=
a[e],l=!1,k;for(k in h){for(var n=0;n<d.length;n++)if(h[k]===d[n]){l=!0;break}if(l)break}l||c.push(h)}return c};QueryEngine.prototype.aggregateBindings=function(a,b,c,d,e){this.copyDenormalizedBindings(b,d.outCache,function(b){for(var l={},k=0;k<a.length;k++){var n=h.runAggregator(a[k],b,this,c,d);a[k].alias?l[a[k].alias.value]=n:l[a[k].value.value]=n}e(l)})};QueryEngine.prototype.projectBindings=function(a,b,c){if("*"===a[0].kind)return b;for(var d=[],e=0;e<b.length;e++){for(var l=b[e],k={},n=!0,
m=0;m<a.length;m++)if("variable"==a[m].token&&"aliased"!=a[m].kind)k[a[m].value.value]=l[a[m].value.value];else if("variable"==a[m].token&&"aliased"==a[m].kind){var t=h.runFilter(a[m].expression,l,this,c,{blanks:{},outCache:{}});if(h.isEbvError(t)){n=!1;break}else k[a[m].alias.value]=t}!0===n&&d.push(k)}return d};QueryEngine.prototype.resolveNsInEnvironment=function(a,b){return b.namespaces[a]};QueryEngine.prototype.normalizeTerm=function(a,c,d,e){if("uri"===a.token)a=b.lexicalFormBaseUri(a,c),null==
a?e(null):d?this.lexicon.registerUri(a,e):this.lexicon.resolveUri(a,e);else if("literal"===a.token)a=b.lexicalFormLiteral(a,c),d?this.lexicon.registerLiteral(a,e):this.lexicon.resolveLiteral(a,e);else if("blank"===a.token){var h=a.value;a=c.blanks[h];null!=a?e(a):d?this.lexicon.registerBlank(function(a){c.blanks[h]=a;e(a)}):this.lexicon.resolveBlank(function(a){c.blanks[h]=a;e(a)})}else"var"===a.token?e(a.value):e(null)};QueryEngine.prototype.normalizeDatasets=function(a,b,c){var d=this;v.eachSeries(a,
function(a,c){a.value===d.lexicon.defaultGraphUri?(a.oid=d.lexicon.defaultGraphOid,c()):d.normalizeTerm(a,b,!1,function(b){null!=b&&(a.oid=b);c()})},function(){c(!0)})};QueryEngine.prototype.normalizeQuad=function(a,c,d,e){var h=null,l=null,k=null,n=null,m=this,u=!1;v.seq(function(e){if(null==a.graph||a.graph.value===m.lexicon.defaultGraphUri)n=0,e();else{var h=b.lexicalFormBaseUri(a.graph,c);m.normalizeTerm(a.graph,c,d,function(b){null!=b?(n=b,!0===d&&"var"!=a.graph.token?m.lexicon.registerGraph(b,
h,function(){e()}):e()):(u=!0,e())})}},function(b){!1===u?m.normalizeTerm(a.subject,c,d,function(a){null!=a?h=a:u=!0;b()}):b()},function(b){!1===u?m.normalizeTerm(a.predicate,c,d,function(a){null!=a?l=a:u=!0;b()}):b()},function(b){!1===u?m.normalizeTerm(a.object,c,d,function(a){null!=a?k=a:u=!0;b()}):b()})(function(){!0===u?e(null):e({subject:h,predicate:l,object:k,graph:n})})};QueryEngine.prototype.denormalizeBindingsList=function(a,b,c){var d=this,e=[];v.eachSeries(a,function(a,c){d.denormalizeBindings(a,
b,function(a){e.push(a);c()})},function(){c(e)})};QueryEngine.prototype.copyDenormalizedBindings=function(a,b,c){var d=this,e=[];v.eachSeries(a,function(a,c){var h={},l=w.keys(a);v.eachSeries(l,function(c,e){var l=a[c];if(null==l)h[c]=null,e();else if("object"===typeof l)h[c]=l,e();else{var k=b[l];null!=k?(h[c]=k,e()):d.lexicon.retrieve(l,function(a){b[l]=a;h[c]=a;e()})}},function(){e.push(h);c()})},function(){c(e)})};QueryEngine.prototype.denormalizeBindings=function(a,b,c){var d=w.keys(a),e=b.outCache,
h=this;v.eachSeries(d,function(c,d){var l=a[c];null==l?(a[c]=null,d()):"object"===typeof l?d():null!=e[l]?(a[c]=e[l],d()):h.lexicon.retrieve(l,function(e){a[c]=e;"blank"===e.token&&(b.blanks[e.value]=l);d()})},function(){c(a)})};QueryEngine.prototype.execute=function(a,c,d,e){a=b.normalizeUnicodeLiterals(a);a=this.abstractQueryTree.parseQueryString(a);if(null==a)c(!1,"Error parsing query string");else if("query"===a.token&&"update"==a.kind){this.callbacksBackend.startGraphModification();var h=this;
this.executeUpdate(a,function(a,b){h.lexicon.updateAfterWrite&&h.lexicon.updateAfterWrite();a?(h.callbacksBackend.cancelGraphModification(),c(a,b)):h.callbacksBackend.endGraphModification(function(){c(a,b)})})}else"query"===a.token&&"query"==a.kind&&this.executeQuery(a,c,d,e)};QueryEngine.prototype.executeQuery=function(a,b,c,d){var e=a.units,h=this,k={blanks:{},outCache:{}};this.registerNsInEnvironment(a.prologue,k);var n=h.abstractQueryTree.parseExecutableUnit(e[0]);"select"===n.kind?this.executeSelect(n,
k,c,d,function(a,c){null==a?"object"===typeof c&&!0===c.denorm?b(null,c.bindings):h.denormalizeBindingsList(c,k,function(a){b(null,a)}):b(a)}):"ask"===n.kind?(n.projection=[{token:"variable",kind:"*"}],this.executeSelect(n,k,c,d,function(a,c){null==a?0<c.length?b(null,!0):b(null,!1):b(a)})):"construct"===n.kind&&(n.projection=[{token:"variable",kind:"*"}],h=this,this.executeSelect(n,k,c,d,function(a,c){null==a?h.denormalizeBindingsList(c,k,function(a){if(null!=a){var c=new l.Graph;null==n.template&&
(n.template={triplesContext:n.pattern});for(var d=1,e=[],m=0;m<a.length;m++){for(var t=a[m],u=0;u<e.length;u++)delete e[u].valuetmp;for(u=0;u<n.template.triplesContext.length;u++){for(var v=["subject","predicate","object"],y=n.template.triplesContext[u],w=0;w<v.length;w++){var A=v[w];if("blank"===y[A].token&&(!y[A].valuetmp||null==y[A].valuetmp)){var D="_:b"+d;d++;y[A].valuetmp=D;e.push(y[A])}}v=l.buildRDFResource(y.subject,t,h,k);w=l.buildRDFResource(y.predicate,t,h,k);y=l.buildRDFResource(y.object,
t,h,k);null!=v&&null!=w&&null!=y&&(w=new l.Triple(v,w,y),c.add(w))}}b(null,c)}else b(Error("Error denormalizing bindings."))}):b(a)}))};QueryEngine.prototype.executeSelect=function(a,b,c,d,e){if("select"===a.kind||"ask"===a.kind||"construct"===a.kind||"modify"===a.kind){var h=a.projection,l=a.dataset,k=a.modifier,n=a.limit,m=a.offset,u=a.order,t=this;if(null!=c||null!=d)l.implicit=c||[],l.named=d||[];null!=l.implicit&&0===l.implicit.length&&null!=l.named&&0===l.named.length&&l.implicit.push(this.lexicon.defaultGraphUriTerm);
t.normalizeDatasets(l.implicit.concat(l.named),b,function(){try{t.executeSelectUnit(h,l,a.pattern,b,function(c){if(null!=c){if(null!=a.group&&""===a.group){for(var d=!1,y=0;y<a.projection.length;y++)if(null!=a.projection[y].expression&&"aggregate"===a.projection[y].expression.expressionType){d=!0;break}!0===d&&(a.group="singleGroup")}a.group&&""!=a.group?t.checkGroupSemantics(a.group,h)?t.groupSolution(c,a.group,l,b,function(a){var c=[];v.eachSeries(a,function(a,d){t.aggregateBindings(h,a,l,b,function(a){c.push(a);
d()})},function(){e(null,{bindings:c,denorm:!0})})}):e(Error("Incompatible Group and Projection variables")):t.applyOrderBy(u,c,l,b,function(a){a=t.projectBindings(h,a,l);a=t.applyModifier(k,a);a=t.applyLimitOffset(m,n,a);a=t.removeDefaultGraphBindings(a,l);e(null,a)})}else e(Error("Error executing SELECT query."))})}catch(N){e(N)}})}else e(Error("Cannot execute "+a.kind+" query as a select query"))};QueryEngine.prototype.groupSolution=function(a,b,c,d,e){var l=[],k=[],n=!1,m=this;"singleGroup"===
b?e([a]):v.eachSeries(a,function(a,e){var t=!0;v.eachSeries(b,function(b,e){var k=null;if("var"===b.token)k=b.value,0==n&&l.push(k),e();else if("aliased_expression"===b.token){k=b.alias.value;0==n&&l.push(k);if("var"===b.expression.primaryexpression)a[b.alias.value]=a[b.expression.value.value];else{var u=m.copyDenormalizedBindings([a],d.outCache),u=h.runFilter(b.expression,u[0],m,c,d);h.isEbvError(u)?t=!1:(null!=u.value&&(u.value=""+u.value),a[b.alias.value]=u)}e()}else m.copyDenormalizedBindings([a],
d.outCache,function(c){c=h.runFilter(b,c[0],m,d);h.isEbvError(c)?t=!1:(a["groupCondition"+env._i]=c,k="groupCondition"+env._i,0==n&&l.push(k));e()})},function(){0==n&&(n=!0);!0===t&&k.push(a);e()})},function(){for(var a={},b=0;b<k.length;b++){for(var c=k[b],d="",h=0;h<l.length;h++)var n=c[l[h]],d="object"===typeof n?d+n.value:d+n;null==a[d]?a[d]=[c]:a[d].push(c)}var b=[],m;for(m in a)b.push(a[m]);e(b)})};QueryEngine.prototype.executeSelectUnit=function(a,b,d,e,l){if("BGP"===d.kind)this.executeAndBGP(a,
b,d,e,l);else if("UNION"===d.kind)this.executeUNION(a,b,d.value,e,l);else if("JOIN"===d.kind)this.executeJOIN(a,b,d,e,l);else if("LEFT_JOIN"===d.kind)this.executeLEFT_JOIN(a,b,d,e,l);else if("FILTER"===d.kind){var k=this;this.executeSelectUnit(a,b,d.value,e,function(a){null!=a?h.checkFilters(d,a,!1,b,e,k,l):l([])})}else if("EMPTY_PATTERN"===d.kind)l([]);else{if("ZERO_OR_MORE_PATH"===d.kind||"ONE_OR_MORE_PATH"===d.kind)return this.executeZeroOrMorePath(d,b,e);throw new c(d.kind);}};QueryEngine.prototype.executeZeroOrMorePath=
function(a,c,d){console.log("EXECUTING ZERO OR MORE PATH");var e=[];"var"===a.x.token&&e.push({token:"variable",kind:"var",value:a.x.value});"var"===a.y.token&&e.push({token:"variable",kind:"var",value:a.y.value});0===e.length&&e.push({token:"variable",kind:"*"});if("var"===a.x.token&&"var"===a.y.token){var h=this.executeAndBGP(e,c,a.path,d),l={},e=[],k,n,m,t,v=a.x.value;n=a.x;for(var y=a.path,w=0;w<h.length;w++)if(k=h[w][v],null==l[k]){t=this.lexicon.retrieve(k);a.x=t;a.path=this.abstractQueryTree.replace(y,
n,t,d);y=b.clone(a.path);n=this.executeZeroOrMorePath(a,c,d);for(var x=0;x<n.length;x++)m=n[x],m[v]=k,e.push(m);n=t}return e}if("var"!==a.x.token&&"var"===a.y.token){l={};k=!0;t=[];for(v=[];1==k||0!==t.length;)for(!0===k?(h=this.executeAndBGP(e,c,a.path,d),n=a.x,k=!1):(h=t.pop(),y=this.lexicon.retrieve(h),h=a.path,h=this.abstractQueryTree.replace(h,n,y,d),h=this.executeAndBGP(e,c,h,d),n=y),w=0;w<h.length;w++)y=h[w][a.y.value],!0!==l[y]&&(m={},m[a.y.value]=y,v.push(m),l[y]=!0,t.push(y));return v}throw"Kind of path not supported!";
};QueryEngine.prototype.executeUNION=function(a,b,c,d,l){var k=c[0],n=c[1],m=null,u,y;if(2!=c.length)throw"SPARQL algebra UNION with more than two components";var w=this;v.seq(function(c){try{w.executeSelectUnit(a,b,k,d,function(a){u=a;c()})}catch(N){m=N,c()}},function(c){if(null==m)try{w.executeSelectUnit(a,b,n,d,function(a){y=a;c()})}catch(N){m=N,c()}else c()})(function(){if(null!=m)l(m);else{var a=e.unionBindings(u,y);w.runBinds(c.binds,a,b,d,function(a,e){if(null!=a)throw new t("Error processing bind expressions",
c.binds,a);h.checkFilters(c,e,!1,b,d,w,l)})}})};QueryEngine.prototype.executeAndBGP=function(a,b,c,d,l){var k=this;e.executeAndBGPsDPSize(c.value,b,this,d,function(a){null!=a?k.runBinds(c.binds,a,b,d,function(a,e){if(null!=a)throw new t("Error processing bind expressions",c.binds,a);h.checkFilters(c,e,!1,b,d,k,l)}):l(null)})};QueryEngine.prototype.executeLEFT_JOIN=function(a,b,c,d,l){var k=c.lvalue,n=c.rvalue;if("EMPTY_PATTERN"===k.kind)this.executeSelectUnit(a,b,n,d,l);else{var m=null,u=null,y=null,
w=this,x,A;v.seq(function(c){try{w.executeSelectUnit(a,b,k,d,function(a){m=a;c()})}catch(ea){y=ea,c()}},function(c){if(null!=y)c();else try{w.executeSelectUnit(a,b,n,d,function(a){u=a;c()})}catch(ea){y=ea,c()}})(function(){if(null!=y)l(y);else{var a=e.leftOuterJoinBindings(m,u);w.runBinds(c.binds,a,b,d,function(e,k){if(null!=e)throw new t("Error processing bind expressions",c.binds,e);h.checkFilters(c,a,!0,b,d,w,function(a){if(1<m.length&&1<u.length){var b=[],c={},d;for(d in m[0])c[d]=!0;for(d in u[0])1!=
c[d]&&b.push(d);x=[];A={};for(c=0;c<a.length;c++)if(!0===a[c].__nullify__){for(var e=0;e<b.length;e++)a[c].bindings[b[e]]=null;var e=[],h=[];for(d in a[c].bindings)null!=a[c].bindings[d]&&(e.push(d+a[c].bindings[d]),e.sort(),h.push(e.join("")));if(null==A[e.join("")]){for(e=0;e<h.length;e++)A[h[e]]=!0;x.push(a[c].bindings)}}else for(d in x.push(a[c]),e=[],a[c])e.push(d+a[c][d]),e.sort(),A[e.join("")]=!0;l(x)}else l(a)})})}})}};QueryEngine.prototype.executeJOIN=function(a,b,c,d,l){var k=c.lvalue,n=
c.rvalue,m=null,u=null,y=null,w=this;v.seq(function(c){try{w.executeSelectUnit(a,b,k,d,function(a){m=a;c()})}catch(N){y=N,c()}},function(c){if(null!=y)c();else try{w.executeSelectUnit(a,b,n,d,function(a){u=a;c()})}catch(N){y=N,c()}})(function(){var a=null;if(null!=y)l(y);else if(0===m.length||0===u.length)l([]);else{var a={},v=[],x;for(x in m[0])a[x]=!1;for(x in u[0])!1===a[x]&&v.push(x);a=0==v.length?e.joinBindings(m,u):w.abstractQueryTree.treeWithUnion(k)||w.abstractQueryTree.treeWithUnion(n)?e.joinBindings(m,
u):e.joinBindings2(v,m,u);w.runBinds(c.binds,a,b,d,function(a,e){if(null!=a)throw new t("Error processing bind expressions",c.binds,a);h.checkFilters(c,e,!1,b,d,w,l)})}})};QueryEngine.prototype.rangeQuery=function(b,c,d){var e=this;e.normalizeQuad(b,c,!1,function(b){null!=b?e.backend.range(new a.Pattern(b),function(a){null==a||0==a.length?d([]):d(a)}):d(null)})};QueryEngine.prototype.executeUpdate=function(a,c){var d=a.units,e=this,h={blanks:{},outCache:{}};this.registerNsInEnvironment(a.prologue,
h);for(var l=0;l<d.length;l++){var k=e.abstractQueryTree.parseExecutableUnit(d[l]);if("insertdata"===k.kind){var n=null;v.eachSeries(k.quads,function(a,b){null===n?e._executeQuadInsert(a,h,function(a){null!=a&&(n=a);b()}):b()},function(){null===n?c(null,!0):c(n)})}else if("deletedata"===k.kind)n=null,v.eachSeries(k.quads,function(a,b){null===n?e._executeQuadDelete(a,h,function(a){null!=a&&(n=a);b()}):b()},function(){null===n?c(null,!0):c(n)});else if("modify"===k.kind)this._executeModifyQuery(k,h,
c);else if("create"===k.kind)c(!0);else if("load"===k.kind){var m={uri:b.lexicalFormBaseUri(k.sourceGraph,h)};null!=k.destinyGraph&&(m={uri:b.lexicalFormBaseUri(k.destinyGraph,h)});e=this;this.rdfLoader.load(k.sourceGraph.value,m,function(a,b){a?c(Error("error batch loading quads")):e.batchLoad(b,function(a){null!==a?c(null,a):c(Error("Error batch loading quads"))})})}else if("drop"===k.kind)this._executeClearGraph(k.destinyGraph,h,c);else if("clear"===k.kind)this._executeClearGraph(k.destinyGraph,
h,c);else throw Error("not supported execution unit");}};QueryEngine.prototype.batchLoad=function(b,c){var d=0,e={},h=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();var l=function(a,b,c,d){var l;if(a[b].uri||"uri"===a[b].token){var k=a[b].uri||a[b].value;h.lexicon.registerUri(k,function(e){var l=function(){null!=a[b].uri&&(a[b]={token:"uri",value:a[b].uri},delete a[b].uri);c[b]=e;d()};"graph"===b?h.lexicon.registerGraph(e,k,function(){l()}):l()})}else a[b].literal||"literal"===
a[b].token?h.lexicon.registerLiteral(a[b].literal||a[b].value,function(e){null!=a[b].literal&&(a[b]=h.lexicon.parseLiteral(a[b].literal),delete a[b].literal);c[b]=e;d()}):(l=e[a[b].blank||a[b].value],null==l?h.lexicon.registerBlank(function(h){e[a[b].blank||a[b].value]=h;null==a[b].token&&(a[b].token="blank",a[b].value=a[b].blank,delete a[b].blank);c[b]=h;d()}):(null==a[b].token&&(a[b].token="blank",a[b].value=a[b].blank,delete a[b].blank),c[b]=l,d()))};v.eachSeries(b,function(b,c){var e={};v.eachSeries(["subject",
"predicate","object","graph"],function(a,c){l(b,a,e,c)},function(){var l=b;b=e;var k=new a.NodeKey(b);h.backend.search(k,function(a){a?c():h.backend.index(k,function(a){a&&(h.eventsOnBatchLoad&&h.callbacksBackend.nextGraphModification(m.added,[l,b]),d+=1);c()})})})},function(){null!=h.lexicon.updateAfterWrite&&h.lexicon.updateAfterWrite();var a=function(){c(d)};h.eventsOnBatchLoad?h.callbacksBackend.endGraphModification(a()):a()})};QueryEngine.prototype._executeModifyQuery=function(a,b,c){var d=this,
e=!0,h=Error("Error executing modify query"),l=null,k=["subject","predicate","object","graph"];a.insert=null==a.insert?[]:a.insert;a["delete"]=null==a["delete"]?[]:a["delete"];v.seq(function(c){var k=[],n=[];null!=a["with"]&&k.push(a["with"]);if(null!=a.using)for(var n=[],m=0;m<a.using.length;m++){var t=a.using[m];"named"===t.kind?n.push(t.uri):k.push(t.uri)}a.dataset={};a.projection=[{token:"variable",kind:"*"}];d.executeSelect(a,b,k,n,function(a,k){if(a)return h=a,e=!1,c();d.denormalizeBindingsList(k,
b,function(a){null!=a?l=a:(h=Error("Error denormalizing bindings list"),e=!1);c()})})},function(c){var h=a["with"];if(e){for(var n=[],m=0;m<a["delete"].length;m++)for(var t=a["delete"][m],u=0;u<l.length;u++){for(var w={},y=l[u],x=0;x<k.length;x++){var A=k[x];"graph"==A&&null==t[A]?w.graph=h:w[A]="var"===t[A].token?y[t[A].value]:t[A]}n.push(w)}v.eachSeries(n,function(a,c){d._executeQuadDelete(a,b,function(){c()})},function(){c()})}else c()},function(c){var h=a["with"];if(e){for(var n=[],m=0;m<a.insert.length;m++)for(var t=
a.insert[m],u=0;u<l.length;u++){for(var w={},y=l[u],x=0;x<k.length;x++){var A=k[x];"graph"==A&&null==t[A]?w.graph=h:w[A]="var"===t[A].token?y[t[A].value]:t[A]}n.push(w)}v.eachSeries(n,function(a,c){d._executeQuadInsert(a,b,function(){c()})},function(){c()})}else c()})(function(){e?c(null):c(h)})};QueryEngine.prototype._executeQuadInsert=function(b,c,d){var e=this,h,l=!1,k=null;v.seq(function(a){e.normalizeQuad(b,c,!0,function(b){null!=b?h=b:(l=!0,k="Error normalizing quad.");a()})},function(c){if(!1===
l){var d=new a.NodeKey(h);e.backend.search(d,function(a){!0===a?c():e.backend.index(d,function(){e.callbacksBackend.nextGraphModification(m.added,[b,h]);c()})})}else c()})(function(){l?d(Error(k)):d(null,!0)})};QueryEngine.prototype._executeQuadDelete=function(b,c,d){var e=this,h,l=!1,k,n;v.seq(function(a){e.normalizeQuad(b,c,!0,function(b){null!=b?h=b:(l=!0,k="Error normalizing quad.");a()})},function(b){!1===l?(n=new a.NodeKey(h),e.backend["delete"](n,function(){b()})):b()},function(a){!1===l?e.lexicon.unregister(b,
n,function(){e.callbacksBackend.nextGraphModification(m.deleted,[b,h]);a()}):a()})(function(){l?d(Error(k)):d(null,!0)})};QueryEngine.prototype._executeClearGraph=function(a,c,d){var e=this;"default"===a?this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",d):"named"===a?e.lexicon.registeredGraphs(!0,function(a){if(null!=a){var b=!1;v.eachSeries(a,function(a,c){b?c():e.execute("DELETE { GRAPH <"+a+"> { ?s ?p ?o } } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",function(d,h){d?(b=d,c()):e.lexicon.resolveUri(a,
function(d){-1!=d?e.lexicon.knownGraphs["delete"](d,function(){c()}):(b="Cannot find graph "+a+" to clear it",c())})})},function(){d(!b)})}else d(!1,"Error deleting named graphs")}):"all"===a?(e=this,this.execute("CLEAR DEFAULT",function(a,b){a?d(!1,b):e.execute("CLEAR NAMED",d)})):"uri"==a.token?(a=b.lexicalFormBaseUri(a,c),null!=a?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+a+"> { ?s ?p ?o } } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",function(a){e.callbacksBackend.ongoingModification=
!1;d(a)})):d(!1,"wrong graph URI")):d(!1,"wrong graph URI")};QueryEngine.prototype.checkGroupSemantics=function(a,b){if("singleGroup"===a)return!0;for(var c={},d=0;d<a.length;d++){var e=a[d];"var"===e.token?c[e.value]=!0:"aliased_expression"===e.token&&(c[e.alias.value]=!0)}for(d=0;d<b.length;d++)if(e=b[d],"var"===e.kind){if(null==c[e.value.value])return!1}else if("aliased"===e.kind&&e.expression&&"var"===e.expression.primaryexpression&&null==c[e.expression.value.value])return!1;return!0};QueryEngine.prototype.runBinds=
function(a,b,c,d,e){var l=this;null!=a&&0<a.length?l.copyDenormalizedBindings(b,d.outCache,function(k){for(var n=0;n<b.length;n++)for(var m=0;m<a.length;m++){var t=a[m],u=h.runFilter(t.expression,k[n],l,c,d);h.isEbvError(u)?e(u):b[n][t.as.value]=u}e(null,b)}):e(null,b)};QueryEngine.prototype.computeCosts=function(a,b,c){for(var d=0;d<a.length;d++)a[d]._cost=this.quadCost(a[d],b);c(a)};QueryEngine.prototype.quadCost=function(a,b){return 1};QueryEngine.prototype.registerDefaultNamespace=function(a,
b){this.defaultPrefixes[a]=b};C.exports={QueryEngine:QueryEngine}},{"./abstract_query_tree":40,"./graph_callbacks":43,"./quad_index":51,"./query_filters":53,"./query_plan":54,"./rdf_loader":55,"./rdf_model":56,"./utils":58}],53:[function(x,C,B){var t=x("./utils"),k=x("./utils");QueryFilters={checkFilters:function(c,b,a,e,h,l,d){var m=[];c.filter&&"function"!==typeof c.filter&&(m=c.filter);var t=[];if(null==m||0===m.length||null!=c.length)return d(b);QueryFilters.preprocessExistentialFilters(m,b,l,
e,h,function(c){k.eachSeries(c,function(c,d){QueryFilters.run(c.value,b,a,e,h,l,function(a){for(var c=[],e=0;e<a.length;e++){var h=a[e];null!=h.__nullify__?t.push(h):c.push(h)}b=c;d()})},function(){d(b.concat(t))})})},preprocessExistentialFilters:function(c,b,a,e,h,l){var d=[];k.eachSeries(c,function(c,l){if("builtincall"!==c.value.expressionType||"exists"!==c.value.builtincall&&"notexists"!==c.value.builtincall)if("conditionalor"===c.value.expressionType||"conditionaland"===c.value.expressionType){var m=
t.map(c.value.operands,function(a){return{value:a}});QueryFilters.preprocessExistentialFilters(m,b,a,e,h,function(a){c.value.operands=a.map(function(a){return a.value});d.push(c);l()})}else"multiplicativeexpression"===c.value.expressionType?(m=t.map(c.value.factors,function(a){return{value:a}}),QueryFilters.preprocessExistentialFilters(m,b,a,e,h,function(a){c.value.factors=a.map(function(a){return a.value});d.push(c);l()})):"additiveexpression"===c.value.expressionType?(m=t.map(c.value.summands,function(a){return{value:a}}),
QueryFilters.preprocessExistentialFilters(m,b,a,e,h,function(a){c.value.summands=a.map(function(a){return a.value});d.push(c);l()})):"relationalexpression"===c.value.expressionType?(m=[{value:c.value.op1},{value:c.value.op2}],QueryFilters.preprocessExistentialFilters(m,b,a,e,h,function(a){c.value.op1=a[0].value;c.value.op2=a[1].value;d.push(c);l()})):"irireforfunction"===c.value.expressionType||"custom"===c.value.expressionType?null!=c.value.args?(m=t.map(c.value.args,function(a){return{value:a}}),
QueryFilters.preprocessExistentialFilters(m,b,a,e,h,function(a){c.value.args=a.map(function(a){return a.value});d.push(c);l()})):(d.push(c),l()):(d.push(c),l());else{var n=c.value.builtincall,v=c.value.args,x={};a.copyDenormalizedBindings(b,h.outCache,function(b){k.eachSeries(b,function(b,c){var d=t.clone(v[0],!0),d=a.abstractQueryTree.parseSelect({pattern:d},b),d=a.abstractQueryTree.bind(d.pattern,b);a.executeSelectUnit([{kind:"*"}],e,d,h,function(a){a="exists"===n?QueryFilters.ebvBoolean(0!==a.length):
QueryFilters.ebvBoolean(0===a.length);var d=[],e;for(e in b)d.push(JSON.stringify(b[e]));d=d.sort().join("");x[d]=a;c()})},function(){c.value.origArgs=c.value.args;c.value.args=x;d.push(c);l()})})}},function(){l(d)})},boundVars:function(c){if(null!=c.expressionType){var b=c.expressionType;if("relationalexpression"==b)return b=c.op2,QueryFilters.boundVars(c.op1)+QueryFilters.boundVars(b);if("conditionalor"==b||"conditionaland"==b){for(var a=[],b=0;b<c.operands;b++)a=a.concat(QueryFilters.boundVars(c.operands[b]));
return a}if("builtincall"==b){if(null==c.args)return[];a=[];for(b=0;b<c.args.length;b++)a=a.concat(QueryFilters.boundVars(c.args[b]));return a}if("multiplicativeexpression"==b){a=QueryFilters.boundVars(c.factor);for(b=0;b<c.factors.length;b++)a=a.concat(QueryFilters.boundVars(c.factors[b].expression));return a}if("additiveexpression"==b){a=QueryFilters.boundVars(c.summand);for(b=0;b<c.summands.length;b++)a=a.concat(QueryFilters.boundVars(c.summands[b].expression));return a}if("regex"==b)return a=
QueryFilters.boundVars(c.expression1),a.concat(QueryFilters.boundVars(c.expression2));if("unaryexpression"==b)return QueryFilters.boundVars(c.expression);if("atomic"==b)return"var"==c.primaryexpression?[c.value]:[]}else throw"Cannot find bound expressions in a no expression token";},run:function(c,b,a,e,h,l,d){l.copyDenormalizedBindings(b,h.outCache,function(k){for(var m=[],t=0;t<b.length;t++){var n=QueryFilters.runFilter(c,k[t],l,e,h),n=QueryFilters.ebv(n);QueryFilters.isEbvError(n)?a&&(n={__nullify__:!0,
bindings:b[t]},m.push(n)):!0===n?m.push(b[t]):a&&(n={__nullify__:!0,bindings:b[t]},m.push(n))}d(m)})},collect:function(c,b,a,e,h,l){h.copyDenormalizedBindings(b,e.outCache,function(d){for(var k=[],t=0;t<d.length;t++){var w=QueryFilters.runFilter(c,d[t],h,a,e);k.push({binding:b[t],value:w})}return l(k)})},runDistinct:function(c,b){},runAggregator:function(c,b,a,e,h){if(null==b||0===b.length)return QueryFilters.ebvError();if("variable"===c.token&&"var"==c.kind)return b[0][c.value.value];if("variable"===
c.token&&"aliased"===c.kind){if("atomic"===c.expression.expressionType&&"var"===c.expression.primaryexpression)return b[0][c.expression.value.value];if("aggregate"===c.expression.expressionType){if("max"===c.expression.aggregateType){for(var l=null,d=0;d<b.length;d++){var k=b[d],k=QueryFilters.runFilter(c.expression.expression,k,a,e,h);QueryFilters.isEbvError(k)||(null===l?l=k:!0===QueryFilters.runLtFunction(l,k).value&&(l=k))}return null===l?QueryFilters.ebvError():l}if("min"===c.expression.aggregateType){l=
null;for(d=0;d<b.length;d++)k=b[d],k=QueryFilters.runFilter(c.expression.expression,k,a,e,h),QueryFilters.isEbvError(k)||(null===l?l=k:!0===QueryFilters.runGtFunction(l,k).value&&(l=k));return null===l?QueryFilters.ebvError():l}if("count"===c.expression.aggregateType){var l={},v=0;if("*"===c.expression.expression)if(null!=c.expression.distinct&&""!=c.expression.distinct)for(d=0;d<b.length;d++){var k=b[d],w=t.hashTerm(k);null==l[w]&&(l[w]=!0,v++)}else v=b.length;else for(d=0;d<b.length;d++)k=b[d],
k=QueryFilters.runFilter(c.expression.expression,k,a,e,h),QueryFilters.isEbvError(k)||(null!=c.expression.distinct&&""!=c.expression.distinct?(w=t.hashTerm(k),null==l[w]&&(l[w]=!0,v++)):v++);return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+v}}if("avg"===c.expression.aggregateType){for(var l={},n={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"},d=v=0;d<b.length;d++)k=b[d],k=QueryFilters.runFilter(c.expression.expression,k,a,e,h),QueryFilters.isEbvError(k)||
(null!=c.expression.distinct&&""!=c.expression.distinct?(w=t.hashTerm(k),null==l[w]&&(l[w]=!0,QueryFilters.isNumeric(k)&&(n=QueryFilters.runSumFunction(n,k),v++))):QueryFilters.isNumeric(k)&&(n=QueryFilters.runSumFunction(n,k),v++));c=QueryFilters.runDivFunction(n,{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+v});c.value=""+c.value;return c}if("sum"===c.expression.aggregateType){l={};n={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"};for(d=0;d<
b.length;d++)k=b[d],k=QueryFilters.runFilter(c.expression.expression,k,a,e,h),QueryFilters.isEbvError(k)||(null!=c.expression.distinct&&""!=c.expression.distinct?(w=t.hashTerm(k),null==l[w]&&(l[w]=!0,QueryFilters.isNumeric(k)&&(n=QueryFilters.runSumFunction(n,k)))):QueryFilters.isNumeric(k)&&(n=QueryFilters.runSumFunction(n,k)));n.value=""+n.value;return n}return k=QueryFilters.runFilter(aggregate.expression,b[0],e,{blanks:{},outCache:{}})}}},runFilter:function(c,b,a,e,h){if(null!=c.expressionType){var l=
c.expressionType;if("relationalexpression"==l){var l=QueryFilters.runFilter(c.op1,b,a,e,h),d=QueryFilters.runFilter(c.op2,b,a,e,h);return QueryFilters.runRelationalFilter(c,l,d,b,a,e,h)}if("conditionalor"==l)return QueryFilters.runOrFunction(c,b,a,e,h);if("conditionaland"==l)return QueryFilters.runAndFunction(c,b,a,e,h);if("additiveexpression"==l)return QueryFilters.runAddition(c.summand,c.summands,b,a,e,h);if("builtincall"==l)return QueryFilters.runBuiltInCall(c.builtincall,c.args,b,a,e,h);if("multiplicativeexpression"==
l)return QueryFilters.runMultiplication(c.factor,c.factors,b,a,e,h);if("unaryexpression"==l)return QueryFilters.runUnaryExpression(c.unaryexpression,c.expression,b,a,e,h);if("irireforfunction"==l)return QueryFilters.runIriRefOrFunction(c.iriref,c.args,b,a,e,h);if("regex"==l)return QueryFilters.runRegex(c.text,c.pattern,c.flags,b,a,e,h);if("custom"==l)return QueryFilters.runBuiltInCall(c.name,c.args,b,a,e,h);if("atomic"==l){if("var"==c.primaryexpression)return b[c.value.value];"object"==typeof c.value&&
null!=c.value.type&&"object"==typeof c.value.type&&(c.value.type=t.lexicalFormBaseUri(c.value.type,h));return c.value}throw"Unknown filter expression type";}throw"Cannot find bound expressions in a no expression token";},isRDFTerm:function(c){return null==c?!1:c.token&&"literal"==c.token||c.token&&"uri"==c.token||c.token&&"blank"==c.token?!0:!1},RDFTermEquality:function(c,b,a,e){return"literal"===c.token&&"literal"===b.token?c.lang==b.lang&&c.type==b.type&&c.value==b.value?!0:null!=c.type&&null!=
b.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(c)&&null!=b.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(b)&&null!=c.type?QueryFilters.ebvError():!1:"uri"===c.token&&"uri"===b.token?t.lexicalFormBaseUri(c,e)==t.lexicalFormBaseUri(b,e):"blank"===c.token&&"blank"===b.token?c.value==b.value:!1},isInteger:function(c){return null==c?!1:"literal"===c.token?"http://www.w3.org/2001/XMLSchema#integer"==c.type||"http://www.w3.org/2001/XMLSchema#decimal"==c.type||"http://www.w3.org/2001/XMLSchema#double"==
c.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==c.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#long"==c.type||"http://www.w3.org/2001/XMLSchema#int"==c.type||"http://www.w3.org/2001/XMLSchema#short"==c.type||"http://www.w3.org/2001/XMLSchema#byte"==c.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==c.type||
"http://www.w3.org/2001/XMLSchema#unsignedShort"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==c.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==c.type?!0:!1:!1},isFloat:function(c){return null==c?!1:"literal"===c.token?"http://www.w3.org/2001/XMLSchema#float"==c.type?!0:!1:!1},isDecimal:function(c){return null==c?!1:"literal"===c.token?"http://www.w3.org/2001/XMLSchema#decimal"==c.type?!0:!1:!1},isDouble:function(c){return null==c?!1:"literal"===c.token?"http://www.w3.org/2001/XMLSchema#double"==
c.type?!0:!1:!1},isNumeric:function(c){return null==c?!1:"literal"===c.token?"http://www.w3.org/2001/XMLSchema#integer"==c.type||"http://www.w3.org/2001/XMLSchema#decimal"==c.type||"http://www.w3.org/2001/XMLSchema#float"==c.type||"http://www.w3.org/2001/XMLSchema#double"==c.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==c.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#long"==c.type||"http://www.w3.org/2001/XMLSchema#int"==c.type||
"http://www.w3.org/2001/XMLSchema#short"==c.type||"http://www.w3.org/2001/XMLSchema#byte"==c.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==c.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==c.type?!0:!1:!1},isSimpleLiteral:function(c){return c&&"literal"==
c.token?null==c.type&&null==c.lang?!0:!1:!1},isXsdType:function(c,b){return b&&"literal"==b.token?b.type=="http://www.w3.org/2001/XMLSchema#"+c:!1},ebv:function(c){if(null==c||QueryFilters.isEbvError(c))return QueryFilters.ebvError();if(c.token&&"literal"===c.token){if("http://www.w3.org/2001/XMLSchema#integer"==c.type||"http://www.w3.org/2001/XMLSchema#decimal"==c.type||"http://www.w3.org/2001/XMLSchema#double"==c.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==c.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==
c.type||"http://www.w3.org/2001/XMLSchema#long"==c.type||"http://www.w3.org/2001/XMLSchema#int"==c.type||"http://www.w3.org/2001/XMLSchema#short"==c.type||"http://www.w3.org/2001/XMLSchema#byte"==c.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==c.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==
c.type){var b=parseFloat(c.value);return isNaN(b)?!1:0!=parseFloat(c.value)}return"http://www.w3.org/2001/XMLSchema#boolean"===c.type?"true"===c.value||!0===c.value||"True"===c.value:"http://www.w3.org/2001/XMLSchema#string"===c.type?""!=c.value:"http://www.w3.org/2001/XMLSchema#dateTime"===c.type?!0:QueryFilters.isEbvError(c)?c:null==c.type?""!=c.value?!0:!1:QueryFilters.ebvError()}return!0===c.value}};QueryFilters.effectiveBooleanValue=QueryFilters.ebv;QueryFilters.ebvTrue=function(){return{token:"literal",
type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}};QueryFilters.ebvFalse=function(){return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}};QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}};QueryFilters.isEbvError=function(c){return"object"==typeof c&&null!=c?"https://github.com/antoniogarrote/js-tools/types#error"===c.type:!1};QueryFilters.ebvBoolean=function(c){return QueryFilters.isEbvError(c)?
c:!0===c?QueryFilters.ebvTrue():QueryFilters.ebvFalse()};QueryFilters.runRelationalFilter=function(c,b,a,e,h,l,d){c=c.operator;if("="===c)return QueryFilters.runEqualityFunction(b,a,e,h,l,d);if("!="===c)return b=QueryFilters.runEqualityFunction(b,a,e,h,l,d),QueryFilters.isEbvError(b)||(b.value=!b.value),b;if("<"===c)return QueryFilters.runLtFunction(b,a,e);if(">"===c)return QueryFilters.runGtFunction(b,a,e);if("<="===c)return QueryFilters.runLtEqFunction(b,a,e);if(">="===c)return QueryFilters.runGtEqFunction(b,
a,e);throw"Error applying relational filter, unknown operator";};QueryFilters.effectiveTypeValue=function(c){if("literal"==c.token){if("http://www.w3.org/2001/XMLSchema#integer"==c.type)return c=parseInt(c.value);if("http://www.w3.org/2001/XMLSchema#decimal"==c.type||"http://www.w3.org/2001/XMLSchema#float"==c.type||"http://www.w3.org/2001/XMLSchema#double"==c.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==c.type)return c=parseFloat(c.value);if("http://www.w3.org/2001/XMLSchema#negativeInteger"==
c.type||"http://www.w3.org/2001/XMLSchema#long"==c.type||"http://www.w3.org/2001/XMLSchema#int"==c.type||"http://www.w3.org/2001/XMLSchema#short"==c.type||"http://www.w3.org/2001/XMLSchema#byte"==c.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==c.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==
c.type)return c=parseInt(c.value);if("http://www.w3.org/2001/XMLSchema#date"==c.type||"http://www.w3.org/2001/XMLSchema#dateTime"==c.type)try{return t.parseISO8601(c.value)}catch(b){return null}else return"http://www.w3.org/2001/XMLSchema#boolean"==c.type?!0===c.value||"true"===c.value||"1"===c.value||1===c.value||!0===c.value?!0:!1===c.value||"false"===c.value||"0"===c.value||0===c.value||!1===c.value?!1:void 0:"http://www.w3.org/2001/XMLSchema#string"==c.type?null===c.value||void 0===c.value?void 0:
""+c.value:c.value}else throw console.log("not implemented yet"),console.log(c),"value not supported in operations yet";};QueryFilters.runOrFunction=function(c,b,a,e,h){for(var l=null,d=0;d<c.operands.length;d++){var k=QueryFilters.runFilter(c.operands[d],b,a,e,h);0==QueryFilters.isEbvError(k)&&(k=QueryFilters.ebv(k));null==l?l=k:QueryFilters.isEbvError(k)?l=QueryFilters.isEbvError(l)?QueryFilters.ebvError():!0===l?!0:QueryFilters.ebvError():!0===k?l=!0:QueryFilters.isEbvError(l)&&(l=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(l)};
QueryFilters.runAndFunction=function(c,b,a,e,h){for(var k=null,d=0;d<c.operands.length;d++){var m=QueryFilters.runFilter(c.operands[d],b,a,e,h);0==QueryFilters.isEbvError(m)&&(m=QueryFilters.ebv(m));null==k?k=m:QueryFilters.isEbvError(m)?k=QueryFilters.isEbvError(k)?QueryFilters.ebvError():!0===k?QueryFilters.ebvError():!1:!0===m?QueryFilters.isEbvError(k)&&(k=QueryFilters.ebvError()):k=!1}return QueryFilters.ebvBoolean(k)};QueryFilters.runEqualityFunction=function(c,b,a,e,h,k){if(QueryFilters.isEbvError(c)||
QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(c)&&QueryFilters.isNumeric(b))return a=QueryFilters.effectiveTypeValue(c),h=QueryFilters.effectiveTypeValue(b),isNaN(a)||isNaN(h)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(c,b,e,k)):QueryFilters.ebvBoolean(a==h);if((QueryFilters.isSimpleLiteral(c)||QueryFilters.isXsdType("string",c))&&(QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",b))||QueryFilters.isXsdType("boolean",c)&&QueryFilters.isXsdType("boolean",
b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(c)==QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",c)||QueryFilters.isXsdType("date",c))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",c)&&QueryFilters.isXsdType("date",b)||QueryFilters.isXsdType("date",c)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();c=t.compareDateComponents(c.value,b.value);return null!=c?0==c?QueryFilters.ebvTrue():
QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(c)&&QueryFilters.isRDFTerm(b)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(c,b,e,k)):QueryFilters.ebvFalse()};QueryFilters.runGtFunction=function(c,b,a){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(c)&&QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(c)&&QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",c)&&QueryFilters.isXsdType("string",
b)||QueryFilters.isXsdType("boolean",c)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(c)>QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",c)||QueryFilters.isXsdType("date",c))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",c)&&QueryFilters.isXsdType("date",b)||QueryFilters.isXsdType("date",c)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();
c=t.compareDateComponents(c.value,b.value);return null!=c?1==c?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()};QueryFilters.runTotalGtFunction=function(c,b){return QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b)?QueryFilters.ebvError():QueryFilters.isNumeric(c)&&QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(c)&&QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",c)&&QueryFilters.isSimpleLiteral("string",b)||QueryFilters.isXsdType("boolean",
c)&&QueryFilters.isSimpleLiteral("boolean",b)||QueryFilters.isXsdType("dateTime",c)&&QueryFilters.isSimpleLiteral("dateTime",b)?QueryFilters.runGtFunction(c,b,[]):c.token&&"uri"===c.token&&b.token&&"uri"===b.token?QueryFilters.ebvBoolean(c.value>b.value):c.token&&"literal"===c.token&&b.token&&"literal"===b.token?QueryFilters.ebvBoolean(""+c.value+c.type+c.lang>""+b.value+b.type+b.lang):c.token&&"blank"===c.token&&b.token&&"blank"===b.token?QueryFilters.ebvBoolean(c.value>b.value):c.value&&b.value?
QueryFilters.ebvBoolean(c.value>b.value):QueryFilters.ebvTrue()};QueryFilters.runLtFunction=function(c,b,a){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(c)&&QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(c)&&QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",c)&&QueryFilters.isXsdType("string",b)||QueryFilters.isXsdType("boolean",c)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(c)<
QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",c)||QueryFilters.isXsdType("date",c))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",c)&&QueryFilters.isXsdType("date",b)||QueryFilters.isXsdType("date",c)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();c=t.compareDateComponents(c.value,b.value);return null!=c?-1==c?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()};
QueryFilters.runGtEqFunction=function(c,b,a){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(c)&&QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(c)&&QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",c)&&QueryFilters.isXsdType("string",b)||QueryFilters.isXsdType("boolean",c)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(c)>=QueryFilters.effectiveTypeValue(b));
if((QueryFilters.isXsdType("dateTime",c)||QueryFilters.isXsdType("date",c))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",c)&&QueryFilters.isXsdType("date",b)||QueryFilters.isXsdType("date",c)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();c=t.compareDateComponents(c.value,b.value);return null!=c?-1!=c?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()};QueryFilters.runLtEqFunction=
function(c,b,a){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(c)&&QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(c)&&QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",c)&&QueryFilters.isXsdType("string",b)||QueryFilters.isXsdType("boolean",c)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(c)<=QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",
c)||QueryFilters.isXsdType("date",c))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",c)&&QueryFilters.isXsdType("date",b)||QueryFilters.isXsdType("date",c)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();c=t.compareDateComponents(c.value,b.value);return null!=c?1!=c?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()};QueryFilters.runAddition=function(c,b,a,e,h,k){var d=
QueryFilters.runFilter(c,a,e,h,k);if(QueryFilters.isEbvError(d))return QueryFilters.ebvError();c=d;if(QueryFilters.isNumeric(d)){for(d=0;d<b.length;d++){var l=QueryFilters.runFilter(b[d].expression,a,e,h,k);if(QueryFilters.isNumeric(l))"+"===b[d].operator?c=QueryFilters.runSumFunction(c,l):"-"===b[d].operator&&(c=QueryFilters.runSubFunction(c,l));else return QueryFilters.ebvFalse()}return c}return QueryFilters.ebvFalse()};QueryFilters.runSumFunction=function(c,b){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();
var a=QueryFilters.effectiveTypeValue(c)+QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(c)||QueryFilters.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:a}:QueryFilters.isFloat(c)||QueryFilters.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:a}:QueryFilters.isDecimal(c)||QueryFilters.isDecimal(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:a}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",
value:a}};QueryFilters.runSubFunction=function(c,b){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var a=QueryFilters.effectiveTypeValue(c)-QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(c)||QueryFilters.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:a}:QueryFilters.isFloat(c)||QueryFilters.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:a}:QueryFilters.isDecimal(c)||QueryFilters.isDecimal(b)?
{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:a}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:a}};QueryFilters.runMultiplication=function(c,b,a,e,h,k){c=QueryFilters.runFilter(c,a,e,h,k);if(QueryFilters.isEbvError(c))return c;var d=c;if(QueryFilters.isNumeric(c)){for(var l=0;l<b.length;l++){var t=QueryFilters.runFilter(b[l].expression,a,e,h,k);if(QueryFilters.isEbvError(t))return c;if(QueryFilters.isNumeric(t))"*"===b[l].operator?d=QueryFilters.runMulFunction(d,
t):"/"===b[l].operator&&(d=QueryFilters.runDivFunction(d,t));else return QueryFilters.ebvFalse()}return d}return QueryFilters.ebvFalse()};QueryFilters.runMulFunction=function(c,b){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var a=QueryFilters.effectiveTypeValue(c)*QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(c)||QueryFilters.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:a}:QueryFilters.isFloat(c)||
QueryFilters.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:a}:QueryFilters.isDecimal(c)||QueryFilters.isDecimal(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:a}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:a}};QueryFilters.runDivFunction=function(c,b){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var a=QueryFilters.effectiveTypeValue(c)/QueryFilters.effectiveTypeValue(b);
return QueryFilters.isDouble(c)||QueryFilters.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:a}:QueryFilters.isFloat(c)||QueryFilters.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:a}:QueryFilters.isDecimal(c)||QueryFilters.isDecimal(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:a}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:a}};QueryFilters.runBuiltInCall=function(c,b,a,e,h,
k){if("notexists"===c||"exists"===c){c=[];for(var d in a)c.push(JSON.stringify(a[d]));c=c.sort().join("");return b[c]}d=[];for(var l=0;l<b.length;l++)if("var"===b[l].token)d.push(b[l]);else{var t=QueryFilters.runFilter(b[l],a,e,h,k);if(QueryFilters.isEbvError(t))return t;d.push(t)}if("str"===c)return"literal"===d[0].token?{token:"literal",type:null,value:""+d[0].value}:"uri"===d[0].token?{token:"literal",type:null,value:d[0].value}:QueryFilters.ebvFalse();if("lang"===c)return"literal"===d[0].token?
null!=d[0].lang?{token:"literal",value:""+d[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===c)return"literal"===d[0].token?(a=d[0],null!=a.type?"string"===typeof a.type?{token:"uri",value:a.type,prefix:null,suffix:null}:a.type:null==a.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()):QueryFilters.ebvError();if("isliteral"===c)return"literal"===d[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===
c)return"blank"===d[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===c||"isiri"===c)return"uri"===d[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===c)return a=QueryFilters.RDFTermEquality(d[0],d[1],e,k),QueryFilters.isEbvError(a)&&(a=!1),QueryFilters.ebvBoolean(a);if("langmatches"===c)return a=d[0],b=d[1],"literal"===a.token&&"literal"===b.token?"*"===b.value&&""!=a.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===a.value.toLowerCase().indexOf(b.value.toLowerCase())):
QueryFilters.ebvError();if("bound"===c)return b=d[0].value,null==b?QueryFilters.ebvError():null!=a[b]?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if(null!=e.customFns[c])return e.customFns[c](QueryFilters,d);throw"Builtin call "+c+" not implemented yet";};QueryFilters.runUnaryExpression=function(c,b,a,e,h,k){b=QueryFilters.runFilter(b,a,e,h,k);if(QueryFilters.isEbvError(b))return b;if("!"===c){var d=QueryFilters.ebv(b);return QueryFilters.isEbvError(d)?QueryFilters.ebvFalse():QueryFilters.ebvBoolean(!d)}if("+"===
c)return QueryFilters.isNumeric(b)?b:QueryFilters.ebvError();if("-"===c){if(QueryFilters.isNumeric(b)){c={};for(d in b)c[d]=b[d];c.value=-c.value;return c}return QueryFilters.ebvError()}};QueryFilters.runRegex=function(c,b,a,e,h,k,d){if(null!=c)c=QueryFilters.runFilter(c,e,h,k,d);else return QueryFilters.ebvError();if(null!=b)b=QueryFilters.runFilter(b,e,h,k,d);else return QueryFilters.ebvError();null!=a&&(a=QueryFilters.runFilter(a,e,h,k,d));if(null==b||"literal"!==b.token||null!=a&&"literal"!==
a.token)return QueryFilters.ebvError();b=b.value;a=null==a?null:a.value;if(null!=c&&"var"==c.token)if(null!=e[c.value])c=e[c.value];else return QueryFilters.ebvError();else if(null!=c&&"literal"===c.token)if(null==c.type||QueryFilters.isXsdType("string",c))c=c.value;else return QueryFilters.ebvError();else return QueryFilters.ebvError();return(null==a?new RegExp(b):new RegExp(b,a.toLowerCase())).exec(c)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()};QueryFilters.normalizeLiteralDatatype=function(c,
b,a){null!=c.value.type&&"object"==typeof c.value.type&&(c.value.type=t.lexicalFormBaseUri(c.value.type,a));return c};QueryFilters.runIriRefOrFunction=function(c,b,a,e,h,k){if(null==b)return c;for(var d=[],l=0;l<b.length;l++)d.push(QueryFilters.runFilter(b[l],a,e,h,k));c=t.lexicalFormBaseUri(c,k);if("http://www.w3.org/2001/XMLSchema#integer"==c||"http://www.w3.org/2001/XMLSchema#decimal"==c||"http://www.w3.org/2001/XMLSchema#double"==c||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==c||"http://www.w3.org/2001/XMLSchema#negativeInteger"==
c||"http://www.w3.org/2001/XMLSchema#long"==c||"http://www.w3.org/2001/XMLSchema#int"==c||"http://www.w3.org/2001/XMLSchema#short"==c||"http://www.w3.org/2001/XMLSchema#byte"==c||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==c||"http://www.w3.org/2001/XMLSchema#unsignedLong"==c||"http://www.w3.org/2001/XMLSchema#unsignedInt"==c||"http://www.w3.org/2001/XMLSchema#unsignedShort"==c||"http://www.w3.org/2001/XMLSchema#unsignedByte"==c||"http://www.w3.org/2001/XMLSchema#positiveInteger"==c)if(d=
d[0],"literal"===d.token){d=QueryFilters.normalizeLiteralDatatype(d,e,k);if("http://www.w3.org/2001/XMLSchema#integer"==d.type||"http://www.w3.org/2001/XMLSchema#decimal"==d.type||"http://www.w3.org/2001/XMLSchema#double"==d.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==d.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==d.type||"http://www.w3.org/2001/XMLSchema#long"==d.type||"http://www.w3.org/2001/XMLSchema#int"==d.type||"http://www.w3.org/2001/XMLSchema#short"==d.type||
"http://www.w3.org/2001/XMLSchema#byte"==d.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==d.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==d.type)return d.type=c,d;if("http://www.w3.org/2001/XMLSchema#boolean"==d.type)return 1==QueryFilters.ebv(d)?
(d.type=c,d.value=1):(d.type=c,d.value=0),d;if("http://www.w3.org/2001/XMLSchema#float"==d.type||"http://www.w3.org/2001/XMLSchema#double"==d.type)return d.type=c,d.value=parseInt(d.value),d;if("http://www.w3.org/2001/XMLSchema#string"==d.type||null==d.type){if(2<d.value.split(".").length||2<d.value.split("-").length||2<d.value.split("/").length||2<d.value.split("+").length||"http://www.w3.org/2001/XMLSchema#decimal"==c&&(-1!=d.value.indexOf("e")||-1!=d.value.indexOf("E")))return QueryFilters.ebvError();
if("http://www.w3.org/2001/XMLSchema#int"==c||"http://www.w3.org/2001/XMLSchema#integer"==c)if(-1!=d.value.indexOf("e")||-1!=d.value.indexOf("E")||-1!=d.value.indexOf("."))return QueryFilters.ebvError();try{d.value=parseInt(parseFloat(d.value));if(isNaN(d.value))return QueryFilters.ebvError();d.type=c;return d}catch(v){return QueryFilters.ebvError()}}else return QueryFilters.ebvError()}else return QueryFilters.ebvError();else{if("http://www.w3.org/2001/XMLSchema#boolean"==c)return d=d[0],"literal"===
d.token&&null==d.type?"true"===d.value||"1"===d.value?QueryFilters.ebvTrue():"false"===d.value||"0"===d.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===d.token?QueryFilters.isEbvError(d)?d:QueryFilters.ebvBoolean(d):QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#string"==c)return d=d[0],"literal"===d.token?(d=QueryFilters.normalizeLiteralDatatype(d,e,k),"http://www.w3.org/2001/XMLSchema#integer"==d.type||"http://www.w3.org/2001/XMLSchema#decimal"==d.type||"http://www.w3.org/2001/XMLSchema#double"==
d.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==d.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==d.type||"http://www.w3.org/2001/XMLSchema#long"==d.type||"http://www.w3.org/2001/XMLSchema#int"==d.type||"http://www.w3.org/2001/XMLSchema#short"==d.type||"http://www.w3.org/2001/XMLSchema#byte"==d.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==d.type||
"http://www.w3.org/2001/XMLSchema#unsignedShort"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==d.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==d.type||"http://www.w3.org/2001/XMLSchema#float"==d.type?(d.type=c,d.value=""+d.value,d):"http://www.w3.org/2001/XMLSchema#string"==d.type?d:"http://www.w3.org/2001/XMLSchema#boolean"==d.type?(QueryFilters.ebv(d)?(d.type=c,d.value="true"):(d.type=c,d.value="false"),d):"http://www.w3.org/2001/XMLSchema#dateTime"==d.type||"http://www.w3.org/2001/XMLSchema#date"==
d.type?(d.type=c,"string"!=typeof d.value&&(d.value=t.iso8601(d.value)),d):null==d.type?(d.value=""+d.value,d.type=c,d):QueryFilters.ebvError()):"uri"===d.token?{token:"literal",value:t.lexicalFormBaseUri(d,k),type:c,lang:null}:QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#dateTime"==c||"http://www.w3.org/2001/XMLSchema#date"==c){d=d[0];if("http://www.w3.org/2001/XMLSchema#dateTime"==d.type||"http://www.w3.org/2001/XMLSchema#date"==d.type)return d;if("http://www.w3.org/2001/XMLSchema#string"==
d.type||null==d.type)try{return d.value=t.iso8601(t.parseISO8601(d.value)),d.type=c,d}catch(v){return QueryFilters.ebvError()}else return QueryFilters.ebvError()}else if("http://www.w3.org/2001/XMLSchema#float"==c)if(d=d[0],"literal"===d.token){d=QueryFilters.normalizeLiteralDatatype(d,e,k);if("http://www.w3.org/2001/XMLSchema#decimal"==d.type||"http://www.w3.org/2001/XMLSchema#int"==d.type)return d.type=c,d.value=parseFloat(d.value),d;if("http://www.w3.org/2001/XMLSchema#boolean"==d.type)return 1==
QueryFilters.ebv(d)?(d.type=c,d.value=1):(d.type=c,d.value=0),d;if("http://www.w3.org/2001/XMLSchema#float"==d.type||"http://www.w3.org/2001/XMLSchema#double"==d.type)return d.type=c,d.value=parseFloat(d.value),d;if("http://www.w3.org/2001/XMLSchema#string"==d.type)try{d.value=parseFloat(d.value);if(isNaN(d.value))return QueryFilters.ebvError();d.type=c;return d}catch(v){return QueryFilters.ebvError()}else if(null==d.type){if(2<d.value.split(".").length||2<d.value.split("-").length||2<d.value.split("/").length||
2<d.value.split("+").length)return QueryFilters.ebvError();try{d.value=parseFloat(d.value);if(isNaN(d.value))return QueryFilters.ebvError();d.type=c;return d}catch(v){return QueryFilters.ebvError()}}else return QueryFilters.ebvError()}else return QueryFilters.ebvError();else return null!=e.customFns[c]?e.customFns[c](QueryFilters,d):QueryFilters.ebvError()}};C.exports={QueryFilters:QueryFilters}},{"./utils":58}],54:[function(x,C,B){var t=x("./utils"),k=x("./utils"),c={variablesInBGP:function(b){var a=
b.variables;if(a)return a;var c=b.value||b,a=[],h;for(h in c)c[h]&&"var"===c[h].token?a.push(c[h].value):c[h]&&"blank"===c[h].token&&a.push("blank:"+c[h].value);return b.variables=a},connected:function(b,a){for(var c="/"+b.vars.join("/")+"/",h=0;h<a.vars.length;h++)if(-1!=c.indexOf("/"+a.vars[h]+"/"))return!0;return!1},variablesIntersectionBGP:function(b,a){for(var e=c.variablesInBGP(b),h=c.variablesInBGP(a),k={},d=0;d<e.lenght;d++)k[e[d]]=1;for(d=0;d<h.length;d++)e=k[h[d]]||0,e++,k[h[d]]=e;var h=
[],m;for(m in k)2==k[m]&&h.push(k[m]);return h},executeAndBGPsGroups:function(b){for(var a={},e={},h=0,k=function(a,b){for(var c=0;c<a.length;c++)if(-1!=b.indexOf("/"+a[c]+"/"))return!0;return!1},d=function(b,c,d,h){var k=[],l="",n="",m;for(m in c)l+=m,k=k.concat(a[m]),n+=e[m];n=n+y.join("/")+"/";k.push(b);d[l]=k;h[l]=n},m=0;m<b.length;m++){var v=b[m],w={},n={},y=c.variablesInBGP(v),x={},u;for(u in e)k(y,e[u])?x[u]=!0:(w[u]=a[u],n[u]=e[u]);0===t.size(x)?(w["g"+h]=[v],n["g"+h]="/"+y.join("/")+"/",
h++):d(v,x,w,n);a=w;e=n}return t.values(a)},intersectionSize:function(b,a){for(var c=a.i.split("_"),h=0;h<c.length;h++)if(""!=c[h]&&-1!=b.i.indexOf("_"+c[h]+"_"))return 1;return 0},createJoinTree:function(b,a){for(var c="/"+b.vars.join("/")+"/",h=b.vars.concat([]),k=[],d=0;d<a.vars.length;d++)-1!=c.indexOf("/"+a.vars[d]+"/")?0==a.vars[d].indexOf("_:")?k.push("blank:"+a.vars[d]):k.push(a.vars[d]):h.push(a.vars[d]);for(var c=a.i.split("_"),m=b.i.split("_"),v={},d=0;d<c.length;d++)""!=c[d]&&(v[c[d]]=
!0);for(d=0;d<m.length;d++)""!=m[d]&&(v[m[d]]=!0);d=t.keys(v);return{left:b,right:a,cost:b.cost+a.cost,i:"_"+d.sort().join("_")+"_",vars:h,join:k}},executeBushyTree:function(b,a,e,h,k){null==b.left?c.executeEmptyJoinBGP(b.right,a,e,h,k):null==b.right?c.executeEmptyJoinBGP(b.left,a,e,h,k):c.executeBushyTree(b.left,a,e,h,function(d){null!=d?c.executeBushyTree(b.right,a,e,h,function(a){null!=a?k(c.joinBindings2(b.join,d,a)):k(null)}):k(null)})},executeAndBGPsDPSize:function(b,a,e,h,l){b=c.executeAndBGPsGroups(b);
var d=[];k.eachSeries(b,function(a,b){e.computeCosts(a,h,function(a){var e={},h={},k={},l,m=null,t={};k["1"]=[];for(var v=0;v<a.length;v++){var w=[];delete a[v].variables;for(l in a[v])"_cost"!=l&&("var"===a[v][l].token?w.push(a[v][l].value):"blank"===a[v][l].token&&w.push(a[v][l].value));h["_"+v+"_"]={left:a[v],right:null,cost:a[v]._cost,i:"_"+v+"_",vars:w};w={left:a[v],right:null,cost:a[v]._cost,i:"_"+v+"_",vars:w};e["_"+v+"_"]=w;delete a[v]._cost;t["_"+v+"_"]=!0;k["1"].push("_"+v+"_");if(null==
m||m.cost>w.cost)m=w}for(w=2;w<=a.length;w++)for(var x=1;x<w;x++)for(var B=k[""+x]||[],C=k[""+(w-x)]||[],v=0;v<B.length;v++)for(var ha=0;ha<C.length;ha++)if(B[v]!==C[ha]){var N=h[B[v]],E=h[C[ha]];if(0==c.intersectionSize(N,E)&&c.connected(N,E)&&(l=w,N=c.createJoinTree(e[N.i],e[E.i]),!t[N.i])){t[N.i]=!0;E=N.cost+1;null!=e[N.i]&&(E=e[N.i].cost);var ea=k[w]||[];ea.push(N.i);h[N.i]=N;k[w]=ea;E>N.cost&&(l===w&&(m=N),e[N.i]=N)}}d.push(m);b()})},function(){var b=null;k.eachSeries(d,function(d,k){c.executeBushyTree(d,
a,e,h,function(a){a?(b=null==b?a:c.crossProductBindings(b,a),k()):k("Error executing bushy tree")})},function(a){a?l(null,a):l(b)})})},executeEmptyJoinBGP:function(b,a,e,h,k){return c.executeBGPDatasets(b,a,e,h,k)},executeBGPDatasets:function(b,a,e,h,l){var d={};if(null==b.graph){var m=[];k.eachSeries(a.implicit,function(a,k){null==d[a.oid]?(d[a.oid]=!0,b.graph=a,e.rangeQuery(b,h,function(a){a=c.buildBindingsFromRange(a,b);m.push(a);k()})):k()},function(){var a=c.unionManyBindings(m);l(a)})}else if("var"===
b.graph.token){var t=b.graph.value,m=[];k.eachSeries(a.named,function(a,k){null==d[a.oid]?(d[a.oid]=!0,b.graph=a,null!=m?e.rangeQuery(b,h,function(d){if(null!=d){d=c.buildBindingsFromRange(d,b);for(var e=0;e<d.length;e++)d[e][t]=a.oid;m.push(d)}else m=null;k()}):k()):k()},function(){if(null==m)l(null);else{var a=c.unionManyBindings(m);l(a)}})}else e.rangeQuery(b,h,function(a){null!=a?(a=c.buildBindingsFromRange(a,b),l(a)):l(null)})},buildBindingsFromRange:function(b,a){c.variablesInBGP(a);var e=a.value||
a,h={};for(w in e)e[w]&&"var"===e[w].token?h[w]=e[w].value:e[w]&&"blank"===e[w].token&&(h[w]="blank:"+e[w].value);e=[];if(null!=b)for(var k=0;k<b.length;k++){var d={},m=b[k],t=!1,w;for(w in h){var n=m[w];if(null==d[h[w]]||d[h[w]]===n)d[h[w]]=n;else{t=!0;break}}t||e.push(d)}return e},areCompatibleBindings:function(b,a){for(var c in b)if(null!=a[c]&&a[c]!=b[c])return!1;return!0},mergeBindings:function(b,a){var c={},h;for(h in b)c[h]=b[h];for(h in a)c[h]=a[h];return c},joinBindings2:function(b,a,e){for(var h=
{},k,d,m,t,w=[],n=0;n<a.length;n++){k=a[n];t=h;for(var y=0;y<b.length;y++)d=b[y],d=k[d],y==b.length-1?(m=t[d]||[],m.push(k),t[d]=m):(m=t[d]||{},t=t[d]=m)}for(n=0;n<e.length;n++)for(k=e[n],t=h,y=0;y<b.length;y++)if(d=b[y],d=k[d],null!=t[d])if(y==b.length-1)for(a=0;a<t[d].length;a++)w.push(c.mergeBindings(t[d][a],k));else t=t[d];return w},joinBindings:function(b,a){for(var e=[],h=0;h<b.length;h++)for(var k=b[h],d=0;d<a.length;d++){var m=a[d];c.areCompatibleBindings(k,m)&&e.push(c.mergeBindings(k,m))}return e},
augmentMissingBindings:function(b,a){for(var c in a)null==b[c]&&(b[c]=null);return b},leftOuterJoinBindings:function(b,a){for(var e=[],h=0;h<b.length;h++){for(var k=b[h],d=!1,m=0;m<a.length;m++){var t=a[m];c.areCompatibleBindings(k,t)&&(d=!0,e.push(c.mergeBindings(k,t)))}!1===d&&(c.augmentMissingBindings(k,t),e.push(k))}return e},crossProductBindings:function(b,a){for(var e=[],h=0;h<b.length;h++)for(var k=b[h],d=0;d<a.length;d++)e.push(c.mergeBindings(k,a[d]));return e},unionBindings:function(b,a){return b.concat(a)},
unionManyBindings:function(b){for(var a=[],e=0;e<b.length;e++)a=c.unionBindings(a,b[e]);return a}};C.exports={QueryPlan:c}},{"./utils":58}],55:[function(x,C,B){var t=x("./network_transport").NetworkTransport,k=x("./rvn3_parser").RVN3Parser,c=x("./jsonld_parser").JSONLDParser,b=x("./utils");B=function(a){this.precedences=["text/turtle","text/n3","application/ld+json","application/json"];this.parsers={"text/turtle":k.parser,"text/n3":k.parser,"application/ld+json":c.parser,"application/json":c.parser};
"undefined"!==typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser);if(null!=a)for(var e in a.parsers)this.parsers[e]=a.parsers[e];if(a&&null!=a.precedences)for(e in this.precedences=a.precedences,a.parsers)b.include(this.precedences,e)||this.precedences.push(e);this.acceptHeaderValue="";for(a=0;a<this.precedences.length;a++)this.acceptHeaderValue=0!=a?this.acceptHeaderValue+","+this.precedences[a]:this.acceptHeaderValue+this.precedences[a]};
B.prototype.registerParser=function(a,b){this.parsers[a]=b;this.precedences.push(a)};B.prototype.unregisterParser=function(a){delete this.parsers[a];for(var b=[],c=0;c<this.precedences.length;c++)this.precedences[c]!=a&&b.push(this.precedences[c]);this.precedences=b};B.prototype.setAcceptHeaderPrecedence=function(a){this.precedences=a};B.prototype.load=function(a,b,c){var e=this;t.load(a,this.acceptHeaderValue,function(d,h){if(d)c(d);else{var k=h.headers["Content-Type"]||h.headers["content-type"],
l=h.data;if(null!=k){var k=k.split(";")[0],n;for(n in e.parsers)if(-1!=n.indexOf("/")){var m=n.split("/");if("*"===m[1]){if(-1!=k.indexOf(m[0]))return e.tryToParse(e.parsers[n],b,l,{documentURI:a},c)}else if(-1!=k.indexOf(n)||-1!=k.indexOf(m[1]))return e.tryToParse(e.parsers[n],b,l,{documentURI:a},c)}else if(-1!=k.indexOf(n))return e.tryToParse(e.parsers[n],b,l,{documentURI:a},c);c(Error("Unknown media type : "+k))}else c(Error("Uknown media type"))}})};B.prototype.loadFromFile=function(a,b,c,k){try{var d=
this;x("fs").readFile(c.split("file:/")[1],function(e,h){e?k(e):(h=h.toString("utf8"),d.tryToParse(a,b,h,{documentURI:c},k))})}catch(m){k(m)}};B.prototype.tryToParse=function(a,c,h,k,d){try{"string"===typeof h&&(h=b.normalizeUnicodeLiterals(h)),a.parse(h,c,k,d)}catch(m){console.log(m.message),console.log(m.stack),d(m)}};C.exports={RDFLoader:B}},{"./jsonld_parser":44,"./network_transport":46,"./rvn3_parser":57,"./utils":58,fs:1}],56:[function(x,C,B){var t=x("./utils"),k=x("./query_filters").QueryFilters;
RDFModel={defaultContext:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",
com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},UrisMap:function(){this.defaultNs="";this.interfaceProperties="get remove set setDefault addAll resolve shrink".split(" ")}};RDFModel.UrisMap.prototype.values=function(){var c={},b;for(b in this)t.include(this.interfaceProperties,b)||"function"===typeof this[b]||"defaultNs"===b||"interfaceProperties"===
b||(c[b]=this[b]);return c};RDFModel.UrisMap.prototype.get=function(c){if(-1!=c.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[c]};RDFModel.UrisMap.prototype.remove=function(c){if(-1!=c.indexOf(" "))throw"Prefix must not contain any whitespaces";delete this[c];return null};RDFModel.UrisMap.prototype.set=function(c,b){if(-1!=c.indexOf(" "))throw"Prefix must not contain any whitespaces";this[c]=b};RDFModel.UrisMap.prototype.setDefault=function(c){this.defaultNs=c};RDFModel.UrisMap.prototype.addAll=
function(c,b){for(var a in c)t.include(this.interfaceProperties,a)||(null!=this[a]?!0===b&&(this[a]=c[a]):this[a]=c[a]);return this};RDFModel.UrisMap.prototype.resolve=function(c){var b=c.split(":");c=b[0];b=b[1];return""===c?null==this.defaultNs?null:this.defaultNs+b:null!=this[c]?this[c]+b:null};RDFModel.UrisMap.prototype.shrink=function(c){for(var b in this){var a=this[b];if(0===c.indexOf(a)&&""!==a&&"defaultNs"!=b)return c=c.split(a)[1],b+":"+c}return c};RDFModel.Profile=function(){this.prefixes=
new RDFModel.UrisMap;this.terms=new RDFModel.UrisMap};RDFModel.Profile.prototype.importProfile=function(c,b){this.prefixes.addAll(c.prefixes,b);this.terms.addAll(c.terms,b)};RDFModel.Profile.prototype.resolve=function(c){return-1!=c.indexOf(":")?this.prefixes.resolve(c):null!=this.terms[c]?this.terms.resolve(c):null};RDFModel.Profile.prototype.setDefaultPrefix=function(c){this.prefixes.setDefault(c)};RDFModel.Profile.prototype.setDefaultVocabulary=function(c){this.terms.setDefault(c)};RDFModel.Profile.prototype.setPrefix=
function(c,b){this.prefixes.set(c,b)};RDFModel.Profile.prototype.setTerm=function(c,b){this.terms.set(c,b)};RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this);this.blankNodeCounter=0;var c=this;this.filters={s:function(a){return function(b){return b.subject.equals(a)}},p:function(a){return function(b){return b.predicate.equals(a)}},o:function(a){return function(b){return b.object.equals(a)}},sp:function(a,b){return function(c){return c.subject.equals(a)&&c.predicate.equals(b)}},so:function(a,
b){return function(c){return c.subject.equals(a)&&c.object.equals(b)}},po:function(a,b){return function(c){return c.predicate.equals(a)&&c.object.equals(b)}},spo:function(a,b,c){return function(e){return e.subject.equals(a)&&e.predicate.equals(b)&&e.object.equals(c)}},describes:function(a){return function(b){return b.subject.equals(a)||b.object.equals(a)}},type:function(a){var b=c.resolve("rdf:type");return function(c){return c.predicate.equals(b)&&c.object.equals(a)}}};for(var b in RDFModel.defaultContext)this.prefixes.set(b,
RDFModel.defaultContext[b])};RDFModel.RDFEnvironment.prototype=t.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment});RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var c=new RDFModel.BlankNode(this.blankNodeCounter);this.blankNodeCounter++;return c};RDFModel.RDFEnvironment.prototype.createNamedNode=function(c){var b=this.resolve(c);return null!=b?new RDFModel.NamedNode(b):new RDFModel.NamedNode(c)};RDFModel.RDFEnvironment.prototype.createLiteral=function(c,b,a){return null!=
a?new RDFModel.Literal(c,b,a.toString()):new RDFModel.Literal(c,b,a)};RDFModel.RDFEnvironment.prototype.createTriple=function(c,b,a){return new RDFModel.Triple(c,b,a)};RDFModel.RDFEnvironment.prototype.createGraph=function(c){var b=new RDFModel.Graph;if(null!=c)for(var a=0;a<c.length;a++)b.add(c[a]);return b};RDFModel.RDFEnvironment.prototype.createAction=function(c,b){return function(a){return c(a)?b(a):a}};RDFModel.RDFEnvironment.prototype.createProfile=function(c){if(!0===c)return new RDFModel.RDFEnvironment.Profile;
c=new RDFModel.RDFEnvironment.Profile;c.importProfile(this);return c};RDFModel.RDFEnvironment.prototype.createTermMap=function(c){if(!0===c)return new RDFModel.UrisMap;c=this.terms.values();var b=new RDFModel.UrisMap,a;for(a in c)b[a]=c[a];return b};RDFModel.RDFEnvironment.prototype.createPrefixMap=function(c){if(!0===c)return new RDFModel.UrisMap;c=this.prefixes.values();var b=new RDFModel.UrisMap,a;for(a in c)b[a]=c[a];return b};RDFModel.RDFNode=function(c){this.interfaceName=c;this.attributes=
["interfaceName","nominalValue"]};RDFModel.RDFNode.prototype.equals=function(c){if(null==c.interfaceName)return this.valueOf()==c;for(var b in this.attributes){var a=this.attributes[b];if(this[a]!=c[a])return!1}return!0};RDFModel.BlankNode=function(c){RDFModel.RDFNode.call(this,"BlankNode");this.nominalValue="_:"+c;this.bnodeId=c};RDFModel.BlankNode.prototype=t.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode});RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue};
RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue};RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue};RDFModel.Literal=function(c,b,a){RDFModel.RDFNode.call(this,"Literal");this.nominalValue=c;null!=b?this.language=b:null!=a&&(this.datatype=a)};RDFModel.Literal.prototype=t.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal});RDFModel.Literal.prototype.toString=function(){var c='"'+this.nominalValue+'"';if(null!=this.language)c=c+"@"+this.language;
else if(null!=this.datatype||this.type)c=c+"^^<"+(this.datatype||this.type)+">";return c};RDFModel.Literal.prototype.toNT=function(){return this.toString()};RDFModel.Literal.prototype.valueOf=function(){return k.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})};RDFModel.NamedNode=function(c){RDFModel.RDFNode.call(this,"NamedNode");this.nominalValue=null!=c.value?c.value:c};RDFModel.NamedNode.prototype=t.create(RDFModel.RDFNode.prototype,
{constructor:RDFModel.NamedNode});RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue};RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"};RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue};RDFModel.Triple=function(c,b,a){this.subject=c;this.predicate=b;this.object=a};RDFModel.Triple.prototype.equals=function(c){return this.subject.equals(c.subject)&&this.predicate.equals(c.predicate)&&this.object.equals(c.object)};RDFModel.Triple.prototype.toString=
function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"};RDFModel.Graph=function(){this.triples=[];this.duplicates={};this.actions=[];this.length=0};RDFModel.Graph.prototype.add=function(c){for(var b=0;b<this.actions.length;b++)c=this.actions[b](c);b=c.subject.toString()+c.predicate.toString()+c.object.toString();this.duplicates[b]||(this.duplicates[b]=!0,this.triples.push(c));this.length=this.triples.length;return this};RDFModel.Graph.prototype.addAction=
function(c,b){this.actions.push(c);if(1==b)for(var a=0;a<this.triples.length;a++)this.triples[a]=c(this.triples[a]);return this};RDFModel.Graph.prototype.addAll=function(c){c=c.toArray();for(var b=0;b<c.length;b++)this.add(c[b]);this.length=this.triples.length;return this};RDFModel.Graph.prototype.remove=function(c){for(var b=null,a=0;a<this.triples.length;a++)if(this.triples[a].equals(c)){delete this.duplicates[c.subject.toString()+c.predicate.toString()+c.object.toString()];b=a;break}null!=b&&this.triples.splice(b,
1);this.length=this.triples.length;return this};RDFModel.Graph.prototype.toArray=function(){return this.triples};RDFModel.Graph.prototype.some=function(c){for(var b=0;b<this.triples.length;b++)if(!0===c(this.triples[b],this))return!0;return!1};RDFModel.Graph.prototype.every=function(c){for(var b=0;b<this.triples.length;b++)if(!1===c(this.triples[b],this))return!1;return!0};RDFModel.Graph.prototype.filter=function(c){for(var b=new RDFModel.Graph,a=0;a<this.triples.length;a++)!0===c(this.triples[a],
this)&&b.add(this.triples[a]);return b};RDFModel.Graph.prototype.forEach=function(c){for(var b=0;b<this.triples.length;b++)c(this.triples[b],this)};RDFModel.Graph.prototype.merge=function(c){c=new RDFModel.Graph;for(var b=0;b<this.triples.length;b++)c.add(this.triples[b]);return c};RDFModel.Graph.prototype.match=function(c,b,a,e){for(var h=new RDFModel.Graph,k=0,d=0;d<this.triples.length;d++){var m=this.triples[d];if(null==c||m.subject.equals(c))if(null==b||m.predicate.equals(b))if(null==a||m.object.equals(a))if(null==
e||k<e)k++,h.add(m);else break}return h};RDFModel.Graph.prototype.removeMatches=function(c,b,a){for(var e=[],h=0;h<this.triples.length;h++){var k=this.triples[h];if(null==c||k.subject.equals(c))null!=b&&!k.predicate.equals(b)||null!=a&&!k.object.equals(a)||e.push(k)}for(h=0;h<e.length;h++)this.remove(e[h]);return this};RDFModel.Graph.prototype.toNT=function(){var c="";this.forEach(function(b){c+=b.toString()});return c};RDFModel.buildRDFResource=function(c,b,a,e){return"blank"===c.token?RDFModel.buildBlankNode(c,
b,a,e):"literal"===c.token?RDFModel.buildLiteral(c,b,a,e):"uri"===c.token?RDFModel.buildNamedNode(c,b,a,e):"var"===c.token?(c=b[c.value],null!=c?RDFModel.buildRDFResource(c,b,a,e):null):null};RDFModel.buildBlankNode=function(c,b,a,e){null!=c.valuetmp&&(c.value=c.valuetmp);0===c.value.indexOf("_:")&&(c.value=c.value.split("_:")[1]);return new RDFModel.BlankNode(c.value)};RDFModel.buildLiteral=function(c,b,a,e){return new RDFModel.Literal(c.value,c.lang,c.type)};RDFModel.buildNamedNode=function(c,b,
a,e){null==c.value&&null!=c.prefix&&(b=a.resolveNsInEnvironment(c.prefix,e),c.value=b+c.suffix);return new RDFModel.NamedNode(c)};RDFModel.rdf=new RDFModel.RDFEnvironment;C.exports=RDFModel},{"./query_filters":53,"./utils":58}],57:[function(x,C,B){function t(c){switch(c[0]){case '"':return 0<c.indexOf("^^")?(c=c.split("^^"),{literal:c[0]+"^^<"+c[1]+">"}):{literal:c};case "_":return{blank:c.replace("b","")};default:return{token:"uri",value:c,prefix:null,suffix:null}}}var k=x("n3").Parser;C.exports=
{RVN3Parser:{parser:{async:!0,parse:function(c,b,a,e){e||(e=a,a=b,b=null);b&&"string"===typeof b&&(b={token:"uri",value:b,prefix:null,suffix:null});a&&a.baseURI&&(a.documentIRI=a.baseURI);var h=[];(new k(a)).parse(c,function(a,c){a?e(a):c?h.push({subject:t(c.subject),predicate:t(c.predicate),object:t(c.object),graph:b}):e(!1,h)})},resetBlankNodeIds:function(){k._resetBlankNodeIds()}}}}},{n3:32}],58:[function(x,C,B){(function(t){var k=function(){return"undefined"!==typeof t&&t.nextTick?t.nextTick:
"undefined"!==typeof window&&window.setImmediate?window.setImmediate:function(a){setTimeout(a,0)}}(),c=0,b=100,a=function(a){c++;c<b?a():(c=0,k(a))},e=function(a){try{if(null==a)return"";if("uri"===a.token)return"u"+a.value;if("blank"===a.token)return"b"+a.value;if("literal"===a.token){var b="l"+a.value,b=b+(a.type||"");return b+=a.lang||""}}catch(D){if("object"===typeof a){b="";for(p in a)b=b+p+a[p];return b}return a}};parseISO8601=function(a){return Date.parse(a)};Date.prototype.toISOString||function(){function a(a){return 10>
a?"0"+a:a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1E3).toFixed(3).slice(2,5)+"Z"}}();iso8601=function(a){return a.toISOString()};compareDateComponents=function(a,b){var c=parseISO8601(a),d=parseISO8601(b);return c==d?0:c<d?-1:1};lexicalFormLiteral=function(a,b){var c=a.value,d=a.lang,e=a.type;null!=c&&null!=
e&&"string"!=typeof e?(c=e.value,null==c&&(c=e.suffix,e=b.namespaces[e.prefix],a.type=e+c,c=e+c),e=-1!=c.indexOf("hexBinary")?'"'+a.value.toLowerCase()+'"^^<'+c+">":'"'+a.value+'"^^<'+c+">"):e=null==d&&null==e?'"'+c+'"':null==e?'"'+c+'"@'+d:-1!=e.indexOf("hexBinary")?'"'+a.value.toLowerCase()+'"^^<'+e+">":'"'+a.value+'"^^<'+e+">";return e};normalizeUnicodeLiterals=function(a){for(var b=a.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],c={},d=0;d<b.length;d++)null==c[b[d]]&&(c[b[d]]=!0,a=a.replace(new RegExp("\\"+
b[d],"g"),eval("'"+b[d]+"'")));return a};registerIndexedDB=function(a){if("undefined"===typeof window&&"undefined"!==typeof t&&!1===t.browser){var b=x("sqlite3"),c=x("indexeddb-js"),b=new b.Database(":memory:"),c=c.makeScope("sqlite3",b);a.indexedDB=c.indexedDB;a.IDBKeyRange=c.IDBKeyRange}else c="undefined"===typeof window?self:window,c.indexedDB=c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,c.IDBKeyRange=c.IDBKeyRange||c.webkitIDBKeyRange||c.msIDBKeyRange,c.indexedDB?(a.indexedDB=
c.indexedDB,a.IDBKeyRange=c.IDBKeyRange):console.log("The browser does not support IndexDB.")};guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};var e=function(a){try{if(null==a)return"";if("uri"===a.token)return"u"+a.value;if("blank"===a.token)return"b"+a.value;if("literal"===a.token){var b="l"+a.value,b=b+(a.type||"");return b+=a.lang||""}}catch(D){if("object"===typeof a){b="";for(p in a)b=b+
p+a[p];return b}return a}},h=function(a,b){for(var c=[],d=0;d<a.length;d++)b(a[d])&&c.push(a[d]);return c},l=function(a,b){if(a.forEach)a.forEach(b);else for(var c=0;c<a.length;c++)b(a[c])};clone=function(a){return JSON.parse(JSON.stringify(a))};var d=function(){function a(){}return function(b){var c=typeof b;if("function"==c||b&&"object"==c){a.prototype=b;var d=new a;a.prototype=null}return d||void 0}}(),m=function(a,b,c){a()?b(function(d){if(d)return c(d);m(a,b,c)}):c()},v=function(b,c,d){d=d||
function(){};if(!b.length)return d();var e=0,h=function(){c(b[e],function(c){c?(d(c),d=function(){}):(e+=1,e>=b.length?d():a(h))})};h()},w=function(a,b,c,d){v(a,function(a,d){c(b,a,function(a,c){b=c;d(a)})},function(a){d(a,b)})};C.exports={isWorker:function(){return"undefined"===typeof t||!0===t.browser?"undefined"===typeof window?!0:!1:!1},nextTick:a,hasTerm:e,lexicalFormBaseUri:function(a,b){var c;b=b||{};if(null==a.value){c=a.prefix;var d=a.suffix,e=b.namespaces[c];c=null!=e?e+d:c+":"+d}else c=
a.value;if(null===c)return null;-1==c.indexOf(":")&&(c=(b.base||"")+c);return c},parseISO8601:parseISO8601,compareDateComponents:compareDateComponents,iso8601:iso8601,normalizeUnicodeLiterals:normalizeUnicodeLiterals,lexicalFormLiteral:lexicalFormLiteral,registerIndexedDB:registerIndexedDB,guid:guid,hashTerm:e,keys:function(a){var b=[],c;for(c in a)b.push(c);return b},values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},size:function(a){if(a.length)return a.length;var b=0,c;for(c in a)b++;
return b},map:function(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d]);return c},each:l,forEach:l,include:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},reject:h,remove:h,clone:clone,create:d,whilst:m,eachSeries:v,eachParallel:function(b,c,d){d=d||function(){};if(!b.length)return d();for(var e=!1,h=0,k=function(a){if(a)throw e=!0,Error(a);e||(h++,h===b.length&&d())},l=0;l<b.length;l++)(function(b,c,d,e){a(function(){try{e(b[c],function(){d()})}catch(ha){d(ha)}})})(b,
l,k,c)},seq:function(){var a=arguments;return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();w(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}},yieldFrequency:function(a){b=a}}}).call(this,x("VCmEsw"))},{VCmEsw:12}]},{},[42])(42)});
